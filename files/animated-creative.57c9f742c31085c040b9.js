window._bannerflow.registerModule('57c9f742c31085c040b9',()=>{var AC;(()=>{"use strict";var t,i,e={0:(t,i,e)=>{e.d(i,{H4:()=>a,HW:()=>h,an:()=>o,rJ:()=>r});var n=e(380);const s={enabled:!0,level:"error"};class r extends Error{constructor(t,i){var e,n;super(`WidgetError: "${t}" ${null!==(n=null===(e=null==i?void 0:i.originalError)||void 0===e?void 0:e.message)&&void 0!==n?n:""}`),this.name="WidgetError",this.contexts=i}}class o extends Error{constructor(t,i){var e;super(`VideoError: ${t} ${null!==(e=null==i?void 0:i.src)&&void 0!==e?e:""}`),this.name="VideoError"}}function h(t){switch(t){case MediaError.MEDIA_ERR_ABORTED:return n.K.MediaErrorAborted;case MediaError.MEDIA_ERR_NETWORK:return n.K.MediaErrorNetwork;case MediaError.MEDIA_ERR_DECODE:return n.K.MediaErrorDecode;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:return n.K.MediaErrorSourceNotSupported;default:return""}}function a(t,i){let e;var n;if(e=(n=i)&&n.contexts?Object.assign(Object.assign({},s),i):Object.assign(Object.assign({},s),{contexts:{context:i}}),"error"===e.level){const i=e.contexts?Object.values(e.contexts):[],n=null===globalThis||void 0===globalThis?void 0:globalThis.globalErrorHandler;if(e.enabled&&n){const e=i.find((t=>t instanceof Error));n.handleError(null!=e?e:t)}else console.error(t,...i)}else console.warn(t,e.contexts)}},18:(t,i,e)=>{e.d(i,{N:()=>s});var n=e(414);class s{static set(t,i){return this.cache.set(t,(0,n.mg)(i)),i}static get(t){const i=this.cache.get(t);return(0,n.mg)(i)}static clear(){this.cache.clear()}}s.cache=new Map},38:(t,i,e)=>{var n;e.d(i,{Y:()=>n,o:()=>s}),function(t){t.ViewNodeChanged="viewNodeChange"}(n||(n={}));const s="custom:"},82:(t,i,e)=>{e.d(i,{DW:()=>g,ES:()=>E,QC:()=>y,RL:()=>_,Su:()=>b,Tf:()=>v,Uv:()=>o,WP:()=>F,Wq:()=>l,XI:()=>c,Yk:()=>f,cW:()=>h,cX:()=>w,gU:()=>a,i$:()=>u,i5:()=>x,rH:()=>p,rW:()=>m});var n=e(18);const s=/^(?:https?:\/\/)?(?:[^@/\n]+@)?(?:www\.)?([^:/?\n]+)/gim,r=/[(http(s)?)://(www.)?a-zA-Z0-9@:%._+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_+.~#?&//=]*)/i;function o(t=""){const i={},e=n.N.get(t);if(e)return e;if(t&&t.indexOf("?")>-1)try{new URL(t).searchParams.forEach(((t,e)=>{i[e]=t}))}catch(s){let e;const n=/([^&=]+)=?([^&]*)/g,r=t=>{try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(s){}return t},o=(t=t.substring(t.indexOf("?")+1))||window.location.search.substring(1);for(;e=n.exec(o);)i[r(e[1])]=r(e[2])}return n.N.set(t,i),i}function h(t){return!!t&&0!==t.replace(/^https?:/,"").indexOf("//")}function a(t){return"string"==typeof t&&!!t.match(r)}function c(t){return!!t&&t.startsWith("data:image")}function l(t){return!!t&&t.startsWith("data:video/mp4;base64")}function u(t="",i=""){return t.length&&i.length&&("/"!==t.charAt(t.length-1)&&(t+="/"),"/"===i.charAt(0)&&(i=i.substr(1))),t+i}function d(t,i=!0){if("string"==typeof t){const e=t.match(s);if(e)return i?function(t){return t.replace(/^((https?:)?\/\/)/gim,"")}(e[0]):e[0]}}function f(t,i){return void 0!==t[i]}function v(t){if(t)switch(t.toLowerCase()){case"1":case"on":case"true":case"yes":return!0;case"0":case"off":case"false":case"no":return!1;default:return}}function p(t,i){return i?t.replace(new URL(t).origin,new URL(i).origin):t}function m(t){if(!t)return!1;try{const i="function"==typeof URL?new URL(t).hostname:d(t,!0);return!!i&&!!i.match(/bannerflow./g)}catch(i){return!1}}function g(t,i){return d(t)===d(i)}function w(t,i=!0){if("object"==typeof t){const e=[];for(const n in t){const s=t[n];(void 0!==s&&s.toString()||!i)&&e.push(`${n}=${s}`)}return e.length?`?${e.join("&")}`:""}return""}function y(t){var i;if(!t)return;const e=t.split(/[#?]/)[0].split(".");if(1===e.length)return;const n=null===(i=e.pop())||void 0===i?void 0:i.trim().toLowerCase();if(!n)return;if(!/[a-zA-Z]/g.test(n))return;return/^[a-zA-Z0-9]+$/gi.test(n)?n:void 0}function b(t){return(t||"").replace(/\.(jpg|png|gif|svg|mp4|psd)$/i,"")}function _(t){const i=y(t);return!!i&&/^(mp4|mov|webm|h264)$/.test(i)}function x(){return!!window&&"file:"===window.location.protocol}function F(t){return new URL(t).pathname.split("/").pop()||t}function E(t){const i=t.split("/");return i.pop(),i.join("/")}},176:(t,i,e)=>{e.d(i,{$H:()=>c,Jk:()=>l,LB:()=>a,hA:()=>o,tB:()=>r,xV:()=>d});const n=[];let s="root";function r(t,i,e=s){var n;const r=null!==(n=h(e))&&void 0!==n?n:new u(e);return r.tokenMap[t]||(r.tokenMap[t]={ctor:i,args:[],instantiating:!1,instances:[],dependencies:[]}),{withArgs(...i){r.tokenMap[t].args=i}}}function o(t,i,e=s){var n;const r=null!==(n=h(e))&&void 0!==n?n:new u(e);r.tokenMap[t]||(r.tokenMap[t]={ctor:void 0,args:[],instantiating:!1,dependencies:[],instances:[i]})}function h(t){return n.find((i=>i.scope===t))}function a(t){const i=n.findIndex((i=>i.scope===t));n[i]&&(n[i].tokenMap={},n.splice(i,1))}function c(t){for(const i of n){const e=Object.values(i.tokenMap);for(const i of e)i.instances=i.instances.filter((i=>i!==t))}}function l(){const t=h("studio");for(const i of n)i!==t&&(i.tokenMap={});n.splice(0),t&&n.push(t)}class u{constructor(t="root"){this.tokenMap={},this.scope=t,n.push(this)}instantiate(t,i){return this.factory(t,i)}factory(t,{ctor:i,args:e}){const n=this.tokenMap[t];if(!n||n.instantiating)return;if(n.instantiating=!0,this.currentlyCreating=n,!i)return;const s=new i(...e.length?e:[]);return n.instantiating=!1,n.instances.push(s),this.currentlyCreating===n&&(this.currentlyCreating=void 0),s}}function d(t,{args:i,optional:e,scope:o=s,asNew:a}={}){var c;if(!a){const i=function(t,i){for(const e of n.slice().reverse()){const n=e.tokenMap[t],s=!i||i===e.scope;if(n&&s)return n.instances[0]}}(t,o);if(i)return i}const l=function(t){for(const i of n.slice().reverse()){const e=i.tokenMap[t];if(e)return e.ctor}}(t);if(!l){if(e)return;throw new Error(`Could not get injectable of token ${t}. Expected dependency constructor has probably not been initialized as an Injectable.`)}r(t,l,o);const u=h(o);if(!u){if(e)return;throw new Error(`Non-optional injection on container with scope ${o}`)}const d=h("root");if(!d&&!u)throw new Error("No container found during injection");const v=null!==(c=u.tokenMap[t])&&void 0!==c?c:null==d?void 0:d.tokenMap[t];if(!v){if(e)return;throw new Error(`Token ${t} is not registered for dependency injection.`)}if(i&&(v.args=i),u.currentlyCreating){u.currentlyCreating.dependencies.push(v);for(const t of u.currentlyCreating.dependencies){const i=f(t,v);if(i.length&&t.ctor)throw new Error(`Circular dependency detected during instantiation. ${t.ctor.name} => ${i.map((({ctor:t})=>null==t?void 0:t.name)).join(" => ")}`)}}const p=u.instantiate(t,v);return u.currentlyCreating=void 0,p}function f(t,i){const e=[];return function t(i,n){for(const s of i.dependencies){if(s.dependencies.some((({ctor:t})=>t===n.ctor)))return void e.push(s,n);t(s,n)}}(t,i),e}},180:(t,i,e)=>{e.d(i,{FY:()=>o,Jf:()=>r});var n=e(82);const s=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi;function r(t){if(o(t=null==t?void 0:t.trim()))return t;throw new Error(`Error: unsafe URL value: "${t}" (see http://g.co/ng/security#xss)`)}function o(t){return!((t=t.trim())&&"#"!==t&&!(0,n.XI)(t)&&!t.match(s))}},197:(t,i,e)=>{e.d(i,{_T:()=>s,ao:()=>n,sj:()=>r});Object.keys({sizeMode:"enum",x:"number",y:"number",quality:"number",highDpi:"boolean"});var n;!function(t){t.Fit="fit",t.Stretch="stretch",t.Fill="crop"}(n||(n={}));const s=85,r={x:.5,y:.5,quality:s,sizeMode:n.Fit,highDpi:!1}},280:(t,i,e)=>{e.d(i,{b:()=>n});class n{constructor(){this.cb={},this.skipEmission=!1}on(t,i){return this.cb[t]||(this.cb[t]=[]),-1===this.cb[t].indexOf(i)&&this.cb[t].push(i),this}once(t,i){const e=n=>{"function"==typeof i&&i(n),this.off(t,e)};return this.on(t,e),this}off(t,i){if(void 0===t)return this.clearEvents(),this;if(!i)return delete this.cb[t],this;const e=this.cb[t];if(null==e?void 0:e.length){let t=e.length;for(;t-- >0;)e[t]===i&&e.splice(t,1)}return this}emit(t,i){var e;if(this.skipEmission)return this;const n=null===(e=this.cb[t])||void 0===e?void 0:e.slice();if(n)for(const r of n)try{r(i)}catch(s){console.error("CallbackError: ",s)}return this}clearEvents(){this.cb={}}}},294:(t,i,e)=>{e.d(i,{iQ:()=>M,_E:()=>Y,To:()=>z,$Q:()=>T,rd:()=>N,pj:()=>P,DD:()=>d,um:()=>p,h6:()=>D,Xk:()=>E,ay:()=>y,A8:()=>g,E2:()=>w,VE:()=>$,Ub:()=>O,z:()=>S,DN:()=>F,_1:()=>_,ir:()=>u,JL:()=>A,yG:()=>m,Kq:()=>x,Hb:()=>b,wl:()=>j,F_:()=>L});var n,s,r=e(447);!function(t){t.Rectangle="rectangle",t.Text="text",t.Image="image",t.Video="video",t.Ellipse="ellipse",t.Button="button",t.Widget="widget",t.Feeds="feeds",t.Effects="effects",t.Selection="selection",t.Any="any"}(n||(n={})),function(t){t.List="list",t.Grid="grid",t.Preview="preview"}(s||(s={}));var o=e(719),h=e(804),a=e(999);n.Text,n.Button,n.Rectangle,n.Ellipse,n.Image,n.Widget,n.Effects,n.Video,n.Feeds;function c(t){return Boolean(t&&"kind"in t)}function l(...t){return function(i){return!!c(i)&&-1!==t.findIndex((t=>i.kind===t))}}const u=l(r.F.Button,r.F.Text),d=l(r.F.Button),f=l(r.F.Ellipse),v=l(r.F.Rectangle),p=l("creative"),m=l(r.F.Video),g=l(r.F.Image),w=l(r.F.Image,r.F.Video);function y(t){return!!t&&l(r.F.Group)(t)}const b=l(r.F.Widget,r.F.BannerflowLibraryWidget,r.F.BannerflowLibraryWidgetInstance);function _(t){return void 0!==t&&(t.kind===r.F.Button||t.kind===r.F.Text)&&!x(t)}function x(t){return void 0!==t&&"kind"in t&&("creative"!==t.kind&&t.kind!==r.F.Group&&t.__data)}function F(t,i){return!(0,a.dK)(t)&&function(t,i){return i>=t.time&&i<=t.time+t.duration}(t,i)}function E(t){return!function(t){return!(!t||"kind"in t&&"string"==typeof t.kind)}(t)&&!x(t)}function C(t){return v(t)||f(t)||g(t)}function S(t){return C(t)||m(t)}function A(t){return S(t)&&void 0!==t.masking}function $(t){return A(t)&&!0===t.masking.isMask}function O(t){return A(t)&&void 0!==t.masking.elementId}function D(t){return b(t)?t.customProperties.some((t=>t.dynamicPropertyId)):(g(t)||u(t))&&!!t.dynamicPropertyId}function M(t){var i,e,n,s,r,o;return{padding:null!==(i=null==t?void 0:t.padding)&&void 0!==i?i:{top:0,left:0,right:0,bottom:0},verticalAlignment:null!==(e=null==t?void 0:t.verticalAlignment)&&void 0!==e?e:"top",maxRows:null!==(n=null==t?void 0:t.maxRows)&&void 0!==n?n:1/0,textOverflow:null!==(s=null==t?void 0:t.textOverflow)&&void 0!==s?s:"expand",characterSpacing:null!==(r=null==t?void 0:t.characterSpacing)&&void 0!==r?r:0,lineHeight:null!==(o=null==t?void 0:t.lineHeight)&&void 0!==o?o:1.3,__fontFamilyId:""}}const k=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];let B=1;function I(){return function(t){const i=k.length;if(t<=i)return k[t-1];const e=[];let n=t;for(;n>=i;){const t=n%i;n=(n-t)/i,e.push(k[t])}return e.push(k[n-1]),e.reverse().join("")}(B++)}function j(){B=1}function T(t,i,e,n){R(t,i,e,n)}function z(t,i,e,n){R(t,i,e,n)}function R(t,i,e,n){let s=[];if(c(t))switch(t.kind){case"creative":case r.F.Group:s=t.nodes;break;default:throw new Error("Unknown group element.")}else s=t;n&&(s=s.slice().reverse());let o=0;for(const r of s)y(r)?R(r,(t=>{i(t,r,o)}),e,n):("number"!=typeof e||(0,h.tl)(r,e))&&i(r,void 0,o),o++}function L(t){const i=[];return z(t,(t=>{y(t)||i.push(t)})),i}function N(t,i){if(!t)return;let e=t.__parentNode;for(;e;){if(i(e))return;e=e.__parentNode}}function P(t){const i={};for(const e of o.HD){const n=t[e];void 0!==n&&(i[e]=n)}return i}function Y(t){if(y(t))throw new Error("View elements can not be created from a group node.");const i={kind:t.kind,__data:t};return i.elementCid=I(),i.cidIndex=B,i.id=t.id,i.name=t.name,i.ratio=t.ratio,i.time=t.time,i.duration=t.duration,u(i)&&u(t)?(i.font=t.font,i.content=t.content):g(t)&&g(i)?i.feed=t.feed:b(i)&&b(t)&&(i.customProperties=t.customProperties),i}},335:(t,i,e)=>{var n,s;e.d(i,{JF:()=>p,m0:()=>c,jb:()=>a,UP:()=>u,gm:()=>h,un:()=>f,jl:()=>d,nr:()=>l,zP:()=>v});const r=((null===(n=window.navigator)||void 0===n?void 0:n.userAgent)||"").toLowerCase(),o=null===(s=window.navigator)||void 0===s?void 0:s.vendor,h="undefined"!=typeof InstallTrigger,a=o.indexOf("Apple")>-1,c=(r.includes("chrome")||r.includes("crios"),r.includes("android")),l=a&&-1===r.indexOf("crios")&&-1===r.indexOf("fxios"),u=!!!document.documentMode&&!!window.StyleMedia,d=r.match(/(iPad)/i)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1,f=r.toLowerCase().includes("iphone")||d,v=function(){const t={simple:0,full:{major:0,minor:0,patch:0}};try{if(!r.includes("iphone")&&!r.includes("ipad"))return t;const i=r.match(/os (\d+[._]\d+[._]?\d*)/);if(!i)return t;const e=i[1].replace(/_/g,".").split(".").map((t=>parseInt(t,10)));if(e.some(isNaN))return t;return{simple:e.length>=2?parseFloat(`${e[0]}.${e[1]}`):e[0],full:{major:e[0]||0,minor:e[1]||0,patch:e[2]||0}}}catch(i){return console.warn("Could not get iOS version:",i),t}}();function p(){const t=r;let i,e=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(e[1])?(i=/\brv[ :]+(\d+)/g.exec(t)||[],parseFloat(i[1])||-1):"chrome"===e[1]&&(i=t.match(/\b(OPR|Edge)\/(\d+)/i),null!=i)?parseFloat(i[2])||-1:(e=e[2]?[e[1],e[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(i=t.match(/version\/(\d+)/i))&&e.splice(1,1,i[1]),parseFloat(e[1])||-1)}},357:(t,i,e)=>{e.d(i,{GF:()=>s,GO:()=>r,df:()=>n});function n(t){return"text"===t.unit}function s(t){var i,e,n,s,r;const o=t.currentTarget;if(o)return o.defaultView?null===(e=null===(i=o.defaultView)||void 0===i?void 0:i.frameElement)||void 0===e?void 0:e.id:null===(r=null===(s=null===(n=null==o?void 0:o.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===s?void 0:s.frameElement)||void 0===r?void 0:r.id}function r(t,i){if(!(null==i?void 0:i.instance))return{x:t.clientX,y:t.clientY};const{x:e,y:n}=i.instance;return{x:t.clientX+e,y:t.clientY+n}}new Map},380:(t,i,e)=>{var n;e.d(i,{K:()=>n}),function(t){t.ImageRemovedDuringLoad="Image was removed while loading",t.ImageLoadingFailed="Could not load image",t.ResizeObservableLoopLimit="ResizeObserver loop limit exceeded",t.ResizeObservableLoopCompleted="ResizeObserver loop completed with undelivered notifications",t.VideoSourceInitFailed="Failed to initialize video source",t.MediaErrorAborted="media resource fetching was aborted",t.MediaErrorNetwork="a network error occurred while fetching the media resource",t.MediaErrorDecode="error occurred while decoding the media resource",t.MediaErrorSourceNotSupported="media resource is not supported",t.FeedDataFetchNetworkError="Could not fetch feed data: TypeError: Failed to fetch"}(n||(n={}))},414:(t,i,e)=>{function n(t){return s(t,new Map)}function s(t,i){switch(Object.prototype.toString.call(t)){case"[object Array]":{if(i.has(t))return i.get(t);const e=t.slice(0);return i.set(t,e),e.forEach(((t,n)=>{e[n]=s(t,i)})),e}case"[object Object]":{if(i.has(t))return i.get(t);const e=Object.create(Object.getPrototypeOf(t));return i.set(t,e),Object.keys(t).forEach((n=>{"__widget"!==n&&(e[n]=s(t[n],i))})),e}default:return t}}e.d(i,{mg:()=>n})},419:(t,i,e)=>{e.d(i,{Au:()=>l,Rv:()=>s,XY:()=>h,o4:()=>a,y4:()=>c,yH:()=>o});var n=e(782);function s(t){const i=function(t,i=0,e=!1){const{x:s,y:r,width:o,height:h,rotationZ:a}=t,c={x:s+o/2,y:r+h/2};let l={x:s+i,y:r+i},u={x:s+o-i,y:r+i},d={x:s+i,y:r+h-i},f={x:s+o-i,y:r+h-i};void 0!==a&&(l=(0,n.T7)(l,c,-a),u=(0,n.T7)(u,c,-a),d=(0,n.T7)(d,c,-a),f=(0,n.T7)(f,c,-a));const v={topLeft:l,topRight:u,bottomLeft:d,bottomRight:f};return e&&(v.center={x:(Math.min(l.x,u.x,d.x,f.x)+Math.max(l.x,u.x,d.x,f.x))/2,y:(Math.min(l.y,u.y,d.y,f.y)+Math.max(l.y,u.y,d.y,f.y))/2}),v}(t),e=Math.min(i.topLeft.x,i.bottomLeft.x,i.topRight.x,i.bottomRight.x),s=Math.min(i.topLeft.y,i.bottomLeft.y,i.topRight.y,i.bottomRight.y);return{x:e,y:s,width:Math.max(i.topLeft.x,i.bottomLeft.x,i.topRight.x,i.bottomRight.x)-e,height:Math.max(i.topLeft.y,i.bottomLeft.y,i.topRight.y,i.bottomRight.y)-s}}const r=(t,i)=>t.width===i.width&&t.height===i.height;function o(t,...i){return i.every((i=>r(t,i)))}function h(t){return{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}}function a(t,i,e="contain",n){const s="cover"===e?Math.max:Math.min,r=u(n),o=s(i.width/t.width,i.height/t.height);return c({width:r(t.width*o),height:r(t.height*o)},i,"center","center",n)}function c(t,i,e="center",n="center",s){const r=u(s),o=r(function(t,i,e="center"){const n=d(e);return(i.x||0)-(t-i.width)*n}(t.width,i,e)),h=r(function(t,i,e="center"){const n=d(e);return(i.y||0)-(t-i.height)*n}(t.height,i,n));return{x:o,y:h,width:t.width,height:t.height}}function l(t,i="round"){return Object.assign(Object.assign(Object.assign({},t),function(t,i="round"){const e=u(i),{x:n,y:s}=t;return{x:"number"==typeof n?e(n):n,y:"number"==typeof s?e(s):s}}(t,i)),function(t,i="round"){const e=u(i),{width:n,height:s}=t;return{width:"number"==typeof n?e(n):n,height:"number"==typeof s?e(s):s}}(t,i))}function u(t){return t&&"none"!==t?Math[t]:t=>t}function d(t){if("number"==typeof t)return(0,n.qE)(t,0,1);switch(t){case"center":return.5;case"left":case"top":return 0;case"right":case"bottom":return 1}throw new Error(`Could not convert align '${t}' to number`)}},437:(t,i,e)=>{e.d(i,{H0:()=>f,I2:()=>x,Jy:()=>_,LF:()=>F,NI:()=>u,O1:()=>p,t:()=>d,io:()=>m,oB:()=>w});var n=e(774),s=e(879),r=e(18),o=e(782);const h=/^#[0-9a-fA-F]{3}$|^#[0-9a-fA-F]{6}$/,a=/^[0-9a-fA-F]{3}$|^[0-9a-fA-F]{6}$/,c=/^rgba\((0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d),(0?(\.\d+)?|1(\.0)?)\)$/,l=/^rgb\(\s*(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d)\s*,\s*(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d)\s*,\s*(0|255|25[0-4]|2[0-4]\d|1\d\d|0?\d?\d)\s*\)$/;function u(t){return"fill"===t||"textColor"===t||"color"===t}function d(t){return h.test(t)||c.test(t)||l.test(t)||a.test(t)||0===t.indexOf("linear-gradient")}function f(t,i="#FFFFFF"){if(t instanceof n.Q)return new n.Q(t);if(!t)return f(i);const e=r.N.get(t);if(e)return e;let o;return t="string"==typeof t?t.replace(/,\s+/gi,","):t,o=h.test(t)||a.test(t)?function(t){"#"===t[0]&&(t=t.substring(1,t.length));const i=new n.Q;3===t.length?(i.red=parseInt(t.substring(0,1)+t.substring(0,1),16),i.green=parseInt(t.substring(1,2)+t.substring(1,2),16),i.blue=parseInt(t.substring(2,3)+t.substring(2,3),16)):6===t.length?(i.red=parseInt(t.substring(0,2),16),i.green=parseInt(t.substring(2,4),16),i.blue=parseInt(t.substring(4,6),16)):(i.red=255,i.green=255,i.blue=255);const e=w(i.red,i.green,i.blue);return i.hue=e.h,i.saturation=e.s,i.lightness=e.l,i}(t):c.test(t)?p(t):l.test(t)?function(t){const i=new n.Q,e=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/.exec(t.replace(/\s/g,""));e&&(i.red=parseInt(e[1],10),i.green=parseInt(e[2],10),i.blue=parseInt(e[3],10));const s=w(i.red,i.green,i.blue);return i.hue=s.h,i.saturation=s.s,i.lightness=s.l,i}(t):0===t.indexOf("linear-gradient")?function(t){const i=t.substring(t.indexOf("(")+1,t.lastIndexOf(")")).split(/,(?![^(]*\))(?![^"']*["'](?:[^"']*["'][^"']*["'])*[^"']*$)/);let e;i[0].indexOf("deg")>-1&&(e=parseInt(i.shift()||"0",10));return function(t,i){const e=new n.Q;e.type=s.m.LinearGradient;const r=Math.PI*(i||0)/180,o=Math.cos(r),h=Math.sin(r);for(let n=0;n<t.length;n++){const s=t[n].split(" ");let r,a,c;void 0!==i?(r=s[0].trim(),a=parseInt(s[1],10),0!==n&&n!==t.length-1||(c=g(a,o,h))):(r=s[s.length-1],a=0===n?0:100,3===s.length?c={x:parseFloat(s[0]),y:parseFloat(s[1])}:a=parseFloat(s[0])),e.addColorStop(f(r),a,c)}return e}(i,e)}(t):f(i),r.N.set(t,o),o}function v(t,i,e,s=1){const r=new n.Q;if(s>1||s<0)throw new Error("invalid alpha");r.red=t,r.green=i,r.blue=e,r.alpha=Math.round(100*s);const o=w(t,i,e);return r.hue=o.h,r.saturation=o.s,r.lightness=o.l,r}function p(t){const i=new n.Q,e=/^rgba\(([^,]+),([^,]+),([^,]+),([^,]+)\)$/g.exec(t.replace(/\s/g,""));e&&(i.red=parseInt(e[1],10),i.green=parseInt(e[2],10),i.blue=parseInt(e[3],10),i.alpha=Math.round(100*parseFloat(e[4])));const s=w(i.red,i.green,i.blue);return i.hue=s.h,i.saturation=s.s,i.lightness=s.l,i}function m(t,...i){return function(t,...i){let e=0,s=0,r=0,h=0;const a={x:0,y:0},c={x:0,y:0};let l=0,u=0;if(i.forEach((i=>{var d;const f=i.color,v=(0,o.qE)(i.amount,0,1),p="solid"!==f.type?[...f.stops]:[];if(e+=(f.red-t.red)*v,s+=(f.green-t.green)*v,r+=(f.blue-t.blue)*v,h+=(f.alpha-t.alpha)*v,null==p?void 0:p.length){if(2!==p.length)throw new Error("Tinting gradients with more than 2 stops is not supported currently");(null===(d=t.stops)||void 0===d?void 0:d.length)||(t.stops=[],p.forEach(((i,e)=>{const s=0===e?0:1;t.stops.push({color:new n.Q(t),position:i.position?Object.assign({},i.position):{x:.5,y:s},offset:i.offset})})),t.type=i.color.type),l+=(p[0].offset-t.start.offset)*v,u+=(p[1].offset-t.end.offset)*v,p[0].position&&t.start.position&&p[1].position&&t.end.position&&(a.x+=(p[0].position.x-t.start.position.x)*v,a.y+=(p[0].position.y-t.start.position.y)*v,c.x+=(p[1].position.x-t.end.position.x)*v,c.y+=(p[1].position.y-t.end.position.y)*v)}})),t.stops.length){t.start.offset+=l,t.end.offset+=u,t.start.position={x:a.x+t.start.position.x,y:a.y+t.start.position.y},t.end.position={x:c.x+t.end.position.x,y:c.y+t.end.position.y};const e=i.map((t=>{var i;let e="linear-gradient"===t.color.type?new n.Q(null===(i=t.color.start)||void 0===i?void 0:i.color):void 0;return e||(e=v(t.color.red,t.color.green,t.color.blue,t.color.alpha/100)),{color:e,amount:t.amount}})),s=i.map((t=>{var i;let e="linear-gradient"===t.color.type?new n.Q(null===(i=t.color.end)||void 0===i?void 0:i.color):void 0;return e||(e=v(t.color.red,t.color.green,t.color.blue,t.color.alpha/100)),{color:e,amount:t.amount}}));t.start.color=m(t.start.color,...e),t.end.color=m(t.end.color,...s),t.alpha+=h}else t.red+=e,t.green+=s,t.blue+=r,t.alpha+=h;return t}(new n.Q(t),...i)}function g(t,i,e){const n=1-t/100;return{x:0*i-e*(n-.5)+.5,y:i*(n-.5)+0*e+.5}}function w(t,i,e){t/=255,i/=255,e/=255;const n=Math.max(t,i,e),s=Math.min(t,i,e);let r,o;const h=(n+s)/2;if(n===s)r=o=0;else{const a=n-s;switch(o=h>.5?a/(2-n-s):a/(n+s),n){case t:r=(i-e)/a+(i<e?6:0);break;case i:r=(e-t)/a+2;break;case e:r=(t-i)/a+4}r/=6}return{h:r,s:o,l:h}}function y(t){return(0,o.qE)(t,0,255)>>>0}function b(t){return((t=y(t))<16?"0":"")+t.toString(16).toUpperCase()}function _(t){if(t.type!==s.m.Solid)throw new Error("Cannot convert a none solid color to HEX format.");return`#${b(t.red)}${b(t.green)}${b(t.blue)}`}function x(t){if(t.type!==s.m.Solid)throw new Error("Cannot convert a none solid color to RGBA format.");return`rgba(${y(t.red)},${y(t.green)},${y(t.blue)},${(0,o._)(t.alpha/100)})`}function F(t){return`linear-gradient(${t.stops.map((i=>{const e=f(i.color);e.alpha=e.alpha*(t.alpha/100);let n="";return i.position?n=`${(0,o._)(i.position.x)} ${(0,o._)(i.position.y)}`:i.offset&&(n=`${(0,o._)(i.offset)}`),`${n} ${x(e)}`})).join(",")})`}},447:(t,i,e)=>{var n;e.d(i,{F:()=>n}),function(t){t.Rectangle="rectangle",t.Text="text",t.Image="image",t.Video="video",t.Group="group",t.Ellipse="ellipse",t.Button="button",t.Widget="widget",t.BannerflowLibraryWidget="bannerflowLibraryWidget",t.BannerflowLibraryWidgetInstance="bannerflowLibraryWidgetInstance"}(n||(n={}))},555:(t,i,e)=>{function n(t,i){if(!t)return!1;if(t===i)return!0;if(!i||!("parentNode"in i))return!1;let e=i.parentNode;for(;e;){if(e===t)return!0;e=e.parentNode}return!1}function s(t,i){const e=t.querySelector(i);if(!e)throw new Error(`No ${i} found in the ${t.tagName}`);return e}function r(t,i){const e=t.getAttribute(i);if(!e)throw new Error(`No ${i} attribute found in the ${t.tagName}`);return e}e.d(i,{UT:()=>r,iQ:()=>s,pR:()=>n})},599:(t,i,e)=>{e.d(i,{Bj:()=>C,Ec:()=>y,Ej:()=>A,F3:()=>m,Fk:()=>F,NY:()=>u,Vi:()=>_,Y1:()=>x,bC:()=>w,dK:()=>$,ed:()=>d,os:()=>k,rX:()=>v,rf:()=>E,x0:()=>p,xW:()=>S,xc:()=>g,z3:()=>b});var n=e(809),s=e(414),r=e(782),o=e(774),h=e(294),a=e(816),c=e(803);function l(t){return 32===t||9===t||11===t||12===t||133===t||5760===t||t>=8192&&t<=8203||8287===t||12288===t||65279===t}function u(t){return void 0!==t&&"variable"===t.type}function d(t){return void 0!==t&&("word"===t.type||"space"===t.type||"newline"===t.type||"variable"===t.type)}function f(t){return 10===t||13===t||8232===t||8233===t||133===t}function v(t,i){if(t.spans.length>0){let e=t.spans.length-1;"end"===t.spans[e].type&&e--;for(let n=0;n<t.spans.length;n++)i(t.spans[n],n)}}function p(t){switch(t){case"left":case"justify":return"flex-start";case"center":return"center";case"right":return"flex-end"}}function m(t){switch(t){case"top":return"flex-start";case"middle":return"center";case"bottom":return"flex-end"}}function g(t){return{style:(0,h.iQ)(),spans:w(t).concat([{type:"end",content:"END",top:0,left:0,width:0,height:0,lineHeight:0,attributes:{},dir:"ltr"}])}}function w(t,i={},e,r,o,h,d,v){const p=[];let m,g;t="number"==typeof t?t.toString():t,(null==e?void 0:e.variable)&&t===n.q+(0,a.ei)(e.variable.path)&&(t=t.replace(/\s/g,"&nbsp;"));for(let n=0;n<t.length;n++){const a=t.charCodeAt(n);if(l(a))"space"===g?m.content+=String.fromCharCode(a):(m={top:0,left:0,type:"space",content:String.fromCharCode(a),attributes:(0,s.mg)(i.attributes||{}),style:e?r(e):{},width:0,height:0,lineHeight:0,styleIds:h||{},styleId:o,__previousStyleIds:[...d||[]],__previousStyleIdToHistoryIndexMap:new Map(v||[])},p.push(m),g="space");else if(f(a))m={top:0,left:0,type:"newline",content:String.fromCharCode(a),width:0,height:0,lineHeight:0,style:e?r(e):{},attributes:(0,s.mg)(i.attributes||{}),styleIds:h||{},styleId:o,__previousStyleIds:[...d||[]],__previousStyleIdToHistoryIndexMap:new Map(v||[])},p.push(m),g="newline";else if("word"===g||"variable"===g)m.content+=String.fromCharCode(a);else{if(null==e?void 0:e.variable){let t={};t=r?r(e):e,m={type:"variable",content:String.fromCharCode(a),style:t,top:0,left:0,width:0,height:0,lineHeight:0,attributes:(0,s.mg)(i.attributes||{}),styleIds:h||{},styleId:o,__previousStyleIds:[...d||[]],__previousStyleIdToHistoryIndexMap:new Map(v||[])}}else m=(0,c.m8)(a,null!=e?e:{},i.attributes,{styleId:o,styleIds:h,previousStyleIds:d,previousStyleIdToHistoryIndexMap:v});p.push(m),g=(null==e?void 0:e.variable)?"variable":"word"}}for(const n of p)u(n)&&(n.content=n.content.replace(/&nbsp;/gi," ")),n.attributes.shouldRenderNumber=!1;return p}function y(t){return t.replace(/\\n/g,"\n").replace(/\\"/g,'"').replace(/\\'/g,"'").replace(/\\&/g,"&").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\f/g,"\f").replace(/\\\\/g,"\\").replace(/\\u2028/g,"\u2028").replace(/\\u2029/g,"\u2029").replace(/\\u0085/g,"")}function b(t){const i=null==t?void 0:t.value;return!!i&&function(t){if(!t)return!1;if("string"==typeof t)try{const i=JSON.parse(t);return void 0!==i.text&&void 0===i.styles}catch(i){return!1}try{return"object"==typeof t&&null!==t&&"text"in t&&!("styles"in t)&&void 0!==t.text}catch(e){return!1}}(i)}function _(t){const i=null==t?void 0:t.value;if(!i)return!1;if("string"==typeof i)try{const t=JSON.parse(i);return void 0!==t.text&&void 0!==t.styles}catch(e){return!1}try{return"object"==typeof i&&"text"in i&&"styles"in i&&void 0!==i.text&&void 0!==i.styles}catch(n){return!1}}function x(t,i){if(Object.keys(t).length!==Object.keys(i).length)return!1;for(const[e,n]of Object.entries(t))if(!i[e]||i[e]!==n)return!1;return!0}function F(t,i){return!(null==t?void 0:t.length)&&!(null==i?void 0:i.length)||(0,r.bD)(t,i)}function E(t){let i="";t:for(const e of t.spans)switch(e.type){case"newline":i+="\n";break;case"space":case"word":case"variable":i+=e.content;break;case"end":break t;default:throw new Error("Unknown span type.")}return i}function C(t,i,e,n=!0){const s=e[t];if("$mixed"===s)return!1;const r=i[t];switch(t){case"uppercase":case"underline":case"strikethrough":return n?!!r==!!s:r===s;case"font":{const t=s,i=r;return i===t||void 0!==t&&void 0!==i&&(t.id===i.id&&t.fontFamilyId===i.fontFamilyId&&t.style===i.style&&t.weight===i.weight&&t.src===i.src)}case"textColor":if(r===s)return!0;if(void 0===r||void 0===s)return!1;if(!(r instanceof o.Q&&s instanceof o.Q))throw new Error("Neither 'targetValue' nor 'sourceValue' is of type Color.");return r.toString()===s.toString();case"padding":{const t=s,i=r;return i===t||void 0!==t&&void 0!==i&&(t.top===i.top&&t.bottom===i.bottom&&t.left===i.left&&t.right===i.right)}case"textShadows":{const t=r,i=s;if(typeof i!=typeof t)return!1;if(i===t)return!0;if(i.length!==t.length)return!1;for(let e=0;e<t.length;e++){const n=t[e],s=i[e];if(!(n.blur===s.blur&&n.color===s.color&&n.offsetX===s.offsetX&&n.offsetY===s.offsetY&&n.spread===s.spread))return!1}return!0}default:return r===s}}function S(t){const i=[];for(const e of t)i.push(A(e));return i}function A(t){const i=(0,s.mg)(t);if(d(t)){const e=i;e.styleId=t.styleId,e.style=(0,s.mg)(t.style),e.styleIds=Object.assign({},t.styleIds||{}),t.__previousStyleIdToHistoryIndexMap&&(e.__previousStyleIdToHistoryIndexMap=new Map([...t.__previousStyleIdToHistoryIndexMap])),e.__previousStyleIds=(0,s.mg)(t.__previousStyleIds)}return i}function $(t){const i={};for(const e in t)if(void 0!==t[e])switch(e){case"textColor":{const n=t[e];n instanceof o.Q&&(i.textColor=n.copy());break}case"fontSize":i.fontSize=t.fontSize;break;default:i[e]=(0,s.mg)(t[e])}return i}const O=Math.PI/2,D=Math.PI,M=1.5*Math.PI;function k(t,i,e){const n=-e||0,s=(0,r.zi)(n,2*Math.PI),o=t.getBoundingClientRect();return s<O?(o.top-i.top)/Math.cos(s):s===O?o.left-i.left:s<D?(i.bottom-o.bottom)/Math.cos(Math.PI-s):s===D?i.bottom-o.bottom:s<M?(i.bottom-o.bottom)/Math.cos(s-Math.PI):s===M?i.right-o.right:(i.right-o.right)/Math.cos(s-1.5*Math.PI)}},626:(t,i,e)=>{e.d(i,{vR:()=>l,Bg:()=>p});var n=e(197);function s(t){switch(t){case"cover":case"crop":return n.ao.Fill;case"distort":case"stretch":return n.ao.Stretch;case"contain":case"fit":return n.ao.Fit;default:return n.sj.sizeMode}}var r=e(335),o=e(419),h=e(180),a=e(82),c=e(782);class l{static get origin(){var t;return null===(t=l.i)||void 0===t?void 0:t.imageOptimizerOrigin}static async n({defaultOrigin:t="",imageOptimizerOrigin:i="",svgImageOptimizerOrigin:e}={}){let n=!1;const s=r.zP.simple;return n=!(s>0&&s>=14.3&&s<14.5)&&await function(){u||(u=new Promise((t=>{const i=new Image;i.onload=i.onerror=()=>t(2===i.height),i.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"})));return u}(),l.i={webpSupport:n,defaultOrigin:t,imageOptimizerOrigin:i,svgImageOptimizerOrigin:e},n}static getCroppingOptions(t){const i=t.imageSettings;if(i.sizeMode===n.ao.Fill)return function(t,i,e=.5,n=.5){if(!(null==i?void 0:i.width)||!i.height)return;const s=Object.assign(Object.assign({},(0,o.o4)(i,t,"cover")),{x:0,y:0}),r=(0,o.y4)(t,s,e,n),h=i.width/s.width,a=(0,o.Au)({x:r.x*h,y:r.y*h,width:r.width*h,height:r.height*h}),c=(0,o.XY)(a);return c.x2=Math.min(c.x2,i.width),c.y2=Math.min(c.y2,i.height),c}(t,t.imageAsset,i.x,i.y)}static v(t,i={}){const{imageAsset:e,imageSettings:s}=t,r=function(t,i){const e=t.imageAsset;let n=t.states.reduce(((t,i)=>{const e=i.scaleX||0,n=i.scaleY||0;return Math.max(e,n,t)}),1);if(i)if(t.width<=i.width||t.height<=i.height){const e=(0,o.o4)(t,i,"cover");n=Math.min(e.width/t.width,n)}else n=1;if((null==e?void 0:e.width)&&(null==e?void 0:e.height)){const i=e.width,s=e.height;if(i<t.width*n)return{width:i,height:s}}return{width:t.width*n,height:t.height*n}}(t,i.sizeLimit),c=i.feedUrl||(null==e?void 0:e.url)||"",u=i.force?100:void 0,f="number"==typeof s.quality?s.quality:u;let v=s.sizeMode;const p=i.cropping;e||(v=v===n.ao.Fill?n.ao.Fill:n.ao.Fit);const{imageOptimizerOrigin:m,defaultOrigin:g,webpSupport:w}=l.i,y=d(c,w);if("gif"===y||void 0===f&&"svg"!==y){const t=m&&g&&(0,a.DW)(c,g)&&"local"!==window.ENVIRONMENT?(0,a.rH)(c,m):c;return(0,h.Jf)(t)}const b=l.getDevicePixelRatio(r.width,r.height,i.env,"number"!=typeof s.quality||s.highDpi);return l.getUrl(c,Object.assign(Object.assign({},r),{sizeMode:v,quality:f,cropping:p,dpr:b}))}static getUrl(t,i){const e=l.i;if(!e)throw new Error("ImageOptimizerUrlBuilder not initiated");return function(t,i){if(!t)throw new Error("No image url provided");(0,h.Jf)(t);const e=Object.assign(Object.assign({},m),(0,c.Oy)(i)),n=e.imageOptimizerOrigin;if(!(0,h.Jf)(n)||(0,a.cW)(t))return t;const s=d(t,e.webpSupport);if("svg"===s)return function(t,i){if(!i||"local"===window.ENVIRONMENT)return t;const e=(0,a.cX)({u:encodeURIComponent(t)});return`${i}/api/image/optimize${e}`}(t,e.svgImageOptimizerOrigin);if("gif"===s)return t;if(t.indexOf(n)>-1){const i=(0,a.Uv)(t).u;"string"==typeof i&&(t=decodeURIComponent(i))}if(!e.width||!e.height)throw new Error("No size provided");const r=function(t){const i=t.position?{positionX:t.position.x,positionY:t.position.y}:void 0,e=Math.round(t.width*t.dpr),n=Math.round(t.height*t.dpr),s="number"==typeof t.quality?(0,c.qE)(t.quality,0,99):void 0;return Object.assign(Object.assign({},i),{w:e,h:n,q:s})}(e),{w:o,h:l,q:u,positionX:v,positionY:p}=r,g=Object.assign({u:encodeURIComponent(t),w:o,h:l,q:u,f:s,rt:f(e.sizeMode||e.fitOption),positionX:v,positionY:p},e.cropping),w=(0,a.cX)(g);return`${n}/api/image/${e.method}${w}`}(t,Object.assign(Object.assign(Object.assign({},e),{webpSupport:e.webpSupport}),(0,c.Oy)(i)))}static g(t=""){const i="string"==typeof t?t:t.imageUrl||"";if(!this.origin&&"string"!=typeof t){const e=v(i),s="svg"!==e&&"gif"!==e,r=t.__data.imageSettings.sizeMode===n.ao.Fill;return(0,a.cW)(i)&&r&&s&&!(0,a.XI)(i)}return!!i&&l.E(i)&&!!(0,a.Uv)(i).x1}static getOriginalUrl(t=""){return l.E(t)?p(t)||"":t}static E(t){const i=l.origin;return!!i&&function(t,i){return t.indexOf(i)>-1&&!!p(t)}(t,i)}static getDevicePixelRatio(t,i,e,n){let s=window.devicePixelRatio;return(4===e||5===e)&&(s=2,t*i>=1e6&&(s=1)),n&&s?(0,c.qE)((0,c.x0)(s,.5),1,2):s}}let u;function d(t,i=!1){const e=v(t),n=r.zP.simple;return"gif"===e&&n>0&&n>=14&&n<16&&(i=!1),"svg"===e?e:i?"webp":e&&"webp"!==e?e:"png"}function f(t){const i=s(t);return i===n.ao.Stretch||i===n.ao.Fit?"contain":i===n.ao.Fill?"cover":void 0}function v(t){const i=(0,a.QC)(t);switch(i){case"jpg":return"jpeg";case"webp":case"jpeg":case"gif":case"png":case"svg":return i}}function p(t){return(0,a.Uv)(t).u}const m={webpSupport:!1,imageOptimizerOrigin:"",method:"optimize",quality:n._T,dpr:1,env:0}},719:(t,i,e)=>{e.d(i,{HD:()=>s,J9:()=>n});const n=["content","horizontalAlignment","verticalAlignment","font","fontSize","maxRows","padding","textOverflow","textColor","uppercase","underline","strikethrough","characterSpacing","lineHeight","textShadows","width","height","__fontFamilyId"],s=["__fontFamilyId","characterSpacing","font","fontSize","lineHeight","strikethrough","textColor","textShadows","underline","uppercase"]},737:(t,i,e)=>{e.d(i,{e:()=>s,u:()=>r});var n=e(782);const s="&t=",r=t=>{const i=(0,n.VP)(t),e=i.map((t=>(0,n.ih)(t))).join("");return{textParams:s+e,distinctText:i.join("")}}},774:(t,i,e)=>{e.d(i,{Q:()=>r});var n=e(437),s=e(879);class r{constructor(t){if(this.type=s.m.Solid,this.stops=[],t)this.setColor(t);else{this.red=0,this.green=0,this.blue=0,this.hue=this.saturation=this.lightness=0,this.alpha=100;const t=(0,n.oB)(this.red,this.green,this.blue);this.hue=t.h,this.saturation=t.s,this.lightness=t.l}}get angle(){if(this.stops.length>1){const t=180*Math.atan2(this.end.position.y-this.start.position.y,this.end.position.x-this.start.position.x)/Math.PI;return Math.round((90+t)%360)}return 0}get start(){return this.stops[0]}get end(){return this.stops[this.stops.length-1]}copy(){return new r(this)}toJSON(){return this.toString()}toString(){switch(this.type){case s.m.Solid:return(0,n.I2)(this);case s.m.LinearGradient:return(0,n.LF)(this)}}addColorStop(t,i,e){this.stops.push({color:t,offset:i,position:e})}setColor(t){return this.type=t.type,"solid"===t.type?(this.red=t.red,this.green=t.green,this.blue=t.blue,this.alpha=t.alpha,this.saturation=t.saturation,this.lightness=t.lightness,this.hue=t.hue):(this.alpha=t.alpha,this.stops=t.stops.map((t=>({color:(0,n.H0)(t.color),offset:t.offset,position:t.position?Object.assign({},t.position):void 0})))),this}static parse(t,i="#FFFFFF"){return(0,n.H0)(t,i)}}},782:(t,i,e)=>{function n(t,i=Number.MIN_SAFE_INTEGER,e=Number.MAX_SAFE_INTEGER){return Math.max(Math.min(t,e),i)}function s(t){return b(t,.01)}function r(t,i){return o(t,i)}function o(t,i){if(t===i)return!0;if(t&&i&&"object"==typeof t&&"object"==typeof i){if(t.constructor!==i.constructor)return!1;let e,n;if(Array.isArray(t)){if(e=t.length,e!==i.length)return!1;for(n=e;0!=n--;)if(!o(t[n],i[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===i.source&&t.flags===i.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===i.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===i.toString();const s=Object.keys(t);if(e=s.length,e!==Object.keys(i).length)return!1;for(n=e;0!=n--;)if(!Object.prototype.hasOwnProperty.call(i,s[n]))return!1;for(n=e;0!=n--;){const e=s[n];if(!e.startsWith("__")&&!o(t[e],i[e]))return!1}return!0}return t!=t&&i!=i}function h(t,...i){const e={};for(const n of i)void 0!==t[n]&&(e[n]=t[n]);return e}function a(t,...i){const e=Object.assign({},t);for(const n of i)delete e[n];return e}function c(t){const i=Object.assign({},t);for(const e in t)void 0===i[e]&&delete i[e];return i}function l(t,...i){const e=[...t];for(const n of i){const i=t.indexOf(n);i>-1&&e.splice(i,1)}return e}e.d(i,{Bf:()=>x,Cc:()=>C,Et:()=>_,HN:()=>l,LC:()=>$,Oy:()=>c,Q2:()=>m,Ri:()=>g,T7:()=>y,Up:()=>h,VP:()=>E,_:()=>s,bD:()=>r,cJ:()=>a,ey:()=>p,ih:()=>S,o4:()=>v,qE:()=>n,x0:()=>b,xW:()=>w,zi:()=>A});const u={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},d=Object.assign(Object.assign({},u),{"‍":"&zwj;","‌":"&zwnj;"}),f=Object.assign({},d);function v(t){for(const i in f)t=t.replace(new RegExp(i,"g"),f[i]);return t}function p(t){for(const i in u)t=t.replace(new RegExp(u[i],"g"),i);return t=(t=t.replace(/\\n/g,"\n")).replace(/\\r/g,"\r")}function m(t){if(!t)return!1;try{return btoa(atob(t))===t}catch(i){return!1}}!function(){const t=[];let i;for(let e=0;e<256;e++){i=e;for(let t=0;t<8;t++)i=1&i?3988292384^i>>>1:i>>>1;t[e]=i}}();function g(t){const i=`; ${document.cookie}`.split(`; ${t}=`);if(2===i.length)return i.pop().split(";").shift()}function w(t){return Math.round(180*t/Math.PI*100)/100}function y(t,i,e){const n=Math.cos(-e),s=Math.sin(-e);return{x:n*(t.x-i.x)-s*(t.y-i.y)+i.x,y:n*(t.y-i.y)+s*(t.x-i.x)+i.y}}function b(t,i){return Math.round(t/i)/(1/i)}function _(t){return"number"==typeof t}function x(t){return _(t)&&isFinite(t)}function F(t,i){return t===i?0:typeof t==typeof i?t<i?-1:1:typeof t<typeof i?-1:1}function E(t){const i=Array.from(t);return[...i.map((t=>t.normalize("NFC"))),...i.map((t=>t.normalize("NFKD")))].filter(((t,i,e)=>e.indexOf(t)===i)).sort(F).flatMap((t=>Array.from(t)))}function C(t,i,e){return t+e*(i-t)}function S(t){return encodeURIComponent(t).replace(/[!'()*]/g,(function(t){return`%${t.charCodeAt(0).toString(16)}`}))}function A(t,i){return(t%i+i)%i}function $(t,i){const e=Object.keys(t),n=Object.keys(i);return Array.from(new Set([...e,...n])).filter((e=>t[e]!==i[e])).reduce(((t,e)=>Object.assign(Object.assign({},t),{[e]:i[e]})),{})}},803:(t,i,e)=>{e.d(i,{Nj:()=>h,m8:()=>o});var n=e(414),s=e(782),r=e(599);function o(t,i,e={},s={}){return{type:"word",content:String.fromCharCode(t),style:(0,r.dK)(i),top:0,left:0,width:0,height:0,lineHeight:0,attributes:(0,n.mg)(e),styleIds:s.styleIds||{},styleId:s.styleId,__previousStyleIds:[...s.previousStyleIds||[]],__previousStyleIdToHistoryIndexMap:new Map(s.previousStyleIdToHistoryIndexMap||[])}}function h(t,i){return"newline"!==t.type&&"end"!==t.type&&(t.type===i.type&&(!!(0,r.Y1)(t.styleIds,i.styleIds)&&(!!(0,r.Fk)(t.__previousStyleIds,i.__previousStyleIds)&&function(t,i){const e=(0,s.cJ)(t.style,"__fontFamilyId"),n=(0,s.cJ)(i.style,"__fontFamilyId");if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const s in e)if(!(0,r.Bj)(s,e,n))return!1;const o=(0,s.cJ)(t.attributes,"shouldRenderNumber"),h=(0,s.cJ)(i.attributes,"shouldRenderNumber");if(Object.keys(o).length!==Object.keys(h).length)return!1;for(const r in o)if(!(0,s.bD)(t.attributes[r],i.attributes[r]))return!1;return!0}(t,i))))}},804:(t,i,e)=>{e.d(i,{Fo:()=>r,Gt:()=>s,MI:()=>y,d6:()=>v,gm:()=>x,lJ:()=>u,pE:()=>g,tD:()=>l,tl:()=>a});var n=e(999);function s(t){return o(t,"in")}function r(t){return o(t,"out")}function o(t,i){return h(t.filter((t=>t.type===i)))}function h(t){return m(...c(t))}function a(t,i){return!(0,n.dK)(t)&&g(i,t)}function c(t){const i=Array.isArray(t)?t:t.animations,e=[];return null==i||i.forEach((t=>e.push(...t.keyframes))),e}function l(t,i,e=0){const n=b(i);return t.slice(0).sort(f).find((t=>n!==t&&t.time-e<=n.time))}function u(t,i,e=0){const n=b(i);return t.slice(0).sort(d).find((t=>n!==t&&n.time<=t.time+e))}function d(t,i){return t.time-i.time||(t.duration||0)-(i.duration||0)}function f(t,i){return i.time-t.time||(i.duration||0)-(t.duration||0)}function v(t,i){return i-t.time}function p(...t){return(null==t?void 0:t.length)?Math.min(...t.map((t=>t.time))):0}function m(...t){if(!(null==t?void 0:t.length))return 0;const i=p(...t);return Math.max(...t.map((t=>t.time+(t.duration||0))))-i}function g(t,i,e=0){return w(t,i,i,e)}function w(t,i,e,n=0){const s=_(t),r=_(i),o=i===e?r:_(e);return r.time-n<=s.time&&s.time+s.duration<=o.time+o.duration+n}function y(t,i){const e=t.time<i.time?t:i,n=t.time<i.time?i:t;return Math.max(0,n.time-(e.time+(e.duration||0)))}function b(t){return"number"==typeof t?{time:t}:t}function _(t){return"number"==typeof t?{time:t,duration:0}:(void 0===t.duration&&(t.duration=0),t)}function x(t){if(!t)return;const i=parseInt(t,10);return function(t){return Number.isInteger(t)&&Number.isFinite(t)&&t>0}(i)?1e3/i:void 0}},809:(t,i,e)=>{e.d(i,{q:()=>n});const n="@"},816:(t,i,e)=>{e.d(i,{d_:()=>l,ei:()=>c,TW:()=>f,SB:()=>d,ot:()=>h});var n=e(294);function s(t){var i,e,n,s,r;if(t&&"string"!=typeof t&&"object"==typeof t&&"path"in t)return t;if("string"==typeof t)try{const i=JSON.parse(t);if(!("path"in i))throw new Error;return i}catch(o){const h=t.split(" ");return{id:h[0],path:null!==(i=h[1])&&void 0!==i?i:"",step:{start:parseInt(null!==(e=h[2])&&void 0!==e?e:1,10),size:parseInt(null!==(n=h[3])&&void 0!==n?n:1,10),occurrence:null!==(s=h[4])&&void 0!==s?s:"loop"},fallback:null!==(r=h[5])&&void 0!==r?r:"",type:"text"}}return l("")}var r=e(599);function o(t){return t.replace(/\s+/g," ").trim()}function h(t){const i={data:[],intervalInSeconds:t.intervalInSeconds};for(const e of t.data){const t={};for(const i of Object.keys(e)){const n=o(i),s=e[i].value,r=e[i].targetUrl;t[n]={value:null===s?void 0:s,targetUrl:null===r?void 0:r}}i.data.push(t)}return i}function a(t){return t.replace(/\s/g,"%20")}function c(t){return t.replace(/%20/g," ")}function l(t,i="",e="text"){return{id:t,path:a(null!=i?i:""),step:{occurrence:"loop",size:1,start:1},fallback:"",type:e}}function u(t){return"feed"===t.unit}function d(t){return!(!t||"object"!=typeof t)&&("id"in t&&"path"in t&&"step"in t)}function f(t){if(t.feed)return!0;if((0,n.ir)(t)){const i=function(t){var i;const e=(null===(i=t.__dirtyContent)||void 0===i?void 0:i.spans)||t.content.spans;for(const n of e)if((0,r.NY)(n))return!0;return!1}(t);if(i)return!0}if((0,n.Hb)(t)){const i=function(t){for(const e of t.customProperties)try{if(u(e)){const t=s(e.value);if(null==t?void 0:t.id)return!0}}catch(i){throw new Error(`Failed to parse widget property ${e.unit} - "${e.name}" value "${e.value}"`)}return!1}(t);if(i)return!0}return!1}},879:(t,i,e)=>{var n;e.d(i,{m:()=>n}),function(t){t.Solid="solid",t.LinearGradient="linear-gradient"}(n||(n={}))},911:(t,i,e)=>{e.d(i,{Ay:()=>a,Jv:()=>r,US:()=>o});var n=e(0),s=e(82);class r{static setEnvs(t){r.C=t}static setBrowserDocument(t){r.S=t}static async loadFontFace(t,i){const e=1===r.C.environment;try{const n=await r.injectFontFace(t,i,e);r.S.fonts.has(n)||r.S.fonts.add(n)}catch(s){(0,n.H4)("Could not load font",{enabled:e,contexts:{font:t,originalError:s}})}}static async injectFontFace(t,i,e=!1){const n=h(t,i);let s=r.A.get(t.id);const o=r.$.get(t.id);if(s&&o===n)return await s.load();if(!n)throw new Error("Unknown font style.");{const i=e?"U+0-200B, U+200E-10FFFF":void 0;s=new FontFace(`f-${t.id}`,`url(${n})`,{unicodeRange:i})}return r.A.set(t.id,s),r.$.set(t.id,n),await s.load()}}function o(t,i,e){const n=h(i,e);if(!n)throw new Error("Failed to get URL of font style");const r=`f-${i.id}`,o=(a=n,null===(c=(0,s.Uv)(a).u)||void 0===c?void 0:c.split(".").pop());var a,c;const l=t.createElement("style"),u=t.createElement("link");u.rel="preload",u.href=n,u.as="font",u.type=`font/${o}`,u.crossOrigin="",l.textContent=`@font-face { font-family: '${r}'; src: url(${n}) format('${o}'); }`,t.head.appendChild(u),t.head.appendChild(l)}function h(t,i){let e=t.src||t.fontUrl;const n=r.C;return 3!==n.environment&&(1===n.environment&&n.origins.FONTS_AZURE_STORAGE_CDN&&(e=(0,s.rH)(e,n.origins.FONTS_AZURE_STORAGE_CDN)),i&&(e=(0,s.rH)(e,i))),e}function a(t){const i=new URL(t).searchParams.get("u");return i?decodeURIComponent(i):t}r.A=new Map,r.$=new Map,r.S=window.document},945:(t,i,e)=>{var n;e.d(i,{y:()=>n}),function(t){t.Fit="fit",t.Fill="crop"}(n||(n={}))},997:(t,i,e)=>{e.d(i,{$M:()=>h,C0:()=>o,WH:()=>s,d4:()=>r});var n=e(335);function s(t,i){t.parentNode&&t.parentNode.insertBefore(i,t.nextSibling)}function r(t=window){try{return t.self!==window.top}catch(i){return!0}}function o(){return n.nr&&(0,n.JF)()>=17||n.zP.simple>=16.3?"javascript:''":"about:blank"}function h(t){var i;const e=document.createElement("meta");e.name="color-scheme",e.content="light only",null===(i=t.contentDocument)||void 0===i||i.head.appendChild(e)}},999:(t,i,e)=>{e.d(i,{dK:()=>s});var n=e(294);function s(t){return t.hidden||!!function(t){let i;return(0,n.rd)(t,(t=>{if(t.hidden)return i=t.id,!0})),i}(t)}}},n={};function s(t){var i=n[t];if(void 0!==i)return i.exports;var r=n[t]={exports:{}};return e[t](r,r.exports,s),r.exports}s.m=e,s.d=(t,i)=>{for(var e in i)s.o(i,e)&&!s.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:i[e]})},s.f={},s.e=t=>Promise.all(Object.keys(s.f).reduce(((i,e)=>(s.f[e](t,i),i)),[])),s.u=t=>({180:"video",303:"widget",495:"feed"}[t]+"."+{180:"d0ade1b4061a4faa72b5",303:"bfd8fe43890b5f716163",495:"4321fd2ac8b440ff6ef6"}[t]+".js"),s.o=(t,i)=>Object.prototype.hasOwnProperty.call(t,i),t={},i="AC_2025_08_08:",s.l=(e,n,r,o)=>{if(t[e])t[e].push(n);else{var h,a;if(void 0!==r)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var u=c[l];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==i+r){h=u;break}}h||(a=!0,(h=document.createElement("script")).charset="utf-8",h.timeout=120,s.nc&&h.setAttribute("nonce",s.nc),h.setAttribute("data-webpack",i+r),h.src=e),t[e]=[n];var d=(i,n)=>{h.onerror=h.onload=null,clearTimeout(f);var s=t[e];if(delete t[e],h.parentNode&&h.parentNode.removeChild(h),s&&s.forEach((t=>t(n))),i)return i(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:h}),12e4);h.onerror=d.bind(null,h.onerror),h.onload=d.bind(null,h.onload),a&&document.head.appendChild(h)}},s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.p="scripts/",(()=>{var t={478:0};s.f.j=(i,e)=>{var n=s.o(t,i)?t[i]:void 0;if(0!==n)if(n)e.push(n[2]);else{var r=new Promise(((e,s)=>n=t[i]=[e,s]));e.push(n[2]=r);var o=s.p+s.u(i),h=new Error;s.l(o,(e=>{if(s.o(t,i)&&(0!==(n=t[i])&&(t[i]=void 0),n)){var r=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;h.message="Loading chunk "+i+" failed.\n("+r+": "+o+")",h.name="ChunkLoadError",h.type=r,h.request=o,n[1](h)}}),"chunk-"+i,i)}};var i=(i,e)=>{var n,r,[o,h,a]=e,c=0;if(o.some((i=>0!==t[i]))){for(n in h)s.o(h,n)&&(s.m[n]=h[n]);if(a)a(s)}for(i&&i(e);c<o.length;c++)r=o[c],s.o(t,r)&&t[r]&&t[r][0](),t[r]=0},e=self.webpackChunkAC_2025_08_08=self.webpackChunkAC_2025_08_08||[];e.forEach(i.bind(null,0)),e.push=i.bind(null,e.push.bind(e))})();var r={};s.r(r),s.d(r,{AnimatedCreative:()=>Ci});var o,h,a,c,l=s(357);!function(t){t.Joint="joint",t.Separate="separate"}(o||(o={})),function(t){t.Joint="joint",t.Separate="separate"}(h||(h={})),function(t){t.Blur="blur",t.Contrast="contrast",t.Invert="invert",t.Grayscale="grayscale",t.Saturation="saturate",t.Sepia="sepia"}(a||(a={})),function(t){t.Length="px",t.Percentage="%"}(c||(c={}));const u={[a.Blur]:{name:"Blur",icon:"filter-blur",nuiIcon:"blur_circular",unit:c.Length,min:0,max:100},[a.Contrast]:{name:"Contrast",icon:"filter-contrast",nuiIcon:"contrast",unit:c.Percentage,min:0,max:200,default:100},[a.Invert]:{name:"Invert",icon:"filter-invert",nuiIcon:"invert_colors",unit:c.Percentage,min:0,max:100},[a.Grayscale]:{name:"Grayscale",icon:"filter-grayscale",nuiIcon:"filter_vintage",unit:c.Percentage,min:0,max:100},[a.Saturation]:{name:"Saturation",icon:"filter-saturate",nuiIcon:"animation",unit:c.Percentage,min:0,max:200,default:100},[a.Sepia]:{name:"Sepia",icon:"filter-sepia",nuiIcon:"filter_vintage",unit:c.Percentage,min:0,max:100}};Object.entries(u).reduce(((t,[i,e])=>[...t,Object.assign({id:i},e)]),[]);var d=s(294);const f=(t,i)=>t.includes(i)||t.includes("video.bannerflow.com");var v,p=s(626),m=s(176);!function(t){t.Render="render",t.Preload="preload",t.CreativeLoad="creativeload",t.Init="init",t.Click="click",t.ViewEnter="viewenter",t.ViewLeave="viewleave",t.IABViewEnter="iab_viewenter",t.IABViewLeave="iab_viewleave",t.PageReady="ready",t.Error="error",t.Destroy="destroy",t.Play="play",t.Stop="stop",t.Seek="seek",t.Loop="loop",t.Pause="pause",t.Mute="mute",t.TCData="tcdata"}(v||(v={}));var g=s(997),w=s(414);var y=s(911);function b(t){performance&&performance.mark&&performance.mark(t)}new Map;var _=s(180);function x(t,i){i=i&&(0,_.Jf)(i);const e=new F;return t.onload=()=>{e.resolve(t)},t.onerror=t=>{e.reject(t)},"string"==typeof i&&(t.src=i),e}class F{constructor(){this.promise=new Promise(((t,i)=>{this.resolve=t,this.reject=i}))}}var E=s(782);let C,S;const A={sin:Math.sin,cos:Math.cos,pi:Math.PI,PI:Math.PI,abs:Math.abs,round:Math.round,ceil:Math.ceil,floor:Math.floor,pow:Math.pow,sqrt:Math.sqrt,random:Math.random};let $=!1;const O=new Function("code","\n    try {\n        context.eval = eval;\n        context.code = code;\n    } catch(e) {\n        var context = window.context || {};\n        context.eval = eval;\n        context.code = code;\n    }\n    const scopeProxy = new Proxy(context, {\n        has(prop) { return !(prop in context) },\n        get(target, prop) {\n            if (prop in target) {\n                return target[prop];\n            }\n            if (!(typeof prop === 'symbol')) {\n                throw new Error(`Unexpected token '${prop.toString()}'.`);\n            }\n        }\n    });\n    with (scopeProxy) {\n        return eval(code);\n    }");class D{static eval(t,i={}){if(C||D.init(),$)return window.context=Object.assign(Object.assign({},A),i),O(t);const e=null==C?void 0:C.contentWindow,n=(null==C?void 0:C.contentDocument)&&(null==e?void 0:e.evalMathExpression);if(!n||!e)throw new Error("Safe eval iframe is not initiated.");return e.context=Object.assign(Object.assign({},A),i),n(t)}static async init({inStudioApp:t,isSandboxedIframe:i}={}){if(S)return S;if(!C&&"undefined"!=typeof window){C=document.createElement("iframe");const n=C.style;n.position="absolute",n.pointerEvents="none",n.width=n.height=n.opacity=n.top=n.left="0",S=x(C).promise,document.body.appendChild(C),await S;const s=C.contentDocument;if(i||!s)$=i||!s;else{const i=t?(0,E.Ri)("script-nonce"):"";try{const t=document.createElement("script"),e=URL.createObjectURL(new Blob([`window.evalMathExpression = ${O.toString()}`]));t.nonce=i,t.src=e;const n=x(t).promise;s.head.appendChild(t),await n,URL.revokeObjectURL(e)}catch(e){s.open(),s.write(`<!DOCTYPE html><html><head><script nonce="${i}">window.evalMathExpression = ${O.toString()}<\/script></head></html>`),s.close()}}}return C}static destroy(){C&&(document.body.removeChild(C),C=void 0)}}var M=s(82);class k{constructor(t){this.O=(0,m.xV)(3),this.D=(0,m.xV)(5),this.M=(0,m.xV)(6,{optional:!0}),this.k=t.animatedCreative,this.B=t.creativeDataNode,this.I=t.creativeData}play(){this.D.play()}pause(){this.D.pause()}stop(){this.D.stop()}seek(t){"preload-frame"===t&&(t=this.B.getFirstPreloadImageFrame()),this.D.seek(t)}mute(t){this.O.mute(t)}renderDynamicProperties(t){return this.k.T(t)}getAnimator(){return this.D}getFeedStore(){return this.M}getCreativeData(){return this.I}getCreativeDataNode(){return this.B}}async function B(t,i,e){const n=[];s.p=i&&(0,M.i$)(i,"/scripts/");for(const s of t){if(!s.id.startsWith("preload"))continue;switch(/^([\w-]+)/.exec(s.url)[1]){case"widget":n.push(j());break;case"feed":n.push(I(e));break;case"video":n.push(T())}}await Promise.all(n),s.p=""}async function I(t){const{FeedStore:i}=await s.e(495).then(s.bind(s,410));(0,m.tB)(6,i).withArgs(t)}async function j(){const{WidgetRenderer:t,WidgetAdApi:i,CreativeApi:e,TimelineApi:n}=await s.e(303).then(s.bind(s,245));(0,m.tB)(4,t),(0,m.tB)(8,i),(0,m.tB)(9,e),(0,m.tB)(10,n)}async function T(){const{VideoRenderer:t}=await s.e(180).then(s.bind(s,147));(0,m.tB)(7,t)}var z=s(804),R=s(280);class L{constructor(t){this.R=30,this.L=5,this.P=0,this.H=0,this.U=!1,this.X=0,this.W=0,this.V=0,this.Z=0,this.J={};const{minFps:i,durationInSeconds:e,shouldLimitFps:n}=t;this.G=n,this.tt=e,this.Z=Math.floor(1e3/i)}it(t){this.Z=t}et(t){this.P=t}nt(t){var i;if(!this.G)return!0;if(this.U&&t-this.H<this.st)return!1;if(!this.U&&t-this.H<this.R)return this.U=!0,!1;this.U=!1;return!(!!this.P&&t-this.P<(null!==(i=this.st)&&void 0!==i?i:this.V))}ht(t){const i=performance.now()-this.P,e=[Math.floor(t),Math.floor(t)+1];this.st||(this.st=this.at(i)),this.W!==e[0]?(this.ct(e),this.st=this.lt(e)):this.X<i&&(this.X=i),this.H=performance.now()}at(t){return t<this.L?0:Math.min(t+this.R,this.Z)}ut(t){return t[0]-1<0?Math.floor(this.tt):t[0]-1}ct(t){const i=Math.ceil(this.X),e=this.at(i);return this.X=0,this.W=t[0],this.J[this.ut(t)]=e,e}lt(t){var i,e;const n=t[0],s=this.ut(t);return null!==(e=null!==(i=this.J[n])&&void 0!==i?i:this.J[s])&&void 0!==e?e:this.Z}}class N extends R.b{get duration(){return this.tt}constructor(){super(),this.time=0,this.isPlaying=!1,this.loop=1,this.dt=!1,this.tt=0,this.ft=0,this.vt=0,this.pt=1,this.mt=new Map,this.gt=[],this.O=(0,m.xV)(3),this.M=(0,m.xV)(6,{optional:!0}),this.C=(0,m.xV)(2),this.wt=t=>{if(!this.yt.nt(t))return void(this.bt=requestAnimationFrame(this.wt));if(this.yt.et(t),this.dt||!this.isPlaying)return void this._t();this.ft||(this.ft=t);const i=this.xt(),e=this.creative.loops,n=(t-this.ft)*this.pt,s=(this.vt+n)/1e3;if(!this.Ft()&&this.loop>=e&&s>=i&&5!==this.C.environment)this.stop();else{if(5===this.C.environment&&s>=this.duration)return this.Ct(this.duration),void this.pause();for(s<this.duration?this.Ct(s):s>=this.duration&&(this.Ct(this.duration),this.next());this.gt.length;){const t=this.gt.pop();t.fn(...t.value)}this.emit("tick",this.time),this.yt.ht(this.time),this.bt=requestAnimationFrame(this.wt)}},this.creative=this.O.creativeDocument,this.time=this.St(),this.tt=P(this.creative);const t=5!==this.C.environment&&1!==this.C.environment;this.yt=new L({minFps:10,durationInSeconds:this.tt,shouldLimitFps:t})}play(){return!this.isPlaying&&this.creative.elements.length>0&&(this.tt=P(this.creative),this.vt=1e3*this.time,this.bt=requestAnimationFrame(this.wt),this.isPlaying=!0,this.O.At(!0),this.emit("isPlaying",!0),this.emit("play",this.time)),this}toggle(){return this.isPlaying?this.pause():this.play(),this}pause(){return this.isPlaying&&(this._t(),this.isPlaying=!1,this.O.At(!1),this.emit("isPlaying",!1),this.emit("pause",this.time)),this}stop(){if(5!==this.C.environment){const t=this.xt();this.pause(),this.Ct(t)}this.emit("stop",this.time)}seek(t){return t=Math.max(t,0)||0,this.time!==t&&(this.vt=1e3*t,this.ft=0,this.Ct(t),this.emit("seek",this.time)),this}$t(t){this.pause();const i=this.creative.elements.find((i=>i.id===t));if(i){const t=i.time+i.duration/2;this.seek(t)}else console.warn(`Tried to seek to element[${t}], but element does not exist`);return this}next(t=!0,i){const e=this.loop+(i||1);let n=!1;return this.M&&(n=this.M.loop<1,n&&this.M.setFeedLoop(i||1)),this.setLoop(e,t,!n),this}prev(t=!0,i,e){const n=this.loop-(i||1);return this.M&&this.M.setFeedLoop(this.M.loop-(i||1),e),this.setLoop(n,t,!1),this}replay(){return this.seek(0),this.emit("replay",this.loop),this}restart(){return 5===this.C.environment||(this.M&&(this.M.resetIndexState(),this.M.skipNextIndexUpdate()),this.setLoop(1),this.play(),this.emit("restart",this.loop)),this}Ot(t,i){this.Dt(),this.O.Mt("number"==typeof t?t:this.time,i)}kt(t){this.creative=t}Ct(t,i){this.time=t,this.Ot(this.time,i)}setLoop(t,i=!0,e=!0){this.M&&(e&&this.M.setFeedLoop(this.M.loop<0?this.M.loop:t),this.M.updateElementsCurrentIndex()),i?(this.vt=0,this.ft=0,this.Ct(0,!0)):this.Ot(this.time,!0),this.loop=Math.max(1,t),1===this.loop&&(this.time=this.St()),5!==this.C.environment&&this.emit("loop",this.loop)}addToQueue(t,i=[]){this.isPlaying?this.gt.push({fn:t.bind(this),value:i}):t.bind(this)(...i)}updateCustomFPSInterval(t){this.yt.it(t)}addToQueueFromWidget(t,i){5!==this.C.environment&&this.addToQueue(t,i)}Dt(){if(this.isPlaying)for(let t=0;t<this.creative.elements.length;t++){const i=this.creative.elements[t],e=i.animations;this.mt.has(i.id)||this.mt.set(i.id,{visible:!1});const n=this.mt.get(i.id);let s="none";const r=(0,z.Gt)(e),o=(0,z.Fo)(e);if(r&&(this.time>i.time&&this.time<r+i.time?s="inTransitionIn":"inTransitionIn"===n.animationState&&(this.time<=i.time||this.time>=r+i.time)&&(s="inTransitionOut")),o){const t=i.time+i.duration-o;this.time>t&&this.time<i.time+i.duration?s="outTransitionIn":"outTransitionIn"===n.animationState&&(this.time<t||this.time>=i.duration+i.time)&&(s="outTransitionOut")}(0,d.DN)(i,this.time)?this.mt.set(i.id,{visible:!0,animationState:s}):this.mt.set(i.id,{visible:!1,animationState:s});const h=0===this.time&&0===i.time,a=this.time===i.duration+i.time,c=this.mt.get(i.id);if((n.visible!==c.visible||h||a)&&((c.visible&&!a||h)&&"animationStarted"!==n.animationState?(c.animationState="animationStarted",this.emit("animation_start",i)):(c.visible||h)&&!a||"animationEnded"===n.animationState||"none"===n.animationState&&0!==o||(c.animationState="animationEnded",this.emit("animation_end",i))),n.animationState!==this.mt.get(i.id).animationState)switch(this.mt.get(i.id).animationState){case"inTransitionOut":this.emit("in_transition_end",i);break;case"outTransitionIn":this.emit("out_transition_start",i)}}}St(){return"number"==typeof this.creative.startTime?this.creative.startTime:0}xt(){return"number"==typeof this.creative.stopTime?this.creative.stopTime:this.duration-1}_t(){this.vt=0,this.ft=0,this.bt&&(cancelAnimationFrame(this.bt),this.bt=void 0)}Ft(){return"dv"===this.C.appView||!this.creative.loops}destroy(){this.dt=!0,this.clearEvents(),this._t()}}function P(t){let i=0;for(const e of t.elements)e.time+e.duration>i&&(i=e.time+e.duration);return i}var Y=s(816),H=s(599),U=s(737),X=s(447);"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);new Uint8Array(16);for(var W=[],V=0;V<256;++V)W.push((V+256).toString(16).slice(1));var Q,Z,J=s(437);class q{constructor(){this.locked=!1,this.hidden=!1}}class G extends q{get elements(){return Object.freeze(this.Bt)}get nodes(){return Object.freeze(this.It)}get tt(){let t=0;for(const i of this.elements)(0,d.ay)(i)||i.time+i.duration>t&&(t=i.time+i.duration);return Math.round(100*t)/100}constructor(t){if(super(),this.Bt=[],this.It=[],this.id=t.id,void 0===this.id)throw new Error(`No id was set when creating node ${this.name}`);this.kind=t.kind,t.nodes?this.jt(t.nodes):t.elements&&this.jt(t.elements)}jt(t){this.It=t.slice(),this.It.forEach((t=>this.Tt(t))),this.zt(t)}zt(t){this.Bt=(0,d.F_)(t);const i=this.__parentNode||this.__rootNode;null==i||i.zt(i.nodes)}*Rt(t=!1,i){i||(i=this);const e=i.nodes;switch(i.kind){case"creative":case X.F.Group:for(const i of e)if(i.kind===X.F.Group){t&&(yield i);for(const e of this.Rt(t,i))yield e}else yield i;break;default:throw new Error("Unknown group element.")}}Tt(t){(0,d.ay)(this)?(t.__rootNode=this.__rootNode,t.__parentNode=this):this instanceof K&&(t.__rootNode=this,t.__parentNode=void 0)}Lt(){const t=this;t.jt(this.nodes.slice().reverse());for(const i of t.nodes)i instanceof G&&i.jt(i.Lt().nodes);return t}Nt(t,i){const e=this.nodes.slice();i=null!=i?i:this.nodes.length,this.Tt(t),e.splice(i,0,t),this.jt(e)}Pt(t,i){for(const e of this.Rt(i))if(e.id===t)return e}Yt(t){const i=[],e=this.nodes;for(const n of e)n.id!==t&&((0,d.ay)(n)&&n.Yt(t),i.push(n));this.jt(i)}}class K extends G{get duration(){return this.tt}constructor(t){var i;super(Object.assign(Object.assign({},t),{kind:"creative",nodes:t.nodes})),this.loops=0,this.guidelines=[],this.emptyChildrenPreserved=!1,delete this.hidden,delete this.locked,delete this.name,this.width=t.width,this.height=t.height,this.fill=t.fill||(0,J.O1)("rgba(255, 255, 255, 1)"),this.loops=null!==(i=t.loops)&&void 0!==i?i:0,this.audio=t.audio,this.stopTime=t.stopTime,this.startTime=t.startTime,this.guidelines=t.guidelines||[],this.gifExport=Object.assign({frames:[],show:!1},t.gifExport),this.preloadImage=Object.assign({quality:70,format:"jpg",frames:[]},t.preloadImage),this.socialGuide=t.socialGuide}getFirstPreloadImageFrame(){return this.preloadImage.frames.length>0?this.preloadImage.frames[0]:1}Ht(){return"number"==typeof this.stopTime?this.stopTime:this.duration-1}}!function(t){t.SetState="SET_STATE",t.RemoveState="REMOVE_STATE",t.ClearStates="CLEAR_STATES",t.OpenUrl="OPEN_URL"}(Q||(Q={})),function(t){t.Click="click",t.MouseDown="mousedown",t.MouseUp="mouseup",t.MouseEnter="mouseenter",t.MouseLeave="mouseleave",t.TouchStart="touchstart",t.TouchEnd="touchend",t.TouchCancel="touchcancel"}(Z||(Z={}));var tt=s(719),it=s(38),et=s(335),nt=s(555);const st=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],rt=Math.cos,ot=Math.sin,ht=Math.tan,at=Math.sqrt,ct=Math.pow;class lt{constructor(t){t?this.Ut(t):this.Xt=this.Wt()}Ut(t){const i=t.split(/\s*[(),]\s*/).slice(1,-1);return 6===i.length?this.Xt=[+i[0],+i[2],0,+i[4],+i[1],+i[3],0,+i[5],0,0,1,0,0,0,0,1]:16===i.length?this.Xt=[+i[0],+i[4],+i[8],+i[12],+i[1],+i[5],+i[9],+i[13],+i[2],+i[6],+i[10],+i[14],+i[3],+i[7],+i[11],+i[15]]:this.Wt(),this}Vt(){return`matrix3d(${this.Xt.join(",")})`}Qt(t){return this.Xt=this.Zt(this.Xt,t),this}Jt(t=0,i=0,e=0){const n=ot(t),s=rt(t),r=ot(i),o=rt(i),h=ot(e),a=rt(e),c=[1,0,0,0,0,s,-n,0,0,n,s,0,0,0,0,1],l=[o,0,r,0,0,1,0,0,-r,0,o,0,0,0,0,1],u=[a,h,0,0,-h,a,0,0,0,0,1,0,0,0,0,1],d=this.Zt(this.Zt(c,l),u);return this.Qt(d)}qt(t){const i=ot(t),e=rt(t);return this.Qt([1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1])}Kt(t){const i=ot(t),e=rt(t);return this.Qt([e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1])}ti(t){const i=ot(t),e=rt(t);return this.Qt([e,i,0,0,-i,e,0,0,0,0,1,0,0,0,0,1])}ii(t,i){const e=ht(t),n=ht(i);return this.Qt([1,e,0,0,n,1,0,0,0,0,1,0,0,0,0,1])}ni(t,i,e=0){return this.Qt([1,0,0,0,0,1,0,0,0,0,1,0,t,i,e,1])}si(t=1,i=1,e=1){return this.Qt([t,0,0,0,0,i,0,0,0,0,e,0,0,0,0,1])}ri(){return this.oi(1,4)}hi(){return this.oi(2,4)}ai(){return this.oi(3,4)}ci(){return this.li(this.oi(1,1),this.oi(1,2),this.oi(1,3))}ui(){return this.li(this.oi(2,1),this.oi(2,2),this.oi(2,3))}di(){return this.oi(4,1)}fi(){return this.oi(4,2)}vi(){return this.oi(1,1)}mi(){return this.oi(2,2)}gi(t){const i=this.Wt();return i[11]=-1/t,this.Qt(i)}wi(){return this.oi(1,1)<0}yi(){return this.oi(2,2)<0}bi(t,i){const e=t[0],n=t[1],s=t[2],r=t[3],o=t[4],h=t[5],a=t[6],c=t[7],l=t[8],u=t[9],d=t[10],f=t[11],v=t[12],p=t[13],m=t[14],g=t[15],w=i[0]||0,y=i[1]||0,b=i[2]||0,_=i[3]||0;return[w*e+y*o+b*l+_*v,w*n+y*h+b*u+_*p,w*s+y*a+b*d+_*m,w*r+y*c+b*f+_*g]}Zt(t,i){const e=[i[0],i[1],i[2],i[3]],n=[i[4],i[5],i[6],i[7]],s=[i[8],i[9],i[10],i[11]],r=[i[12],i[13],i[14],i[15]],o=this.bi(t,e),h=this.bi(t,n),a=this.bi(t,s),c=this.bi(t,r);return[o[0],o[1],o[2],o[3],h[0],h[1],h[2],h[3],a[0],a[1],a[2],a[3],c[0],c[1],c[2],c[3]]}oi(t,i){return this.Xt[4*(i-1)+(t-1)]}Wt(){return st.slice()}li(t,i,e){return at(ct(t,2)+ct(i,2)+ct(e,2))}}function ut(t="linear"){return dt[t].func}const dt={linear:{name:"Linear",type:"none",func:t=>t},easeInExpo:{name:"InExpo",type:"in",func:t=>0===t?0:Math.pow(2,10*(t-1))},easeOutExpo:{name:"OutExpo",type:"in",func:t=>1===t?1:1-Math.pow(2,-10*t)},easeInOutExpo:{name:"InOutExpo",type:"inout",func:t=>0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},easeInQuad:{name:"InQuad",type:"in",func:t=>t*t},easeOutQuad:{name:"OutQuad",type:"out",func:t=>t*(2-t)},easeInOutQuad:{name:"InOutQuad",type:"inout",func:t=>t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:{name:"InCubic",type:"in",func:t=>t*t*t},easeOutCubic:{name:"OutCubic",type:"out",func:t=>--t*t*t+1},easeInOutCubic:{name:"InOutCubic",type:"inout",func:t=>t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:{name:"InQuart",type:"in",func:t=>t*t*t*t},easeOutQuart:{name:"OutQuart",type:"out",func:t=>1- --t*t*t*t},easeInOutQuart:{name:"InOutQuart",type:"inout",func:t=>t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:{name:"InQuint",type:"in",func:t=>t*t*t*t*t},easeOutQuint:{name:"OutQuint",type:"out",func:t=>1+--t*t*t*t*t},easeInOutQuint:{name:"InOutQuint",type:"inout",func:t=>t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},easeInElastic:{name:"InElastic",type:"in",func:t=>1===t?1:.04*t/--t*Math.sin(25*t)},easeOutElastic:{name:"OutElastic",type:"out",func:t=>0===t?0:(.04-.04/t)*Math.sin(25*t)+1},easeInOutElastic:{name:"InOutElastic",type:"inout",func:t=>.5===t?.5:(t-=.5)<0?(.02+.01/t)*Math.sin(50*t):(.02-.01/t)*Math.sin(50*t)+1},easeInBack:{name:"InBack",type:"in",func:t=>{let i=1;return i||0===i||(i=1.70158),1*t*t*((i+1)*t-i)}},easeOutBack:{name:"OutBack",type:"out",func:t=>{let i=1;return i||0===i||(i=1.70158),(t-=1)*t*((i+1)*t+i)+1}},easeInOutBack:{name:"InOutBack",type:"inout",func:t=>{let i=1;return void 0===i&&(i=1.70158),(t/=.5)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2)}},easeInBounce:{name:"InBounce",type:"in",func:t=>1-ft(1-t)},easeOutBounce:{name:"OutBounce",type:"out",func:t=>ft(t)},easeInOutBounce:{name:"InOutBounce",type:"inout",func:t=>t<.5?.5*ft(2*t):.5*ft(2*t-1)+.5}};function ft(t){return t<.36363636363636365?7.5625*t*t:t<.7272727272727273?7.5625*(t-=.5454545454545454)*t+.75:t<.9090909090909091?7.5625*(t-=.8181818181818182)*t+.9375:7.5625*(t-=.9545454545454546)*t+.984375}function vt(t){const i=null==t?void 0:t.actions;return!!i&&i.some((t=>!t.disabled&&t.operations.some((t=>t.method===Q.OpenUrl&&t.value))))}class pt{get isPlaying(){return!this._i}constructor(t){this.target=t,this.pt=1,this.P=0,this.xi=0,this.tt=.5,this.Fi=ut("linear"),this._i=!0,this.Ei=[],this.onCompleted=t=>{this.Ei.push(t)},this.wt=t=>{if(this._i)return;if(this.Ci&&t-this.P<this.Ci)return void(this.bt=requestAnimationFrame(this.wt));this.P=t,this.Si||(this.Si=t);const i=(t-this.Si)/1e3;this.xi+=i*this.pt,this.Si=t,this.Ai(this.xi)?this.pause():this.bt=requestAnimationFrame(this.wt)}}static to(t,i,e){return new pt(t).to(i,e)}to(t,i){return this.fromTo(this.target,t,i)}from(t,i){return this.fromTo(t,this.target,i)}fromTo(t,i,e){return this.$i(e),this.Oi=this.Di(t),this.Mi=this.Di(i),this.restart().play()}play(){return!0===this._i&&(this._i=!1,this.bt=requestAnimationFrame(this.wt)),this}pause(){this._i=!0,this.Si=0,this._t()}restart(){return this.xi=0,this}revert(){return this.pt*=-1,this.play()}$i(t={}){void 0!==t.customFPSInterval&&(this.Ci=t.customFPSInterval),void 0!==t.duration&&(this.tt=t.duration),void 0!==t.timingFunction&&(this.Fi=ut(t.timingFunction)),this.ki=t.callback}Ai(t){const i=this.Bi(t),e=this.Ii(i);"object"==typeof this.Mi&&Object.keys(this.Mi).forEach((t=>{const i=this.Oi[t],n=this.Mi[t];if("number"!=typeof i)throw new Error(`Cannot animate property ${t}. Must be of type number`);this.target[t]=(0,E.Cc)(i,n,e)})),this.ki&&this.ki(this);const n=this.pt<0?i<=0:i>=1;if(n)for(const s of this.Ei)s();return n}Ii(t){return this.Fi(t)}Bi(t){return this.tt>0?(0,E.qE)(t/this.tt,0,1):1}_t(){this.bt&&(cancelAnimationFrame(this.bt),this.bt=void 0)}Di(t){const i={};return"number"==typeof t&&(i.value=t),"object"==typeof t&&Object.keys(t).forEach((e=>{const n=t[e];"number"==typeof n&&(i[e]=n)})),i}}var mt=s(809);s(0);bt("0651\n0652\n0670\n0640\n0627\n064C-065F");const gt=bt("0041-005A\n0061-007A\n00AA\n00B5\n00BA\n00C0-00D6\n00D8-00F6\n00F8-0220\n0222-0233\n0250-02AD\n02B0-02B8\n02BB-02C1\n02D0-02D1\n02E0-02E4\n02EE\n037A\n0386\n0388-038A\n038C\n038E-03A1\n03A3-03CE\n03D0-03F5\n0400-0482\n048A-04CE\n04D0-04F5\n04F8-04F9\n0500-050F\n0531-0556\n0559-055F\n0561-0587\n0589\n0903\n0905-0939\n093D-0940\n0949-094C\n0950\n0958-0961\n0964-0970\n0982-0983\n0985-098C\n098F-0990\n0993-09A8\n09AA-09B0\n09B2\n09B6-09B9\n09BE-09C0\n09C7-09C8\n09CB-09CC\n09D7\n09DC-09DD\n09DF-09E1\n09E6-09F1\n09F4-09FA\n0A05-0A0A\n0A0F-0A10\n0A13-0A28\n0A2A-0A30\n0A32-0A33\n0A35-0A36\n0A38-0A39\n0A3E-0A40\n0A59-0A5C\n0A5E\n0A66-0A6F\n0A72-0A74\n0A83\n0A85-0A8B\n0A8D\n0A8F-0A91\n0A93-0AA8\n0AAA-0AB0\n0AB2-0AB3\n0AB5-0AB9\n0ABD-0AC0\n0AC9\n0ACB-0ACC\n0AD0\n0AE0\n0AE6-0AEF\n0B02-0B03\n0B05-0B0C\n0B0F-0B10\n0B13-0B28\n0B2A-0B30\n0B32-0B33\n0B36-0B39\n0B3D-0B3E\n0B40\n0B47-0B48\n0B4B-0B4C\n0B57\n0B5C-0B5D\n0B5F-0B61\n0B66-0B70\n0B83\n0B85-0B8A\n0B8E-0B90\n0B92-0B95\n0B99-0B9A\n0B9C\n0B9E-0B9F\n0BA3-0BA4\n0BA8-0BAA\n0BAE-0BB5\n0BB7-0BB9\n0BBE-0BBF\n0BC1-0BC2\n0BC6-0BC8\n0BCA-0BCC\n0BD7\n0BE7-0BF2\n0C01-0C03\n0C05-0C0C\n0C0E-0C10\n0C12-0C28\n0C2A-0C33\n0C35-0C39\n0C41-0C44\n0C60-0C61\n0C66-0C6F\n0C82-0C83\n0C85-0C8C\n0C8E-0C90\n0C92-0CA8\n0CAA-0CB3\n0CB5-0CB9\n0CBE\n0CC0-0CC4\n0CC7-0CC8\n0CCA-0CCB\n0CD5-0CD6\n0CDE\n0CE0-0CE1\n0CE6-0CEF\n0D02-0D03\n0D05-0D0C\n0D0E-0D10\n0D12-0D28\n0D2A-0D39\n0D3E-0D40\n0D46-0D48\n0D4A-0D4C\n0D57\n0D60-0D61\n0D66-0D6F\n0D82-0D83\n0D85-0D96\n0D9A-0DB1\n0DB3-0DBB\n0DBD\n0DC0-0DC6\n0DCF-0DD1\n0DD8-0DDF\n0DF2-0DF4\n0E01-0E30\n0E32-0E33\n0E40-0E46\n0E4F-0E5B\n0E81-0E82\n0E84\n0E87-0E88\n0E8A\n0E8D\n0E94-0E97\n0E99-0E9F\n0EA1-0EA3\n0EA5\n0EA7\n0EAA-0EAB\n0EAD-0EB0\n0EB2-0EB3\n0EBD\n0EC0-0EC4\n0EC6\n0ED0-0ED9\n0EDC-0EDD\n0F00-0F17\n0F1A-0F34\n0F36\n0F38\n0F3E-0F47\n0F49-0F6A\n0F7F\n0F85\n0F88-0F8B\n0FBE-0FC5\n0FC7-0FCC\n0FCF\n1000-1021\n1023-1027\n1029-102A\n102C\n1031\n1038\n1040-1057\n10A0-10C5\n10D0-10F8\n10FB\n1100-1159\n115F-11A2\n11A8-11F9\n1200-1206\n1208-1246\n1248\n124A-124D\n1250-1256\n1258\n125A-125D\n1260-1286\n1288\n128A-128D\n1290-12AE\n12B0\n12B2-12B5\n12B8-12BE\n12C0\n12C2-12C5\n12C8-12CE\n12D0-12D6\n12D8-12EE\n12F0-130E\n1310\n1312-1315\n1318-131E\n1320-1346\n1348-135A\n1361-137C\n13A0-13F4\n1401-1676\n1681-169A\n16A0-16F0\n1700-170C\n170E-1711\n1720-1731\n1735-1736\n1740-1751\n1760-176C\n176E-1770\n1780-17B6\n17BE-17C5\n17C7-17C8\n17D4-17DA\n17DC\n17E0-17E9\n1810-1819\n1820-1877\n1880-18A8\n1E00-1E9B\n1EA0-1EF9\n1F00-1F15\n1F18-1F1D\n1F20-1F45\n1F48-1F4D\n1F50-1F57\n1F59\n1F5B\n1F5D\n1F5F-1F7D\n1F80-1FB4\n1FB6-1FBC\n1FBE\n1FC2-1FC4\n1FC6-1FCC\n1FD0-1FD3\n1FD6-1FDB\n1FE0-1FEC\n1FF2-1FF4\n1FF6-1FFC\n200E\n2071\n207F\n2102\n2107\n210A-2113\n2115\n2119-211D\n2124\n2126\n2128\n212A-212D\n212F-2131\n2133-2139\n213D-213F\n2145-2149\n2160-2183\n2336-237A\n2395\n249C-24E9\n3005-3007\n3021-3029\n3031-3035\n3038-303C\n3041-3096\n309D-309F\n30A1-30FA\n30FC-30FF\n3105-312C\n3131-318E\n3190-31B7\n31F0-321C\n3220-3243\n3260-327B\n327F-32B0\n32C0-32CB\n32D0-32FE\n3300-3376\n337B-33DD\n33E0-33FE\n3400-4DB5\n4E00-9FA5\nA000-A48C\nAC00-D7A3\nD800-FA2D\nFA30-FA6A\nFB00-FB06\nFB13-FB17\nFF21-FF3A\nFF41-FF5A\nFF66-FFBE\nFFC2-FFC7\nFFCA-FFCF\nFFD2-FFD7\nFFDA-FFDC\n10300-1031E\n10320-10323\n10330-1034A\n10400-10425\n10428-1044D\n1D000-1D0F5\n1D100-1D126\n1D12A-1D166\n1D16A-1D172\n1D183-1D184\n1D18C-1D1A9\n1D1AE-1D1DD\n1D400-1D454\n1D456-1D49C\n1D49E-1D49F\n1D4A2\n1D4A5-1D4A6\n1D4A9-1D4AC\n1D4AE-1D4B9\n1D4BB\n1D4BD-1D4C0\n1D4C2-1D4C3\n1D4C5-1D505\n1D507-1D50A\n1D50D-1D514\n1D516-1D51C\n1D51E-1D539\n1D53B-1D53E\n1D540-1D544\n1D546"),wt=bt("200F"),yt=bt("05BE\n05C0\n05C3\n05D0-05EA\n05F0-05F4\n061B\n061F\n0621-063A\n0640-064A\n066D-066F\n0671-06D5\n06DD\n06E5-06E6\n06FA-06FE\n0700-070D\n0710\n0712-072C\n0780-07A5\n07B1\n200F\nFB1D\nFB1F-FB28\nFB2A-FB36\nFB38-FB3C\nFB3E\nFB40-FB41\nFB43-FB44\nFB46-FBB1\nFBD3-FD3D\nFD50-FD8F\nFD92-FDC7\nFDF0-FDFC\nFE70-FE74\nFE76-FEFC");function bt(t){const i=[],e=t.split("\n");for(const n of e){const t=n.trim();if(""===t)continue;const e=t.split("-");1===e.length?i.push([parseInt(e[0],16)]):i.push([parseInt(e[0],16),parseInt(e[1],16)])}return i}var _t=s(803);const xt='Helvetica, Arial, Tahoma, "Microsoft Yahei", 微软雅黑, STXihei, 华文细黑, sans-serif';class Ft extends R.b{constructor(t,i,e,n=[]){var s;super(),this.ji=t,this.Ti=i,this.Li=e,this.fontFamilies=n,this.Ni=[],this.Pi=new Map,this.Yi=new Map,this.Hi=!1,this.Ui=[],this.Xi=0,this.Wi=0,this.Qi=new Map,this.Zi=0,this.Ji=[],this.qi=[],this.Gi=1,this.Ki=1,this.te=0,this.ie=0,this.studioApp=(0,m.xV)(12,{optional:!0,scope:"root"}),this.C=(0,m.xV)(2),this.ee=null===(s=this.studioApp)||void 0===s?void 0:s.editorState,this.ne=(t,i,e,n=!0,s,r=!1,o)=>{var h,a,c,l;const u=this;this.se||(this.se=u.re(),i.push(this.se),this.ie=0),(0,H.NY)(t)&&(t.content=t.content.replace(/%20/gi," "));const d=this.oe(t,n,o),f=(null===(h=t.style)||void 0===h?void 0:h.fontSize)||this.he,v=(null===(a=t.style)||void 0===a?void 0:a.lineHeight)||this.style.lineHeight;if(t.top=(v-1)*f/2,t.width=d.width,t.height=d.height-(v-1)*f,t.lineHeight=d.height,"end"===t.type)return void function(t){if(u.se.spans.push(t),u.ae(),u.se.isLastLine=!0,u.ce(i,e,s),u.Hi)return;u.le=void 0}(t);if("newline"===t.type)return void function(t){if(u.ue="newline",!u.style.maxRows||u.Zi<u.style.maxRows){if(u.se.spans.push(t),u.ae(),u.se.endsWithNewline=!0,u.ce(i,e,s),u.Hi)return;(!u.style.maxRows||u.Zi<u.style.maxRows)&&(u.se=u.re(),u.Wi=0,i.push(u.se),u.Zi++),u.le=void 0}else u.se.spans.push({type:"space",attributes:{},dir:"infer",top:0,left:0,width:t.width,height:0,lineHeight:0,content:" ",style:(0,w.mg)(t.style),styleIds:{},__previousStyleIds:[],__previousStyleIdToHistoryIndexMap:new Map}),u.ae()}(t);const p=t.style.fontSize?this.he*t.style.fontSize:this.he*this.Ki,m=(null!==(c=t.style.characterSpacing)&&void 0!==c?c:this.style.characterSpacing)*p,g=this.Wi+t.width+(t.attributes.shouldRenderNumber?4:0)-m,y=(null!==(l=this.style.width)&&void 0!==l?l:0)-this.style.padding.left-this.style.padding.right-this.de;if(!r&&("word"===t.type||"variable"===t.type)&&g>y&&("tp"===this.C.appView||"truncate"===this.style.textOverflow))return void function(t){var n;const{preContentSpan:r,postContentSpan:h}=function(t){if(!u.se)throw new Error("Current content line is not set.");const i=t.content.length,e=(0,H.Ej)(t);for(let n=1;n<=i;n++){e.content=t.content.substring(0,n);const s=u.oe(e,!0),r=n===i&&t.attributes.shouldRenderNumber?4:0,o=u.style.width-u.style.padding.left-u.style.padding.right-u.de;if(u.Wi+s.width+r-m>o)return u.fe(t,n-1)}throw new Error("Could not split span.")}(t),a=[h].concat(s);if(r.content){if(u.ne(r,i,e,!0,a,!1,o),u.Hi)return}else if(0===u.Wi)return u.Hi=!0,e.shouldAbort=!0,u.ve(i);if(u.ae(),u.ce(i,e,a),u.Hi)return;const c=!u.style.maxRows||u.Zi<u.style.maxRows;(null===(n=u.pe)||void 0===n?void 0:n.inEditMode)||c?(u.se=u.re(),u.Zi++,u.Wi=0,u.ie=0,i.push(u.se),u.ne(h,i,e,!0,s,!1,o)):u.me(i,[h].concat(s),e)}(t);"space"===this.ue&&("word"===t.type||"variable"===t.type)&&(this.le=this.se.spans.length);const b=this.ie+t.width-m>=y;function _(){var i;u.ie+=t.width,(null===(i=t.attributes)||void 0===i?void 0:i.shouldRenderNumber)&&(u.ie+=4),u.ue=t.type}!r&&void 0!==this.le&&"space"!==t.type&&"composition"!==t.type&&b&&0!==this.se.spans.length?function(t){var r,h,a,c;const l=!u.style.maxRows||u.Zi<u.style.maxRows;if((null===(r=u.pe)||void 0===r?void 0:r.inEditMode)&&"truncate"===u.style.textOverflow||l){const r=u.se.spans.splice(u.le,1/0);u.ae();const a=r.concat([t]);if(u.ce(i,e,a.concat(s)),u.Hi)return;if(u.se=u.re(),i.push(u.se),u.Zi++,(null===(h=u.pe)||void 0===h?void 0:h.inEditMode)||"truncate"!==u.style.textOverflow){u.Wi+=t.width+(t.attributes.shouldRenderNumber?4:0),u.Wi>u.te&&(u.te=u.Wi),u.se.spans.push(...a);let i=0;for(const t of a)i+=t.width;u.ie=i}else{u.Wi=0;for(let t=0;t<a.length;t++){if(u.Hi)return;u.ne(a[t],i,e,n,a.slice(t+1).concat(s),void 0,o)}}}else u.se.spans.push(t),u.ae(),(null===(a=u.pe)||void 0===a?void 0:a.inEditMode)||"truncate"!==u.style.textOverflow||u.me(i,s,e),_();(null===(c=t.attributes)||void 0===c?void 0:c.shouldRenderNumber)&&(u.ie+=4);u.ue=t.type,u.le=void 0}(t):function(t){u.se.lineWidth+=t.width,u.se.spans.push(t),"word"===t.type||"variable"===t.type?(u.Wi+=t.width+(t.attributes.shouldRenderNumber?4:0),u.Wi>u.te&&(u.te=u.Wi)):u.Wi=0;_()}(t)},this.ge=t=>{if(this.we()||!this.ye)return;const i=t.currentTarget.id,e=this.be(i);if(e&&this._e(e)){const n=this.ye.getFeedValue(e.feed,i,e.element);this.xe(t,n.targetUrl)}},this.pe=(0,m.xV)(11,{optional:!0,args:[this],asNew:!0}),this.Ki=e.fontBoostingScale||1,this.Ui=(0,H.xW)(this.ji.spans),this.style=this.Fe=Object.assign({},this.ji.style),this.Ee(),this.Ce(),this.Se=e.renderUnderscoreLayer,this.Ae=e.element,this.$e=e.viewElement,this.ye=e.feedStore,this.Oe=!!e.skipFontLoad}get De(){var t;return null===(t=this.pe)||void 0===t?void 0:t.selection.selection}set De(t){this.pe&&(this.pe.selection.selection=t)}get Me(){var t;return(null===(t=this.ee)||void 0===t?void 0:t.zoom)||1}get selectedCharacters(){if(!this.De)return"";let t="";for(const i of this.Ui)"variable"===i.type&&i.style.variable?t+=this.ke(i):"word"===i.type&&(void 0!==i.line&&void 0!==i.column||(t+=i.content));return t}get de(){return 0}ke(t){var i,e;const n=null===(i=this.ye)||void 0===i?void 0:i.getFeed(t.style.variable.id),s=null===(e=null==n?void 0:n.data)||void 0===e?void 0:e.map((i=>{var e,n;return null!==(n=null===(e=i[t.style.variable.path||""])||void 0===e?void 0:e.value)&&void 0!==n?n:""})).join("");return null!=s?s:""}n(){this.Be(),this.Ie=new Promise((async t=>{await this.je(),this.Te(!1),t()}))}Ce(){this.Ti.style.backgroundColor="transparent",this.ze(this.Ti),this.Re=document.createElement("div"),this.Re.classList.add("center");const t=this.Re.style;et.m0?(t.width=`calc(100% * ${this.Ki})`,t.height=`calc(100% * ${this.Ki})`,t.transform=`scale(${1/this.Ki})`,t.transformOrigin="top left"):(t.width="100%",t.height="100%"),t.display="flex",t.alignItems=(0,H.F3)(this.style.verticalAlignment),t.justifyContent=(0,H.x0)(this.style.horizontalAlignment),t.zIndex="1",this.ze(this.Re),this.Le=document.createElement("div"),this.Le.classList.add("text-content"),this.Le.style.outline="none",this.Le.style.position="relative",this.Le.style.width="100%",this.ze(this.Le),this.Le.spellcheck=!1,this.Re.appendChild(this.Le),this.Ti.appendChild(this.Re)}Ne(t){const i=(0,H.rf)({spans:t})||"";if(!i)return this.Ti.setAttribute("aria-hidden","true"),void this.Ti.removeAttribute("aria-label");this.Ti.removeAttribute("aria-hidden"),this.Ti.setAttribute("aria-label",i)}ze(t){t.style.setProperty("-webkit-text-size-adjust","100%"),t.style.setProperty("text-size-adjust","100%")}resetDirtyContent(t){t.__dirtyContent=void 0}setText(t,i,e,n){this.ji=t,this.Ui=t.spans,e?this.Qi=new Map:this.Pe(),n||(this.style=t.style),this.Ee(),this.Te(!e),this.emit("change",this.Ye())}He(){var t;(null===(t=this.pe)||void 0===t?void 0:t.inEditMode)&&this.pe.stopEdit(!0),this.Ji=[];for(const i of this.Ji)i.element.removeEventListener("mousedown",i.callback);this.Ue(),this.pe&&(window.removeEventListener("mouseup",this.pe.mouseBindings.onMouseUp),window.removeEventListener("mousemove",this.pe.mouseBindings.onMouseMove),(0,m.$H)(this.pe)),this.emit("destroyed"),this.clearEvents()}Ee(){const t=getComputedStyle(this.Ti);this.Xe(t),this.We(t),this.Ve(t),this.Qe(t),this.Ze(),this.Je()}Xe(t){this.style.fontSize||(this.style.fontSize=parseInt(t.fontSize,10))}We(t){this.style.textColor||(this.style.textColor=(0,J.H0)(t.color))}Ve(t){this.style.lineHeight||(this.style.lineHeight=parseFloat(t.lineHeight))}Qe(t){this.style.padding||(this.style.padding={top:parseInt(t.paddingTop,10)||0,left:parseInt(t.paddingLeft,10)||0,bottom:parseInt(t.paddingBottom,10)||0,right:parseInt(t.paddingRight,10)||0})}Ze(){if(!this.style.width||!this.style.height){const t=this.Ti.getBoundingClientRect();this.style.width=t.width,this.style.height=t.height}}Je(){var t;if(!this.style.horizontalAlignment){const i=null===(t=this.Ui[0])||void 0===t?void 0:t.content.charCodeAt(0),e=Ft.qe(i);this.style.horizontalAlignment="rtl"===e?"right":"left"}}Ge(){(0,g.d4)()&&(0,M.rW)(window.self.location.origin)?this.Gi=this.Ke.getBoundingClientRect().height/10||1:this.Gi=this.Ke.getBoundingClientRect().height/10}async rerender(t=!1,i){this.Ge(),await this.Ie,t&&await this.je(),i&&(this.style.width=i.width,this.style.height=i.height),this.tn(),this.in(),this.Te(!1),this.en()}tn(){this.nn&&this.sn.forEach((t=>{t.removeEventListener("click",this.ge),Array.from(t.children).forEach((t=>{t.removeEventListener("click",this.ge)}))}))}in(){var t;this.De&&(null===(t=this.pe)||void 0===t?void 0:t.inEditMode)&&this.pe.selection.storeSelectionCharacterPositions()}en(){var t;this.De&&(null===(t=this.pe)||void 0===t?void 0:t.inEditMode)&&this.pe.selection.reselectText()}Te(t=!0){var i;t&&this.Pe();let e=this.Ui;(null===(i=this.pe)||void 0===i?void 0:i.inEditMode)||this.Se||(e=this.rn(e)),e=this.hn(e),this.cn(e),this.ln(e),"shrink"===this.style.textOverflow&&this.resizeText(e),this.dn(),this.vn(),this.pn(),this.Qi.size>0&&this.Ne(e)}vn(){var t;const i="left"===this.style.horizontalAlignment;for(const e of this.mn){let n=i?0:(null!==(t=this.style.width)&&void 0!==t?t:0)-this.style.padding.left-this.style.padding.right,s=[],r=[];for(const t of e.spans)if("rtl"===t.dir)if(i){t.left=n;let i=t.width;for(const t of s)t.left=n+i,i+=t.width;s.unshift(t)}else{if(r.length>0){const t=r.pop();n-=t.left+t.width}n-=t.width,t.left=n,r=[]}else if(i){if(s.length>0){const t=s.pop();n+=t.left+t.width}t.left=n,n+=t.width,s=[]}else{t.left=n;let i=t.width;for(const t of r)t.left=n-i,i-=t.width;r.unshift(t)}}}dn(){const t=this.gn();for(const i of this.mn){let e="ltr",n="ltr";for(let s=0;s<i.spans.length;s++){n=s+1<i.spans.length?i.spans[s+1].dir:void 0;const r=i.spans[s],o=0===s,h=s===i.spans.length-(i.isLastLine?2:1);"variable"===r.type&&"infer"===r.dir&&t&&(r.dir="rtl",o&&(i.dir="rtl")),"infer"===r.dir||"previous"===r.dir?o?(r.dir="ltr",i.dir="ltr"):r.dir=h?i.dir:this.wn({isSpaceSpan:"space"===r.type,prevDir:e,nextDir:n,textLineDir:i.dir}):e=r.dir}}}wn({isSpaceSpan:t,prevDir:i,nextDir:e,textLineDir:n}){return t?this.yn(i,e,n)||this.bn(i,e,n)?"rtl":"ltr":i}yn(t,i,e){return"rtl"===t&&("rtl"===i||"ltr"===i&&"rtl"===e)}bn(t,i,e){return"ltr"===t&&"rtl"===i&&"rtl"===e}_n(t){return(0,H.ed)(t)?t.content.length+(t.startJoint?1:0)+(t.endJoint?1:0):0}cn(t){for(let i=0;i<t.length-1;i++){const e=t[i],n=t[i+1];"word"===e.type&&"word"===n.type&&"rtl"===e.dir&&"rtl"===n.dir?(e.endJoint="‍",n.startJoint="‍"):e.endJoint="‌"}}hn(t){const i=[];for(const e of t)if((0,H.ed)(e)){if(0===e.content.length){i.push(e);continue}let t="variable"===e.type?e:(0,H.Ej)(e);const n=e.content.charCodeAt(0);let s=Ft.qe(n);if("word"===e.type){t.content=String.fromCharCode(n),t.dir=s;for(let n=1;n<e.content.length;n++){const r=e.content.charCodeAt(n),o=Ft.qe(r);s!==o&&"previous"!==o?(i.push(t),t=(0,H.Ej)(e),t.content=String.fromCharCode(r),t.dir=s=o):t.content+=String.fromCharCode(r)}}else(0,H.NY)(e)?t.dir=s:t.dir="infer";i.push(t)}else e.dir="ltr",i.push(e);return i}xn(){const t=[];for(const i of this.mn)for(const e of i.spans){if("ellipsis"===e.type)throw new Error("Ellipsis cannot exist in this stage.");t.push(e)}return t}Fn(t,i){const e=0!==this.En&&0!==this.style.width?this.En/t:0,n=0!==this.Cn&&0!==this.style.height?this.Cn/i:0;n>e?(this.he=this.he/n,this.Sn(1/n)):(this.he=this.he/e,this.Sn(1/e))}Sn(t){for(const i of this.mn){i.lineHeight*=t,i.lineWidth*=t,i.trailingSpaceWidth*=t;for(const e of i.spans)e.width*=t,e.lineHeight*=t}}An(){let t=0;for(const i of this.mn)t+=i.lineWidth*i.lineHeight;return t}$n(){var t,i;const e=Math.max((null!==(t=this.style.height)&&void 0!==t?t:0)-this.style.padding.top-this.style.padding.bottom,0),n=Math.max((null!==(i=this.style.width)&&void 0!==i?i:0)-this.style.padding.left-this.style.padding.right,0);return{elementHeight:e,elementWidth:n,elementArea:n*e}}resizeText(t){const{elementHeight:i,elementWidth:e,elementArea:n}=this.$n();if(i<3||e<3)return void(this.he=0);let s=!0;const r="mv"===this.C.appView?.01:.1;let o=0,h=this.he;do{const a=this.En,c=this.Cn||0,l=a/e,u=c/i,d=this.An(),f=a<=e&&c<=i;if(f&&s)return void this.On();if(s){const i=40;this.he=i,this.On(),this.ln(t,this.he),this.Dn=1/this.he,this.he=1,this.Mn(t,!1),s=!1;continue}const v=(this.he+r)/this.he,p=d/n,m=a/c/(e/i),g=.9,w=r,y=1/Math.abs(1-p)*g+1/Math.abs(1-m)*w;if(f&&y>=o&&(o=y,h=this.he),l===u)return void this.On();this.Dn=v,this.he=this.he*v,this.Mn(t,!1)}while(this.he<this.style.fontSize);this.Dn=h/this.he,this.he=h,et.nr&&(this.he=Math.floor(this.he)),this.Mn(t,!1),this.Fn(e,i),this.On()}On(){this.Xi=0}kn(t,i,e){if((0,H.Bj)(t,{[t]:i},this.style))e!==this.style&&delete e[t];else{if("$mixed"===i)return void(e[t]=i);switch(t){case"textColor":e.textColor=i.copy();break;case"font":case"padding":e[t]=Object.assign({},i);break;case"textShadows":e.textShadows=i&&i.map((t=>Object.assign({},t)));break;case"strikethrough":case"underline":case"uppercase":"boolean"!=typeof i?delete e[t]:e[t]=i;break;default:e[t]=i}}}Ye(){return{style:this.style,spans:(0,H.xW)(this.Ui)}}fe(t,i){const e="variable"===t.type?"":t.content.slice(0,i),n="variable"===t.type?t.content:t.content.slice(i);return{preContentSpan:this.Bn(t,e),postContentSpan:this.Bn(t,n)}}Bn(t,i){return{type:t.type,dir:t.dir,content:i,style:(0,H.dK)(t.style),attributes:this.In(t),styleIds:(0,w.mg)(t.styleIds),styleId:t.styleId,__previousStyleIds:t.__previousStyleIds&&[...t.__previousStyleIds],__previousStyleIdToHistoryIndexMap:t.__previousStyleIdToHistoryIndexMap&&new Map(t.__previousStyleIdToHistoryIndexMap)}}In(t){return void 0!==t.attributes.styleIndex?{styleIndex:t.attributes.styleIndex,shouldRenderNumber:!1}:{shouldRenderNumber:!1}}jn(){let t;for(;t=this.qi.pop();)this.Ti.contains(t)&&this.Ti.removeChild(t)}async je(){this.mn=[],this.Tn(),this.zn()}Tn(){return!this.Oe&&!!this.style.font}zn(){this.Ti.style.fontSize=`${this.style.fontSize}px`}Rn(){var t,i;const e=new Set,n=null!==(i=null===(t=this.ee)||void 0===t?void 0:t.creativeDataNode.id)&&void 0!==i?i:this.Li.document.id;for(const s of this.ji.spans)if((0,H.ed)(s)){const t=s.styleIds[n],i=this.Li.element.characterStyles.get(t);(null==i?void 0:i.font)&&e.add(i.font.id)}return e}Be(){if(!this.Ln){this.Ke=document.createElement("div"),this.Ke.style.height="10px",this.Ke.style.top="-10000px",this.Ke.style.position="absolute",this.Le.ownerDocument.body.appendChild(this.Ke);const t=this.Le.ownerDocument.createElement("canvas");this.Ln=t.getContext("2d")}}Ue(){this.Ln=void 0,this.Ke.remove()}ve(t){this.se={spans:[{type:"end",content:"END",dir:"ltr",top:0,left:0,width:0,height:0,lineHeight:0,attributes:{},startJoint:0,endJoint:0}],dir:"infer",lineHeight:0,maxFontSize:1,lineWidth:0,characterWidth:0,trailingSpaceWidth:0,endsWithNewline:!1,isLastLine:!1},t.splice(0,1/0,this.se)}Nn(t){let i=0;const e=[];t:for(let n=0;n<this.se.spans.length;n++){const s=this.se.spans[n];if("end"===s.type)break;if("newline"===s.type){e.push({type:"ellipsis",content:"...",style:{},top:0,left:0,width:0,height:0,lineHeight:0,attributes:{},startJoint:0,endJoint:0});break}const r=this.oe({type:"word",content:"...",lineHeight:0,dir:"ltr",style:s.style,top:0,left:0,width:0,height:0,attributes:{},styleIds:{},__previousStyleIds:this.ee?[]:void 0,__previousStyleIdToHistoryIndexMap:this.ee?new Map:void 0},!0),o=this.he,h=this.style.characterSpacing*o,a=r.width-h,c=(0,H.Ej)(s);for(let n=0;n<=s.content.length;n++){c.content=s.content.substring(0,n);const r=this.oe(c,!0),o=r.width;if(r&&i+o+a>(this.style.width||0)-(this.style.padding.top+this.style.padding.bottom)){if(0===n)return void this.ve(t);const{preContentSpan:i}=this.fe(s,n-1);i.width=o,i.lineHeight=r.height,e.push(i,{type:"ellipsis",content:"...",top:0,style:s.style,left:0,width:0,height:0,lineHeight:0,attributes:{},startJoint:0,endJoint:0});break t}}e.push(s),i+=s.width}this.se.spans=e,this.ae()}re(){return{spans:[],dir:"infer",lineHeight:0,maxFontSize:1,lineWidth:0,trailingSpaceWidth:0,characterWidth:0,endsWithNewline:!1,isLastLine:!1}}me(t,i,e){this.se.spans.push(...i),this.ae(),this.Nn(t),this.Hi=!0,e.shouldAbort=!0}ae(){var t;if(!this.se)return;let i=0,e=0,n=0,s=0,r=0,o=0,h=!0,a="infer";for(const c of this.se.spans){if("infer"===a&&(0,H.ed)(c)&&c.dir&&(a=c.dir),"end"===c.type){i=this.Pn(i);continue}if("newline"===c.type){h&&c.lineHeight>i&&(i=c.lineHeight),n+=c.width,r+=c.width,s+=1;continue}c.lineHeight>i&&(i=c.lineHeight);const l=null!==(t=c.style.characterSpacing)&&void 0!==t?t:this.style.characterSpacing,u=c.style.fontSize?c.style.fontSize*this.he:this.he;"ellipsis"!==c.type?(c.left=o,"word"!==c.type&&"variable"!==c.type||(r=l*u),"space"===c.type&&(r+=c.width),n+=c.width,c.style.fontSize&&c.style.fontSize>e&&(e=c.style.fontSize),s+=c.content.length,o+=c.width,c.attributes.shouldRenderNumber&&(o+=4),h=!1):r=l*u}this.Yn({dir:a,lineWidth:n,trailingSpaceWidth:r,lineHeight:i,maxFontSize:e,characterWidth:s})}Pn(t){return 1===this.se.spans.length&&(t=this.Hn()),t}Hn(){var t,i;let e=this.style.lineHeight*this.he;return(null===(t=this.pe)||void 0===t?void 0:t.currentStyle.lineHeight)?e=this.pe.currentStyle.lineHeight*this.he:(null===(i=this.Un)||void 0===i?void 0:i.lineHeight)&&(e=this.Un.lineHeight),e}Yn({dir:t,lineWidth:i,trailingSpaceWidth:e,lineHeight:n,maxFontSize:s,characterWidth:r}){this.se.dir=t,this.se.lineWidth=i,this.se.trailingSpaceWidth=e,this.se.lineHeight=n,this.se.maxFontSize=s||1,this.se.characterWidth=r;const o=i-e;o>this.En&&(this.En=Math.round(100*o)/100),this.ie=0,this.Un=this.se}ce(t,i,e){var n;this.Cn+=this.se.lineHeight;const s=1===this.C.environment?0:2;if("truncate"===this.style.textOverflow&&!(null===(n=this.pe)||void 0===n?void 0:n.inEditMode)&&this.Cn>(this.style.height||0)-(this.style.padding.top+this.style.padding.bottom)+s){this.Hi=!0;const n=t.pop();if(this.se=t.pop(),!this.se)return this.se={dir:"infer",spans:[{type:"end",content:"END",dir:"ltr",top:0,left:0,width:0,height:0,lineHeight:0,attributes:{},startJoint:0,endJoint:0}],lineHeight:0,maxFontSize:0,trailingSpaceWidth:0,lineWidth:0,characterWidth:0,endsWithNewline:!1,isLastLine:!1},void t.splice(0,1/0,this.se);this.se.spans.push(...n.spans,...e),t.push(this.se),this.Nn(t),i.shouldAbort=!0}}oe(t,i,e){var n,s,r;if(this.Ln&&i){const i=(0,H.ed)(t)&&t.style.fontSize&&t.style.fontSize*(null!=e?e:this.style.fontSize)||e||this.style.fontSize,o=(0,H.NY)(t)&&(null===(n=this.pe)||void 0===n?void 0:n.inEditMode)?`"Open Sans", ${xt}`:this.Xn((0,H.ed)(t)&&t.style.font||this.style.font);this.Ln.font=`${i}px ${o}`;const h=!!((0,H.ed)(t)&&t.style.uppercase||this.style.uppercase),a=(null!==(s=t.startJoint)&&void 0!==s?s:"")+t.content.replace(/\u00A0/g," ")+(null!==(r=t.endJoint)&&void 0!==r?r:""),c=h?a.toLocaleUpperCase():a,l=this.Ln.measureText(c),u=t.content.length,d=i*((0,H.ed)(t)&&t.style.characterSpacing||this.style.characterSpacing)*u,f=l.width+d,v=i*((0,H.ed)(t)&&t.style.lineHeight||this.style.lineHeight);return{width:f/this.Gi,height:v/this.Gi}}return{width:t.width*this.Dn,height:t.lineHeight*this.Dn}}pn(){this.Wn(),this.jn()}Pe(){const t={spans:[],dir:"infer",lineHeight:0,maxFontSize:0,lineWidth:0,trailingSpaceWidth:0,characterWidth:0,endsWithNewline:!1,isLastLine:!1};for(const i of this.mn)this.Vn(i,t);1===this.C.environment&&this.Se&&this.Qn(t),this.mn=[t],this.Ui=this.xn()}Vn(t,i){let e;for(const n of t.spans)"ellipsis"!==n.type&&"composition"!==n.type?""!==n.content&&(e&&(0,_t.Nj)(e,n)?e.content+=n.content:(e=n,i.spans.push(n),(0,H.ed)(n)&&this.Zn(n))):(e=n,i.spans.push(n))}Zn(t){const i=tt.HD;for(const e of i)(0,H.Bj)(e,t.style,this.style)&&delete t.style[e]}Qn(t){let i;if(t.spans.every((t=>void 0===t.attributes.styleIndex||1===t.attributes.styleIndex)))t.spans.forEach((t=>t.attributes.shouldRenderNumber=!1));else{for(const e of t.spans){const t=e.attributes.styleIndex;if(i){const e=i.attributes.styleIndex;e===t?i.attributes.shouldRenderNumber=!1:void 0!==e&&(i.attributes.shouldRenderNumber=!0)}i=e}i=void 0}}rn(t){var i;const e=[];for(let n=0;n<t.length;n++)if("variable"!==t[n].type)e.push(t[n]);else{const s=t[n];this.Jn(s);const r=this.Qi.get(s.style.variable.spanId);if((null===(i=this.pe)||void 0===i?void 0:i.inEditMode)||this.Se)s.content=mt.q+decodeURIComponent(r.style.variable.path),e.push(s);else{const t=this.qn(s);e.push(...t)}}return e}Jn(t){t.style.variable.spanId&&this.Qi.get(t.style.variable.spanId)||(t.style.variable.spanId=t.style.variable.spanId||`${Date.now()}`,this.Qi.set(t.style.variable.spanId,{style:t.style,span:t}))}qn(t){var i;const e=null===(i=this.ye)||void 0===i?void 0:i.getFeedValue(t.style.variable,t.style.variable.spanId,this.Li.element).value;return(0,H.bC)(e,{},t.style,H.dK)}Gn(){var t,i;const e=this.Li.isEditable&&null!==(i=null===(t=this.pe.styleResolver.getResolvedText())||void 0===t?void 0:t.style)&&void 0!==i?i:{};return Object.assign((0,E.Up)(this.style,"font","characterSpacing","lineHeight","textColor","textOverflow","textShadows","padding","maxRows","horizontalAlignment","verticalAlignment"),{fontSize:this.he},e)}setFontFactor({style:t,element:i}){var e;if(void 0!==this.Kn)return;if(!et.m0)return void(this.Kn=1);const n=document.createElement("p");n.style.lineHeight="100px",n.style.position="absolute",n.style.opacity="0.001",n.style.textWrap="nowrap",n.style.fontFamily=this.Xn(t.font,i),n.innerText="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",document.body.appendChild(n),this.Kn=100/n.getBoundingClientRect().height,null===(e=n.parentNode)||void 0===e||e.removeChild(n)}ln(t,i){this.he=i||this.style.fontSize;const e=[];this.ts();const n={shouldAbort:!1};for(let s=0;s<t.length&&!n.shouldAbort;s++)this.ne(t[s],e,n,!0,t.slice(s+1),!1,i);this.mn=e}ts(){this.Cn=0,this.En=0,this.Wi=0,this.te=0,this.Zi=1,this.Hi=!1,this.se=void 0,this.Un=void 0}Mn(t,i){const e=[];this.ts();const n={shouldAbort:!1};for(let s=0;s<t.length&&!n.shouldAbort;s++)this.ne(t[s],e,n,i,t.slice(s+1),!1);this.mn=e}is(t){return t.maxFontSize<1&&(t.maxFontSize=1),-(t.lineHeight-t.maxFontSize*this.he)/2}Wn(){this.es(),this.ns(),this.nn=new WeakMap,this.sn=new Map,this.Qi=new Map,this.ss(),this.Re.style.alignItems=(0,H.F3)(this.style.verticalAlignment);const t=this.rs();this.Le.style.lineHeight=`${this.style.lineHeight}`;for(let i=0;i<this.mn.length;i++){const e=this.mn[i],n=this.mn.length-1===i,s=document.createDocumentFragment(),r=document.createElement("div"),o=r.dir=(0,H.ed)(e.spans[0])?e.spans[0].dir:"ltr";this.hs(r,e,i,t,o),this.nn.set(r,i),this.sn.set(i,r),s.appendChild(r);const h=`t-${i}`;let a=0,c=(0,H.ed)(e.spans[0])?e.spans[0].dir:"ltr",l=this.cs(c);r.appendChild(l),(0,H.rX)(e,((s,u)=>{var d,f,v;if(1!==e.spans.length&&"end"===s.type)return;const p=u===(n?e.spans.length-2:e.spans.length-1);(0,H.ed)(s)&&c!==s.dir&&(l=this.cs(s.dir),r.appendChild(l),c=s.dir);const m=s.__viewElement=document.createElement("span");this.Se&&s.attributes.shouldRenderNumber&&(m.style.marginRight="4px");let g=!1;"space"===s.type?(u===e.spans.length-1||u===e.spans.length-2&&"newline"===e.spans[e.spans.length-1].type)&&(g=!0):"newline"===s.type&&(g=!0),m.style.display="inline-block",m.style.whiteSpace="nowrap",m.setAttribute("data-type",this.ls(s.type)),m.setAttribute("data-test-id",`rich-text-span-${this.ls(s.type)}`);const w=this.Ti.id||(null===(d=this.pe)||void 0===d?void 0:d.keyboardBindings.inputId),y=this.$e?`${this.$e.id}-`:"";if(m.id=`${y}${w}-${h}-${u}`,m.setAttribute("data-cy",`${w}-${h}-${u}`),p&&this.us(l,e,t,o),(0,H.ed)(s)&&(m.dir=s.dir),"variable"===s.type&&this.ds(s,m),m.addEventListener("click",this.ge),"end"===s.type)(null===(f=this.pe)||void 0===f?void 0:f.currentStyle.lineHeight)&&(m.style.height=this.pe.currentStyle.lineHeight*this.he+"px"),m.innerHTML="&#8203;";else{this.fs(s,m);const t=this.vs(s,e,g),i=null!==(v=t.textColor)&&void 0!==v?v:this.style.textColor;this.ps(Object.assign({fontSize:1,characterSpacing:this.style.characterSpacing,textColor:i},t),m)}(0,H.ed)(s)&&(s.line=i,s.column=a,a+=s.content.length),l.appendChild(m)})),this.Le.appendChild(s)}}es(){const t=this.Gn();this.ps(t,this.Ti,!1)}ns(){this.Le.innerHTML="",this.Ti.style.fontSize=`${this.he}px`,this.Le.classList.add("invisible-selection")}ss(){var t;(null===(t=this.pe)||void 0===t?void 0:t.inEditMode)||"scroll"!==this.style.textOverflow?this.Ti.style.overflow="visible":this.Ti.style.overflow="auto"}rs(){let t=this.style.horizontalAlignment;return t=this.ms(t),t=this.gs(t),this.ws(t),t}ms(t){return"left"===t&&(0,H.ed)(this.mn[0].spans[0])&&"rtl"===this.mn[0].spans[0].dir?"right":t}gs(t){if(!this.Se)return t;return(0,H.ed)(this.mn[0].spans[0])&&"rtl"===this.mn[0].spans[0].dir?"right":"left"}ws(t){this.Re.style.justifyContent=(0,H.x0)(t),this.Le.style.textAlign=t}hs(t,i,e,n,s){switch(t.className="text-line",t.setAttribute("data-test-id","rich-text-text-line"),t.setAttribute("aria-hidden","true"),n){case"left":t.style.justifyContent="ltr"===s?"flex-start":"flex-end";break;case"center":t.style.justifyContent="center";break;case"right":t.style.justifyContent="ltr"===s?"flex-end":"flex-start"}t.style.width="100%",t.style.display="flex",t.style.alignItems="center",t.style.height="inherit",t.style.whiteSpace="nowrap",t.style.fontSize=i.maxFontSize*this.he*this.Kn*this.Ki+"px",t.style.letterSpacing=this.style.characterSpacing*this.Kn*this.Ki+"em",t.style.lineHeight=i.lineHeight*this.Kn*this.Ki+"px","top"===this.style.verticalAlignment&&0===e?t.style.marginTop=this.is(i)*this.Kn*this.Ki+"px":"bottom"===this.style.verticalAlignment&&i.isLastLine&&(t.style.marginBottom=this.is(i)*this.Kn*this.Ki+"px")}cs(t){const i=document.createElement("div");return i.dir=t,i.style.unicodeBidi="bidi-override",i}us(t,i,e,n){if(i.trailingSpaceWidth)switch(e){case"left":"rtl"===n&&(t.style.marginLeft=-i.trailingSpaceWidth*this.Ki+"px");break;case"right":case"center":"rtl"===n?t.style.marginLeft=-i.trailingSpaceWidth*this.Ki+"px":t.style.marginRight=-i.trailingSpaceWidth*this.Ki+"px"}}ds(t,i){var e,n;i.setAttribute("data-variable",t.style.variable.path),t.style.variable.spanId!==i.id?(this.Qi.delete(t.style.variable.spanId),t.style.variable.spanId=i.id,this.Qi.set(t.style.variable.spanId,{style:t.style,span:t})):this.Qi.get(i.id)||(t.style.variable.spanId=i.id,this.Qi.set(i.id,{style:t.style,span:t})),t.style.variable.spanId=i.id,this.Se||null===(e=this.ye)||void 0===e||e.addFeedElement(i.id,(0,w.mg)(t.style.variable),null===(n=this.Li.viewElement)||void 0===n?void 0:n.__data)}fs(t,i){"newline"===t.type?this.ys(t,i):"ellipsis"===t.type?this.bs(i):"space"===t.type?this._s(t,i):"composition"===t.type?this.xs(t,i):this.Fs(t,i)}ys(t,i){i.innerHTML=" ",i.style.whiteSpace="pre",i.style.width=`${t.width}px`}bs(t){t.innerHTML="..."}_s(t,i){i.style.whiteSpace="pre",i.innerHTML=`${t.content}&zwnj;`}xs(t,i){i.style.width=`${t.width}px`,i.innerHTML="&#8203;",this.pe.keyboardBindings.compositionSpanElement=i}Fs(t,i){var e,n;const s=t.content.normalize("NFC");i.innerHTML=(0,E.o4)((null!==(e=t.startJoint)&&void 0!==e?e:"")+s.replace(/\u00A0/g," ")+(null!==(n=t.endJoint)&&void 0!==n?n:""))}vs(t,i,e){const n=Object.assign({underline:this.style.underline,strikethrough:this.style.strikethrough,uppercase:this.style.uppercase},t.style);return"newline"===t.type&&(n.fontSize=i.maxFontSize),e&&(n.underline=!1,n.strikethrough=!1),n}ps(t,i,e=!0,n=!1){const s=i.style;let r=!1;const o=n?["textColor"]:[...(0,E.HN)(tt.HD,"__fontFamilyId"),"padding"],h={style:t,styleAttribute:s,element:i,useRelativeFontSize:e};this.setFontFactor(h);for(const a of o)switch(a){case"font":this.Es(h);break;case"textColor":this.Cs(h);break;case"fontSize":this.Ss(h);break;case"underline":case"strikethrough":if(r)break;this.As(h),r=!0;break;case"uppercase":this.$s(h);break;case"characterSpacing":this.Os(h);break;case"lineHeight":this.Ds(h);break;case"textShadows":this.Ms(h);break;case"variable":this.ks(h);break;case"padding":this.Bs(h);break;default:s[a]=t[a]}}Es({style:t,styleAttribute:i,element:e}){t.font?i.fontFamily=this.Xn(t.font,e):i.fontFamily=""}Cs({style:t,styleAttribute:i}){i.color=t.textColor?(0,J.I2)(t.textColor):""}Ss({style:t,styleAttribute:i,useRelativeFontSize:e}){let n="";void 0!==t.fontSize&&(n=e?this.he*t.fontSize*this.Kn*this.Ki+"px":this.he*this.Kn*this.Ki+"px"),i.fontSize=n}As({style:t,styleAttribute:i}){const e=[];t.underline&&e.push("underline"),t.strikethrough&&e.push("line-through"),i.textDecoration=e.length>0?e.join(" "):""}$s({style:t,styleAttribute:i}){i.textTransform=t.uppercase?"uppercase":""}Os({style:t,styleAttribute:i}){i.letterSpacing=void 0!==t.characterSpacing?`${t.characterSpacing}em`:""}Ds({style:t,styleAttribute:i,useRelativeFontSize:e}){let n="none";void 0!==t.lineHeight&&(n=e?t.lineHeight*this.Kn*this.Ki+"em":""+t.lineHeight*this.Kn*this.Ki),i.lineHeight=n}Ms({style:t,styleAttribute:i}){i.textShadow=t.textShadows?t.textShadows.map((t=>`${t.offsetX}px ${t.offsetY}px ${t.blur}px ${t.color}`)).join(","):""}ks({style:t,styleAttribute:i}){var e;t.variable&&((null===(e=this.pe)||void 0===e?void 0:e.inEditMode)||this.Se?(i.color="var(--variable-artifact-color)",i.backgroundColor=this.Se?"rgba(235, 235, 235, 0.7)":"",i.cursor="var(--variable-artifact-cursor)",i.fontFamily=`'Open Sans', ${xt}`):(i.color=i.color||"",i.cursor="",i.fontFamily=i.fontFamily||""))}Bs({style:t,styleAttribute:i}){t.padding?(i.paddingTop=`${t.padding.top}px`,i.paddingLeft=`${t.padding.left}px`,i.paddingRight=`${t.padding.right}px`,i.paddingBottom=`${t.padding.bottom}px`):(i.paddingTop="",i.paddingLeft="",i.paddingRight="",i.paddingBottom="")}Is(t){this.mn.forEach((i=>{i.spans.forEach((i=>{if((0,H.ed)(i)&&i.__viewElement){const e=Object.assign(Object.assign({},t),i.style);this.ps(e,i.__viewElement,!0,!0)}}))}))}ls(t){switch(t){case"newline":return"newline";case"space":return"space";case"word":return"text";case"ellipsis":return"ellipsis";case"end":return"end";case"variable":return"variable";case"composition":return"composition"}}js(t,i,e="-1"){var n,s;const r=this.Le.getBoundingClientRect();i.clear();for(let o=0;o<this.mn.length;o++){const h=this.sn.get(o),a=document.createDocumentFragment(),c=(0,H.os)(h,r,null!==(s=null===(n=this.$e)||void 0===n?void 0:n.rotationZ)&&void 0!==s?s:0),l=this.mn[o].lineHeight,u=this.Ts(t,e,c,l);this.zs(u),i.set(o,u),a.appendChild(u),this.Le.appendChild(a)}}Ts(t,i,e,n){const s=document.createElement("div");return s.className=t,s.style.top=e/this.Me+"px",s.style.height=`${n}px`,s.style.width="100%",s.style.position="absolute",s.style.zIndex=i,s.style.left="0px",s}zs(t){"center"===this.style.horizontalAlignment&&(t.style.display="center")}be(t){var i,e;let n=null===(i=this.ye)||void 0===i?void 0:i.elements.get(t);if(!n){const t=this.Rs();1===t.length&&(n=null===(e=this.ye)||void 0===e?void 0:e.elements.get(t[0].style.variable.spanId))}return n}_e(t){const i=t.element;return!(function(t){const i=null==t?void 0:t.actions;return!!i&&i.some((t=>!t.disabled&&t.preventClickThrough))}(i)||vt(i))}xe(t,i){t.preventDefault(),t.stopPropagation(),this.emit("spanClicked",{event:t,deepLinkUrl:i})}we(){var t;return!!(null===(t=this.pe)||void 0===t?void 0:t.inEditMode)}Rs(){return this.Ui.filter(H.NY).slice(0,2)}Ls(t,i){return!(3!==t.nodeType||!t.parentNode)&&(!!(t=t.parentNode).dataset&&this.Ns(t.dataset.type)===i)}Ns(t){switch(t){case"newline":return"newline";case"space":return"space";case"text":return"word";case"end":return"end";case"variable":return"variable";case"composition":return"composition"}throw new Error("Unknown span type.")}Ps(t){this.style=t?Object.assign(Object.assign({},this.Fe),t):this.Fe}Xn(t,i){let e=t&&`"f-${t.id}"`;if(!e&&i){const t=window.getComputedStyle(i).fontFamily;t&&(e=t)}return e&&-1===e.indexOf(",")&&(e+=`, ${xt}`),null!=e?e:""}static Ys(t,i){return i.some((i=>{const e=1===i.length&&i[0]===t,n=i.length>1&&t>=i[0]&&t<=i[1];return e||n}))}static qe(t){return 32===t?"infer":this.Ys(t,yt)?"rtl":this.Ys(t,gt)?"ltr":"previous"}gn(){var t,i;const e=null!==(i=null===(t=this.Ui[0])||void 0===t?void 0:t.content.charCodeAt(0))&&void 0!==i?i:"";return Ft.Ys(e,wt)}}var Et=s(999);const Ct=["x","y","originX","originY","rotationX","rotationY","rotationZ","opacity","scaleX","scaleY","fill","radius","shadows","filters","textColor","border"];var St=s(774),At=s(419);function $t(t){return"string"==typeof t&&t.indexOf("@")>=0}function Ot(t,i){if("@value"!==t){if($t(t)){const e=function(t,i){const e=function(t){const{settings:i,canvasSize:e,element:n}=t,s=t.propertyName&&n[t.propertyName],{x:r,y:o,width:h,height:a,rotationX:c,rotationY:l,rotationZ:u}=n;return{x:r,y:o,width:h,height:a,rotationX:c,rotationY:l,rotationZ:u,value:s,settings:i,creativeWidth:e.width,creativeHeight:e.height}}(i),n=kt(i.element,t),s=Dt.get(n);if(s&&(0,E.bD)(s,e))return Mt.get(n);Dt.set(n,e),Mt.delete(n)}(t,i);if("number"==typeof e)return e;const{settings:n,canvasSize:s,element:r}=i,o=i.propertyName&&r[i.propertyName],{x:h,y:a,width:c,height:l,rotationX:u,rotationY:d,rotationZ:f}=r,v=(0,At.Rv)({x:0,y:0,width:c,height:l,rotationZ:f}),p={x:h,y:a,rotationX:u,rotationY:d,rotationZ:f,width:v.width,height:v.height,creativeWidth:s.width,creativeHeight:s.height,edgePoint:t=>{const i=function(t,i,e,n){e=(e-90)*(Math.PI/180);const s=1e-5,r=(0,E.x0)(Math.cos(e),s),o=(0,E.x0)(Math.sin(e),s),h=o/r,a=0===r,c=0===o;if(r<1e-16&&!a){const e=t.x*h+(n.height-t.y);if(e>=-i.height&&e<=n.height+i.height)return{x:-i.width,y:n.height-e-i.height*(-.5*o)}}if(r>1e-16&&!a){const e=(n.width-t.x)*h+t.y;if(e>=-i.height&&e<=n.height+i.height)return{x:n.width,y:e+i.height*(.5*o)}}if(o<1e-16&&!c){const e=t.y*r/o+(n.width-t.x);if(e>=-i.width&&e<=n.width+i.width)return{x:n.width-e-i.width*(-.5*r),y:-i.height}}if(o>1e-16&&!c){const e=(n.height-t.y)*r/o+t.x;if(e>=-i.width&&e<=n.width+i.width)return{x:e+i.width*(.5*r),y:n.height}}return t}({x:h,y:a},v,t,s);return i.x-=h,i.y-=a,i},settings:{},transition:{}};if(p.value=o,n)for(const t in n)p.settings[t]=n[t].value,p.transition[t]=n[t].value;const m=function(t){return t.replace(/@/g,"")}(t),g=D.eval(m,p);if(isNaN(g))throw new Error(`Could not resolve formula: ${t}`);return Mt.set(kt(r,t),g),g}return"string"!=typeof t||isNaN(+t)?t:+t}}const Dt=new Map,Mt=new Map;function kt(t,i){return`${t.id}:${i}`}const Bt=["x","y","rotationX","rotationY","rotationZ"],It=["x","y","width","height","scaleX","scaleY","fitPositionX","fitPositionY","radius","border","fontSize","padding","shadows","textShadows"],jt={opacity:1},Tt={radius:0,opacity:0,scaleX:0,scaleY:0};Object.freeze({ratio:1});function zt(t,i,e){const n={};return t.forEach((t=>{var s;const r=t.state,o=void 0!==t.rate?t.rate:1;if(0===o)return;const h=Object.keys(r);for(const a of h)if(void 0!==r[a])switch(a){case"x":case"y":case"scaleX":case"scaleY":case"rotationX":case"rotationY":case"rotationZ":case"opacity":case"originX":case"originY":{const t=null!==(s=n[a])&&void 0!==s?s:ti(a)?0:i[a],h=r[a];n[a]=Pt(a,t,h,o,e);break}default:n[a]=Rt(a,n[a]||i[a],r[a],o)}else n[a]=r[a]})),n}function Rt(t,i,e,n){switch(t){case"x":case"y":case"scaleX":case"scaleY":case"rotationX":case"rotationY":case"rotationZ":case"opacity":case"originX":case"originY":return Pt(t,i,e,n);case"radius":return function(t,i,e){if(i&&t)return{type:i.type,topLeft:Pt("radius",t.topLeft,i.topLeft,e),topRight:Pt("radius",t.topRight,i.topRight,e),bottomLeft:Pt("radius",t.bottomLeft,i.bottomLeft,e),bottomRight:Pt("radius",t.bottomRight,i.bottomRight,e)}}(i,e,n);case"fill":case"textColor":return Nt(i,e,n);case"shadows":return function(t,i,e){const n=[],s=Math.max((null==t?void 0:t.length)||0,(null==i?void 0:i.length)||0);for(let r=0;r<s;r++){let s=t&&t[r],o=i&&i[r];const h=null==s?void 0:s.color,a=null==o?void 0:o.color;s||(s=Object.assign({},o)),o||(o=Object.assign({},s)),n[r]={blur:Math.max(0,(0,E.Cc)(s.blur,o.blur,e)),offsetX:(0,E.Cc)(s.offsetX,o.offsetX,e),offsetY:(0,E.Cc)(s.offsetY,o.offsetY,e),color:Nt(h,a,e)},Lt(s)&&Lt(o)&&void 0!==s.spread&&(n[r].spread=Math.max(0,(0,E.Cc)(s.spread,o.spread,e)))}return n}(i,e,n);case"filters":return function(t,i={},e={}){const n=new Set([...Object.keys(i),...Object.keys(e)]);return[...n].filter((t=>void 0!==i[t]||void 0!==e[t])).reduce(((n,s)=>{var r,o,h,a;const c=u[s];return Object.assign(Object.assign({},n),{[s]:{value:(0,E.Cc)(null!==(o=null===(r=i[s])||void 0===r?void 0:r.value)&&void 0!==o?o:(null==c?void 0:c.default)||0,null!==(a=null===(h=e[s])||void 0===h?void 0:h.value)&&void 0!==a?a:(null==c?void 0:c.default)||0,t)}})}),{})}(n,i,e);case"border":return function(t,i,e){if((t||i)&&(t=t||Object.assign(Object.assign({},i),{thickness:0}),(i=i||Object.assign(Object.assign({},t),{thickness:0}))&&t))return{thickness:Math.max(0,(0,E.Cc)(t.thickness,i.thickness,e)),style:1===e?i.style:t.style,color:(0,J.io)(t.color,{color:i.color,amount:e})}}(i,e,n);default:if(1===n)return e}}function Lt(t){return"spread"in t}function Nt(t,i,e){i||((i=(0,J.H0)(t)).alpha=0),t||((t=(0,J.H0)(i)).alpha=0);const n={color:i,amount:e};return(0,J.io)(t,n)}function Pt(t,i,e,n,s=!1){if("number"!=typeof e){if("number"==typeof i)return i;throw new Error("Can only merge numeric values")}return ti(t)&&!s?("number"!=typeof i&&(i=0),Yt(t,i+e*n)):("number"!=typeof i&&(i=1),Yt(t,(0,E.Cc)(i,e,n)))}function Yt(t,i){const e=Tt[t],n=jt[t];return"number"==typeof e&&(i=Math.max(e,i)),"number"==typeof n&&(i=Math.min(n,i)),i}function Ht(t,i,e,n,s){switch(n){case"x":case"y":case"scaleX":case"scaleY":case"rotationX":case"rotationY":case"rotationZ":case"opacity":case"originX":case"originY":if("number"==typeof s&&!isNaN(s)||void 0===s)return s;if(("string"==typeof s||"number"==typeof s)&&$t(s))return Ot(s,{element:t,propertyName:n,settings:i.settings,canvasSize:e});if("string"==typeof s&&!isNaN(+s))return+s;throw new Error("Unexpected number value.")}return s}function Ut(t,i,e={},n=1){const s=t;switch(s){case"width":case"height":case"fontSize":return Xt(s)?Wt(i[s],n):i[s];case"x":case"y":case"scaleX":case"scaleY":case"originX":case"originY":case"opacity":case"rotationX":case"rotationY":case"rotationZ":{const t=e[s],r=function(t,i,e){return ti(t)?i+(e||0):"number"==typeof e?e:e||i}(s,i[s],t);return Xt(s)?Wt(r,n):r}case"fill":case"textColor":{const t=e[s]||i[s];if(!t)return;return new St.Q(t)}case"border":{const t=e[s]||i[s];if(!t)return;return function(t,i){return{thickness:t.thickness*i,color:t.color,style:t.style}}(t,n)}case"shadows":{const t=e[s]||i[s];if(!t)return;return t.map((t=>function(t,i){const e=Object.assign({},t);return e.offsetX*=i,e.offsetY*=i,e.spread*=i,e.blur*=i,e}(t,n)))}case"textShadows":{const t=i[s];if(!t)return;return t.map((t=>Vt(t,n)))}case"imageAsset":case"imageSettings":return Object.assign({},e[s]||i[s]);case"padding":if(!(e[s]||i[s]))return;return function(t,i){return{bottom:t.bottom*i,top:t.top*i,right:t.right*i,left:t.left*i}}(e[s]||i[s],n);case"radius":{const t=e[s]||i[s];return Object.assign(Object.assign({},t),{topLeft:t.topLeft*n,topRight:t.topRight*n,bottomLeft:t.bottomLeft*n,bottomRight:t.bottomRight*n})}case"filters":return function(t,i){var e,n;if(!t.blur)return t;return Object.assign(Object.assign({},t),{blur:{value:(null!==(n=null===(e=t.blur)||void 0===e?void 0:e.value)&&void 0!==n?n:0)*i}})}(e[s]||i[s],n);default:return e[s]||i[s]}}function Xt(t){return It.includes(t)}function Wt(t,i){return t*i}function Vt(t,i){const e=Object.assign({},t);return e.offsetX*=i,e.offsetY*=i,e.blur*=i,e}function Qt(t,i,e,n=0,s=[]){const r=Zt(i,s);for(const o of[t,i])o.animations.filter((t=>!t.hidden)).forEach((t=>{const i=Gt(o,t,e,n).filter((t=>!s.some((i=>t.state===i.state))));r.unshift(...i)}));return zt(r,t)}function Zt(t,i){if(i.length>1){const e=Math.max(...i.map((t=>t.rate)),0);if(0===e)return[];const n=zt(i.map((t=>({rate:t.rate/e,state:t.state}))),t,!0);return[{rate:e,state:n}]}return i.slice(0)}function Jt(t,i){var e;if((null===(e=t.states)||void 0===e?void 0:e.length)&&i)return t.states.find((t=>t.id===i))}function qt(t,i,e,n){const s={};for(const r in n)s[r]=Ht(t,i,e,r,n[r]);return s}function Gt(t,i,e,n=0){const s=[],{keyframes:r}=i;if(!(null==r?void 0:r.length)||!(0,z.pE)(n,t))return s;const o=(0,z.d6)(t,n),h=1e-6,a=(0,z.tD)(r,o,h),c=(0,z.lJ)(r,o,h),l=(null==a?void 0:a.stateId)&&Object.assign({},qt(t,i,e,Jt(t,a.stateId))),u=(null==c?void 0:c.stateId)&&Object.assign({},qt(t,i,e,Jt(t,c.stateId)));if(!a&&!c)throw new Error("Animation has no keyframes");if(a===c||!c||a&&(0,z.pE)(o,a))l&&s.push({state:l,rate:1});else if(a&&c){const e=function(t,i){let e=i.timingFunction;return"@timingFunction"===e&&(e=t.timingFunction),ut(e)}(i,c),n=function(t,i,e,n){const s=(0,z.MI)(i,e),r=i.time+(i.duration||0);return s?n((0,E.qE)((t-r)/s,0,1)):(0,z.pE)(t,i)?1:0}(o,a,c,e);if(l)if(u){Kt(l,u).forEach((i=>{const e=ti(i)?0:t[i];void 0===l[i]&&void 0!==e&&(l[i]=e),void 0===u[i]&&(u[i]=void 0!==e?e:Rt(i,l[i],e,1))}));const i=function(t){const i={};for(const e in t)ti(e)&&(i[e]=t[e]);return function(t){return 0===Kt(t).length}(i)?void 0:i}(l),e=function(t){const i={};for(const e in t)ti(e)||(i[e]=t[e]);return Object.keys(i).length?i:void 0}(l);e&&s.push({state:e,rate:1}),i&&s.push({state:i,rate:1-n})}else s.push({state:l,rate:1-n});u&&s.push({state:u,rate:n})}return s}function Kt(...t){const i=[];return t.forEach((t=>{for(const e in t){const n=e;void 0!==t[n]&&-1===i.indexOf(n)&&Ct.indexOf(n)>-1&&i.push(n)}})),i}function ti(t){return Bt.indexOf(t)>-1}var ii=s(197),ei=s(380);function ni(t,i,e){const{topLeft:n,topRight:s,bottomRight:r,bottomLeft:o}=e;return`M 0 ${n} A ${n} ${n} 0 0 1 ${n} 0 L ${t-s} 0 A ${s} ${s} 0 0 1 ${t} ${s}L ${t} ${i-r} A ${r} ${r} 0 0 1 ${t-r} ${i}L ${o} ${i} A ${o} ${o} 0 0 1 0 ${i-o} Z`}const si={fit:"xMidYMid meet",crop:"xMidYMid slice",stretch:"none"},ri="http://www.w3.org/2000/svg",oi="http://www.w3.org/1999/xlink",hi=/matrix3d\((.+)\)/;var ai,ci;!function(t){t.Shape="-shape",t.Group="-group",t.LinearGradient="-linear-gradient",t.Border="-border",t.Clip="-clip",t.Mask="-mask",t.Image="-image",t.Shadow="-shadow"}(ai||(ai={}));class li extends Error{constructor(t,i,e){super(t),this.url=i,this.error=e,Object.setPrototypeOf(this,li.prototype)}}class ui{get id(){return this.Hs}get foreignObject(){return this.Us}constructor(t,i,e,n){var s;this.Xs=t,this.Ws=i,this.O=e,this.C=n,this.Vs=[],this.Qs=[],this.Zs=[],this.Js=[],this.qs=ci.None,this.Gs=t=>{const i=t.imageSettings.sizeMode;return i?si[i]:t.ratio?"xMidYMid slice":t.ratio?"xMidYMid meet":"none"},this.Ks=this.Xs.document,this.tr=this.Ks.querySelector("head base")?this.Xs.location.href.replace(this.Xs.location.hash,""):"";const r=(0,d.Kq)(this.Ws)?this.Ws.elementCid:"creative";this.Hs=`${null!=r?r:"unset"}-${Math.floor(1e6*Math.random())}`,this.er=this.sr(),(0,d.um)(i)||(this.rr=i),this.or=this.Ws.__data,this.hr(),this.ar.setAttribute("d",ni(this.Ws.width,this.Ws.height,null!==(s=this.cr)&&void 0!==s?s:this.getDefaultRadius()))}Ot(t,i){let e;return this.lr=i?Object.assign(Object.assign({},t),i):t,this.Ws=t,this.er===X.F.Image&&(e=this.ur(this.lr.imageUrl)),this.dr(this.lr.fill),this.fr(this.lr.border),this.vr(this.lr),this.pr(this.lr.shadows),this.mr(),e}setResponsive(){this.gr>this.wr?(this.yr.style.height="auto",this.yr.style.width="100%"):(this.yr.style.height="100%",this.yr.style.width="auto"),this.setViewBox(0,0,this.gr,this.wr)}setViewBox(t,i,e,n){this.yr.setAttribute("viewBox",`${t} ${i} ${e} ${n}`)}sr(){var t;switch(null===(t=this.Ws)||void 0===t?void 0:t.kind){case X.F.Ellipse:case X.F.Image:return this.Ws.kind;default:return X.F.Rectangle}}hr(){var t;if(this.yr)throw new Error("Background already added");const i=this.Ks,e=i.createElementNS(ri,"g"),n=i.createElementNS(ri,"ellipse"===this.sr()?"ellipse":"path"),s=i.createElementNS(ri,"defs"),r=i.createElementNS(ri,"svg"),o=r.style;return r.setAttribute("xmlns",ri),o.position="absolute",o.left="0",o.top="0",o.width="100%",o.height="100%",o.overflow="visible",o.zIndex="0",this.br()&&(o.outline="1px solid transparent"),n.id=this.Hs+ai.Shape,n.setAttribute("fill","transparent"),e.id=this.Hs+ai.Group,e.appendChild(n),r.appendChild(s),r.appendChild(e),this.ar=n,this._r=s,this.xr=e,this.yr=r,(0,d.yG)(this.or)&&(this.Us=this.Fr()),null===(t=this.Ws.__rootElement)||void 0===t||t.prepend(r),r}Fr(){const t=document.createElementNS(ri,"foreignObject");t.setAttribute("fill","transparent");const i=document.createElement("div");return t.appendChild(i),this.xr.appendChild(t),t}Er(){this.Cr||(this.Cr=function(t){const i=document.createElementNS(ri,"g"),e=document.createElementNS(ri,"g");e.setAttribute("transform",`translate(${t.width/2-12}, ${t.height/2-12})`),e.setAttribute("stroke","#ffffff"),e.setAttribute("stroke-width","2"),e.setAttribute("fill","none");const n=document.createElementNS(ri,"circle");n.setAttribute("stroke-opacity","0.25"),n.setAttribute("cx","12"),n.setAttribute("cy","12"),n.setAttribute("r","12");const s=document.createElementNS(ri,"path");s.setAttribute("d","M24 12c0-9.94-8.06-12-12-12");const r=document.createElementNS(ri,"animateTransform");r.setAttribute("attributeName","transform"),r.setAttribute("type","rotate"),r.setAttribute("from","0 12 12"),r.setAttribute("to","360 12 12"),r.setAttribute("dur","1s"),r.setAttribute("repeatCount","indefinite"),s.appendChild(r),e.appendChild(n),e.appendChild(s);const o=document.createElementNS(ri,"rect");return o.setAttribute("width",`${t.width}`),o.setAttribute("height",`${t.height}`),o.setAttribute("fill","rgba(0,0,0,0.25)"),i.appendChild(o),i.appendChild(e),i}(this.lr)),this.Cr.parentNode||this.xr.appendChild(this.Cr)}Sr(){var t;(null===(t=this.Cr)||void 0===t?void 0:t.parentNode)&&this.xr.removeChild(this.Cr)}br(){var t;return!(4!==this.C.environment||!(null===(t=this.Ws)||void 0===t?void 0:t.rotationZ)||0===this.Ws.rotationZ)}vr(t){const{width:i,height:e,radius:n}=t;if(!(0,E.Bf)(i)||!(0,E.Bf)(e))throw new Error("width and height must be numbers");if(i!==this.gr||e!==this.wr){this.gr=i,this.wr=e;const t=this.Ar();this.yr.setAttribute("width",`${i+2*t}`),this.yr.setAttribute("height",`${e+2*t}`),this.er===X.F.Ellipse?(this.ar.setAttribute("cx",`${t+i/2}`),this.ar.setAttribute("cy",`${t+e/2}`),this.ar.setAttribute("rx",""+i/2),this.ar.setAttribute("ry",""+e/2)):this.Us&&(this.Us.setAttribute("height",`${e}`),this.Us.setAttribute("width",`${i}`)),this.$r(),this.Or(),this.Dr()}this.Mr(n),this.kr()}Or(){if(this.Br){if(!this.Ir||!(0,E.Et)(this.gr)||!(0,E.Et)(this.wr))throw new Error("No gradient position provided");const t=this.Ir.from.x*this.gr,i=this.Ir.from.y*this.wr,e=this.Ir.to.x*this.gr,n=this.Ir.to.y*this.wr;this.Br.setAttribute("x1",`${t}`),this.Br.setAttribute("y1",`${i}`),this.Br.setAttribute("x2",`${e}`),this.Br.setAttribute("y2",`${n}`)}}jr(t){var i;if(null===(i=null==t?void 0:t.stops)||void 0===i?void 0:i.length){const i=t.start.position,e=t.end.position;return{from:Object.assign({},i),to:Object.assign({},e)}}}Tr(){if(!this.Br){const t=this.Hs+ai.LinearGradient,i=document.createElementNS(ri,"linearGradient");i.id=t,i.setAttribute("gradientUnits","userSpaceOnUse");const e=document.createElementNS(ri,"stop");i.appendChild(e);const n=document.createElementNS(ri,"stop");i.appendChild(n),this.Zs.push(e,n),this.Br=i}return this.Br}calculateRadius(t){const i=Math.min(this.Ws.width,this.Ws.height),e=Math.ceil(i/2),n=t=>t>e?e:t;return{type:t.type,topLeft:n(t.topLeft),topRight:n(t.topRight),bottomRight:n(t.bottomRight),bottomLeft:n(t.bottomLeft)}}getDefaultRadius(){return{type:o.Joint,topLeft:0,topRight:0,bottomRight:0,bottomLeft:0}}Mr(t){var i;if(this.er===X.F.Ellipse)return;const e=this.calculateRadius(t||this.getDefaultRadius()),n=ni(this.Ws.width,this.Ws.height,e);n!==this.zr&&(this.cr=e,this.zr=n,this.ar.setAttribute("d",n),null===(i=this.Rr)||void 0===i||i.setAttribute("d",n))}dr(t){const i=this.Hs+ai.LinearGradient,e=null==t?void 0:t.toString();if(e!==this.Lr)if(this.Lr=e,t){const n=t.stops||[];if("linear-gradient"===t.type&&n.length){const e=this.Tr();this.Ir=this.jr(t),this.gr&&this.wr&&this.Or(),n.forEach(((i,e)=>{const n=i.color,s=this.Zs[e];s.setAttribute("offset",`${i.offset}%`),s.setAttribute("stop-color",(0,J.Jy)(n)),s.setAttribute("stop-opacity",(n.alpha/100*(t.alpha/100)).toString())})),e.parentNode||this._r.appendChild(e),et.nr?this.ar.setAttribute("fill",`url('${this.tr}#${i}')`):this.ar.setAttribute("fill",`url(#${i})`)}else this.ar.setAttribute("fill",e)}else this.ar.setAttribute("fill","transparent")}$r(){this.Rr&&(this.Rr.setAttribute("width",`${this.gr}`),this.Rr.setAttribute("height",`${this.wr}`))}Nr(){if(this.Rr)return this.Rr;const t=this.Hs+ai.Border,i=this.Hs+ai.Clip,e=this.Ks.createElementNS(ri,"path");e.setAttribute("x","0"),e.setAttribute("y","0"),e.setAttribute("fill","transparent"),e.id=t,this.Pr=this.Ks.createElementNS(ri,"clipPath"),this.Pr.id=i;const n=this.Ks.createElementNS(ri,"use");n.setAttributeNS(oi,"xlink:href",`${this.tr}#${t}`),n.style.pointerEvents="none",this.Pr.appendChild(n),this.Yr=this.Ks.createElementNS(ri,"use"),this.Yr.style.pointerEvents="none",this.Yr.setAttributeNS(oi,"xlink:href",`${this.tr}#${t}`);const s=`url(${this.tr}#${i})`;if(this.Hr&&this.Hr.setAttribute("clip-path",s),this.Us){this.Us.setAttribute("clip-path",s);const t=this.Us.firstElementChild;t.style.clipPath=s,et.nr&&(t.style.height="inherit")}return this._r.appendChild(e),this._r.appendChild(this.Pr),this.xr.appendChild(this.Yr),this.Rr=e,this.Rr}mr(){var t,i;const e=this.or;if(!e||!(0,d.JL)(e))return;const{isMask:n,elementId:s}=null!==(t=e.masking)&&void 0!==t?t:{};if(this.Ur(n),this.Xr(this.Hr),this.Wr()){const t=s?this.O.getViewElementById(s):void 0;if(s){const e=null!==(i=null==t?void 0:t.__data)&&void 0!==i?i:this.O.creativeDocument.Pt(s);e&&(0,Et.dK)(e)&&this.Vr(!0)}if(n||s){const t=this.Qr();this.Zr(t),ui.qr.Jr(e,!0),this.Gr=t}if(!t)return;this.Kr(t)}}Kr(t){var i;const e=this.Hs+ai.Mask;if(this.eo||(this.eo=this.Ks.createElementNS(ri,"mask"),this.eo.id=e,this.eo.setAttribute("mask-type","alpha"),this._r.appendChild(this.eo)),!this.no){const n=null===(i=t.__svgBackground)||void 0===i?void 0:i.id,s=(0,d.A8)(t)?n+ai.Image:n+ai.Shape,r=this.Ks.createElementNS(ri,"use");if(r.setAttributeNS(oi,"xlink:href",`${this.tr}#${s}`),r.style.pointerEvents="none",this.no=r,this.eo.appendChild(r),this.no.style.transformOrigin="center center",this.no.style.transformBox="border-box",et.nr&&(0,d.yG)(this.rr)&&this.Us){const t=this.Us.firstElementChild;t.style.maskImage=`url(#${e})`,t.style.maskMode="alpha",t.style.maskRepeat="no-repeat"}this.xr.setAttribute("mask",`url(#${e})`),this.xr.style.maskMode="alpha",this.xr.style.maskRepeat="no-repeat"}if(this.no){const i=t.x-this.rr.x,e=t.y-this.rr.y;this.no.style.transform=`translate(${i}px, ${e}px)`}}Ur(t=!1){const i=this._r.contains(this.xr);t&&!i?this._r.insertBefore(this.xr,null):!t&&i&&this.yr.insertBefore(this.xr,null)}Xr(t){const i=this.or,e=i&&(0,d.Ub)(i);if(this.so||!t||!e)return;const n=document.createElementNS(ri,"g");t.replaceWith(n),n.appendChild(t),this.so=n}Zr(t){var i;const{rotationX:e,rotationY:n,rotationZ:s,opacity:r,scaleX:o,scaleY:h,mirrorX:a,mirrorY:c}=t,l=new lt;l.gi(null!==(i=this.rr.perspective)&&void 0!==i?i:800),l.si(a?-o:o,c?-h:h);const u=0!==e||0!==n,f=this.or&&(0,d.Ub)(this.or),v=this.so;if(v&&f)if(u){const t=(0,E.xW)(e),i=(0,E.xW)(n),r=(0,E.xW)(s);v.style.transformOrigin="center center",v.style.transform=`rotateX(${t}deg) rotateY(${i}deg) rotateZ(${r}deg)`,v.removeAttribute("transform")}else{const t=(0,E.xW)(s),i=this.gr/2,e=this.wr/2;v.style.transform="",v.setAttribute("transform",`rotate(${t} ${i} ${e})`)}else l.qt(e),l.Kt(n),l.ti(s);const p=this.getMaskingNode();this.ro(p,l),p.style.opacity=`${r}`,p.style.transformOrigin="center center",p.style.transformBox="border-box"}ro(t,i){var e;if(!t.ownerSVGElement)throw new Error("SVGNode is not attached to an SVGElement");const n=t.ownerSVGElement.createSVGMatrix(),s=null===(e=i.Vt().match(hi))||void 0===e?void 0:e[1].split(",").map(parseFloat);s&&16===s.length&&(n.a=s[0],n.b=s[1],n.c=s[4],n.d=s[5],n.e=s[12],n.f=s[13]);const r=t.transform.baseVal;if(r.numberOfItems>0)r.getItem(0).setMatrix(n);else{const i=t.ownerSVGElement.createSVGTransform();i.setMatrix(n),r.initialize(i)}}getMaskingNode(){var t;return null!==(t=this.Hr)&&void 0!==t?t:this.ar}Qr(){var t,i,e;const{x:n,y:s,opacity:r,scaleX:o,scaleY:h,mirrorX:a,mirrorY:c}=this.rr,l=this.rr.__data.hidden;return{x:n,y:s,rotationX:null!==(t=this.rr.rotationX)&&void 0!==t?t:0,rotationY:null!==(i=this.rr.rotationY)&&void 0!==i?i:0,rotationZ:null!==(e=this.rr.rotationZ)&&void 0!==e?e:0,scaleX:o,scaleY:h,mirrorX:null!=a&&a,mirrorY:null!=c&&c,opacity:r,hidden:l}}Wr(){const t=this.or;if(!t||!(0,d.JL)(t))return!1;const i=ui.qr,e=i.oo(t);return e?!!(null==e?void 0:e.changedOnPreviousPass)||this.ho():(i.Jr(t,!1),!0)}ho(){const t=this.Qr();return!this.Gr||this.Gr.x!==t.x||this.Gr.y!==t.y||this.Gr.opacity!==t.opacity||this.Gr.rotationX!==t.rotationX||this.Gr.rotationY!==t.rotationY||this.Gr.rotationZ!==t.rotationZ||this.Gr.scaleX!==t.scaleX||this.Gr.scaleY!==t.scaleY||this.Gr.hidden!==t.hidden||this.Gr.mirrorX!==t.mirrorX||this.Gr.mirrorY!==t.mirrorY}Vr(t=!1){var i,e;if(!this.or||!(0,d.z)(this.or))return;this.Ur(),this.yr.removeAttribute("mask"),this.yr.style.maskMode="",this.xr.removeAttribute("mask"),this.xr.style.maskMode="";const n=this.getMaskingNode();n.style.transform="",n.style.transformOrigin="",n.style.transformBox="",n.style.opacity="",n.style.position="",n.removeAttribute("transform"),t||ui.qr.co(this.or),null===(i=this.no)||void 0===i||i.remove(),null===(e=this.eo)||void 0===e||e.remove(),this.no=void 0,this.eo=void 0,this.Gr=void 0,this.so&&(this.so.replaceWith(...this.so.childNodes),this.so=void 0)}fr(t){var i;let e;const{thickness:n,style:s,color:r}=t||{thickness:0,style:"solid"},o=r?r.toString():"transparent",h=(null===(i=this.lo)||void 0===i?void 0:i.thickness)!==n;this.lo&&!h&&this.lo.style===s&&this.lo.color===o||(this.lo={thickness:n,style:s,color:o},this.yr.style.boxShadow=n&&this.qs!==ci.BoxShadow?`0 0 ${n}px transparent`:"none",e=this.er===X.F.Image||(0,d.yG)(this.or)?this.Nr():this.ar,e.setAttribute("stroke",this.lo.color),e.setAttribute("stroke-width",`${this.lo.thickness}`),e.setAttribute("stroke-linejoin","square"),"solid"===this.lo.style?(e.setAttribute("stroke-linecap","butt"),e.setAttribute("stroke-dasharray","")):"dashed"===this.lo.style?(e.setAttribute("stroke-linecap","butt"),e.setAttribute("stroke-dasharray",""+3*n)):"dotted"===this.lo.style&&(e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-dasharray","1, "+2*n)),h&&this.uo(this.Js))}uo(t){const i=this.qs,e=this.yr.style,n=e.willChange.split(",").filter((t=>!!t)).map((t=>t.trim()));if((null==t?void 0:t.length)&&i!==ci.None){if(i===ci.DropShadow){-1===n.indexOf("filter")&&(e.willChange=[...n,"filter"].join(", "));const i=t.map((t=>`drop-shadow(${t.offsetX}px ${t.offsetY}px ${t.blur}px ${t.color})`));e.filter=i.join(" ")}}else n.indexOf("filter")>-1&&(e.willChange=n.filter((t=>"filter"!==t)).join(", "),e.filter="")}pr(t=[]){var i,e,n;if(t.length){const s=t.map((t=>Object.assign(Object.assign({},t),{color:t.color.toString()}))),r=this.do();let o=this.Js.length!==s.length||r!==this.qs;if(o||(o=s.some(((t,i)=>{var e;const n=null===(e=this.Js)||void 0===e?void 0:e[i];return!n||t.blur!==n.blur||t.spread!==n.spread||t.offsetX!==n.offsetX||t.offsetY!==n.offsetY||t.color!==n.color}))),s.length!==(null===(i=this.Js)||void 0===i?void 0:i.length)&&(this.fo=void 0),this.Js=s,!o)return;this.qs=r,this.vo();const h=this.Hs+ai.Group,{width:a,height:c}=this.Ws,l=this.qs===ci.SvgShadow?t.length:0;for(;this.Vs.length>l;){const t=this.Vs.pop(),i=this.Qs.pop();null===(e=t.parentNode)||void 0===e||e.removeChild(t),null===(n=i.parentNode)||void 0===n||n.removeChild(i)}if(this.qs!==ci.SvgShadow)return this.uo(this.Js),void this.Dr();this.uo(),t.forEach(((t,i)=>{const e=t.color,n=this.Hs+ai.Shadow+i;let s=this.Vs[i],r=this.Qs[i];if(!s){s=document.createElementNS(ri,"filter"),s.id=n,s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("width","300%"),s.setAttribute("height","300%"),di(s,-100,-100,"%");const t=document.createElementNS(ri,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("in","SourceGraphic"),t.setAttribute("result",`${n}_color`),s.appendChild(t);const i=document.createElementNS(ri,"feGaussianBlur");i.setAttribute("type","matrix"),i.setAttribute("result",`${n}_blur`),i.setAttribute("in",`${n}_color`),s.appendChild(i),this.Vs.push(s),this._r.appendChild(s)}r||(r=document.createElementNS(ri,"use"),r.setAttributeNS(oi,"xlink:href",`${this.tr}#${h}`),r.setAttribute("filter",`url(${this.tr}#${n})`),r.setAttribute("width","100%"),r.setAttribute("height","100%"),di(r,0,0),r.style.transformOrigin="50% 50%",this.Qs.push(r),(0,g.WH)(this._r,r));const o=`0 0 0 0 ${e.red/255} 0 0 0 0 ${e.green/255} 0 0 0 0 ${e.blue/255} 0 0 0 ${e.alpha/100} 0`;s.getElementsByTagName("feColorMatrix")[0].setAttribute("values",o),s.getElementsByTagName("feGaussianBlur")[0].setAttribute("stdDeviation",`${t.blur}`),di(r,t.offsetX,t.offsetY),r.style.transform=`scaleX(${1+t.spread/a}) scaleY(${1+t.spread/c})`})),this.Dr()}}async ur(t){var i,e,n;if(t===this.po)return;this.po=t;const s=this.Hs+ai.Clip;if(!this.Hr){const t=document.createElementNS(ri,"image");t.id=this.Hs+ai.Image,di(t,0,0),this.Hr=t,this.Xr(this.Hr),this.Nr(),this.xr.insertBefore(null!==(i=this.so)&&void 0!==i?i:this.Hr,this.Yr),t.setAttribute("clip-path",`url(${this.tr}#${s})`)}if(t&&(0,d.A8)(this.or)){(null===(e=this.or.imageAsset)||void 0===e?void 0:e.__loading)&&this.Er();const i=(0,d.Ub)(this.or);await this.mo(t,i),(null===(n=this.or.imageAsset)||void 0===n?void 0:n.__loading)||this.Sr()}else this.go(!0)}mo(t,i){if(t=(0,_.Jf)(t),!this.Hr||!this.po)throw new Error("No image element added to svg");const e=(0,et.JF)();if(this.go(),et.un&&i||et.nr&&e<14||et.UP&&e<20){const i=function(t){return x(new Image,t)}(t);i.promise.catch((e=>{this.go(),i.reject(new li(ei.K.ImageLoadingFailed,t,e))})),this.wo=i}else{const i=new F;this.Hr.addEventListener("load",(()=>i.resolve(this.Hr))),this.Hr.addEventListener("error",(e=>{this.go(),i.reject(new li(ei.K.ImageLoadingFailed,t,e))})),this.wo=i}return this.Hr.setAttributeNS(oi,"xlink:href",t),this.Hr.setAttribute("src",t),this.wo.promise}go(t=!1){this.Hr&&(this.wo&&t&&this.wo.reject(ei.K.ImageRemovedDuringLoad),this.Hr.removeAttributeNS(oi,"xlink:href"),this.Hr.removeAttribute("xlink:href"),this.Hr.removeAttribute("src"))}kr(){if(this.er===X.F.Image&&this.Hr){const t=this.lr,i=t.__data,e=this.Hr,n=this.Gs(i),s=p.vR.g(t),r=this.yo(t,i.imageSettings,i.imageAsset,!!t.feed,s);let o=r.x<0?r.x:0,h=r.y<0?r.y:0,a=Math.max(this.gr+Math.abs(r.x),0),c=Math.max(this.wr+Math.abs(r.y),0);if(i.imageSettings.sizeMode!==ii.ao.Fill&&(o=0,h=0,a=this.gr,c=this.wr),this.bo&&this.bo.x===o&&this.bo.y===h&&this.bo.width===a&&this.bo.height===c&&this.bo.fillOption===n)return;this.ar.style.overflow=i.imageSettings.sizeMode===ii.ao.Fill?"hidden":"visible",e.setAttribute("width",`${a}`),e.setAttribute("height",`${c}`),e.setAttribute("preserveAspectRatio",n);const l=this.Ar();di(e,o+l,h+l),this.Rr&&di(this.Rr,l,l),this.bo={x:o,y:h,width:a,height:c,fillOption:n}}}Dr(){if(0===this.Js.length)return;const t=this.yr,i=this.Js||[],{width:e,height:n}=this.Ws,s=this.Ar(),r=Math.ceil(e+2*s),o=Math.ceil(n+2*s),h={width:r,height:o};this.fo&&(0,At.yH)(this.fo,h)||(this.fo=h,t.style.left=`-${s}px`,t.style.top=`-${s}px`,t.style.width=`${r}px`,t.style.height=`${o}px`,t.setAttribute("width",`${r}`),t.setAttribute("height",`${o}`),this.er===X.F.Ellipse?(this.ar.setAttribute("cx",r/2+"px"),this.ar.setAttribute("cy",o/2+"px")):(di(this.ar,s,s),this.er===X.F.Image&&this.bo&&(this.Hr&&di(this.Hr,this.bo.x+s,this.bo.y+s),this.Rr&&di(this.Rr,s,s))),this.do()!==ci.SvgShadow?this.uo(i):i.forEach(((t,i)=>{this.Qs[i].style.transform=`scaleX(${1+t.spread/e}) scaleY(${1+t.spread/n})`})))}vo(){var t;const i=this.qs,e=null===(t=this.lo)||void 0===t?void 0:t.thickness,n=i===ci.None&&!e||i===ci.SvgShadow;this.yr.style.overflow=n?"clip":"visible"}yo(t,i,e,n,s){let r=0,o=0;if(!n&&!s&&(null==e?void 0:e.width)&&(null==e?void 0:e.height)){const n=Object.assign(Object.assign({},(0,At.o4)(e,t,"cover")),{x:0,y:0}),s=n.width-t.width,h=n.height-t.height;s>0&&(r=Math.round((1-2*i.x)*s)),h>0&&(o=Math.round((1-2*i.y)*h))}return{x:r,y:o}}Ar(){var t;if(this.do()!==ci.SvgShadow)return 0;const i=this._o();return((null===(t=this.Ws.border)||void 0===t?void 0:t.thickness)||0)+i.reduce(((t,i)=>{const e=Math.max(Math.abs(i.offsetX),Math.abs(i.offsetY));return Math.max(t,e+2*i.blur+i.spread)}),0)}do(){const t=this.or,i=this._o();if(i.length&&t){return i.some((t=>t.spread>0))?et.gm&&i.length>1?ci.DropShadow:ci.SvgShadow:ci.DropShadow}return ci.None}_o(){const t=this.or;return t?[...t.states.map((t=>t.shadows||[])).reduce(((t,i)=>t.concat(i)),[]),...t.shadows||[]]:[]}}function di(t,i,e,n="px"){const s=i+n,r=e+n;t.getAttribute("x")!==s&&t.setAttribute("x",s),t.getAttribute("y")!==r&&t.setAttribute("y",r)}function fi(t,i){if(!(0,d.Xk)(t)||!(0,Et.dK)(t))switch(t.kind){case"creative":i.xo(t);break;case X.F.Rectangle:i.Eo(t);break;case X.F.Ellipse:i.Co(t);break;case X.F.Image:i.So(t);break;case X.F.Text:i.Ao(t);break;case X.F.Button:i.$o(t);break;case X.F.Widget:i.Oo(t);break;case X.F.Video:i.Do(t)}}function vi(t,i,e=!1){switch(t.kind){case"creative":i.xo(t),pi(t.nodes,i,e);break;case X.F.Group:pi(t.nodes,i,e);break;default:e&&!(0,d.ir)(t)||fi(t,i)}}function pi(t,i,e=!1){for(const n of t)(0,Et.dK)(n)||vi(n,i,e)}ui.qr=new class{constructor(){this.Mo=new Map}Jr(t,i){var e;const n=this.ko(t),s=null!==(e=this.Mo.get(n))&&void 0!==e?e:{elements:new Set,changedOnPreviousPass:i};return this.Mo.set(n,{elements:s.elements.add(n),changedOnPreviousPass:i}),s}oo(t){const i=this.ko(t),e=this.Mo.get(i);return(0,w.mg)(e)}co(t){var i;const e=this.ko(t);this.Mo.delete(e),null===(i=this.Mo.get(e))||void 0===i||i.elements.delete(e)}ko(t){var i;return(0,d.Ub)(t)?null!==(i=t.masking.elementId)&&void 0!==i?i:"":t.id}Bo(){this.Mo.clear()}},function(t){t[t.None=0]="None",t[t.DropShadow=1]="DropShadow",t[t.BoxShadow=2]="BoxShadow",t[t.SvgShadow=3]="SvgShadow"}(ci||(ci={}));let mi=0;class gi extends R.b{get Io(){return{width:this.jo.width,height:this.jo.height}}get zo(){return{width:this.creativeDocument.width,height:this.creativeDocument.height}}get isEditorMode(){return 1===this.C.environment&&!this.Ro}get isInPreviewOrLiveMode(){return 2===this.C.environment||0===this.C.environment}get creativeDocument(){return this.Lo}constructor(t,i){super(),this.i=i,this.feedStore=(0,m.xV)(6,{optional:!0}),this.C=(0,m.xV)(2),this.No=new Map,this.storedViewElements=new Map,this.preloadingElements=new Map,this.dynamicImageElementIds=new Set,this.Po=0,this.Yo=!1,this.Ho=!0,this.Uo=new Map,this.Xo=new Map,this.Wo=!1,this.Vo=window.logger&&1===this.C.environment?new window.logger("Renderer"+mi++):void 0,this.Gi=1,this.Qo=1,this.Zo=[],this.Jo=!!this.C.appView,this.updateViewElementValues=()=>{this.Mt(this.Po)},this.qo=t=>{this.isEditorMode||(0,d.$Q)(this.jo,(i=>{var e;if(i.__actionListeners)for(const n of i.__actionListeners){if(n.trigger!==Z.MouseLeave)continue;const s=this.Go(i.__data).find((t=>n.action.operations.find((i=>i.value===t.state.id))));!s||(null===(e=null==s?void 0:s.animation)||void 0===e?void 0:e.isPlaying)||(0,nt.pR)(i.__rootElement,t.target)||n.event(t,!0)}}))},this.ge=(t,i,e)=>{var n,s;if(this.isEditorMode)return;if(this.Wo)return t.stopPropagation(),void(this.Wo=!1);if(e){if(this.Ko(t,e))return}this.Jo||t.stopPropagation();const r=null!==(n=t.x)&&void 0!==n?n:0,o=null!==(s=t.y)&&void 0!==s?s:0;this.emit("click",{event:{x:r,y:o},deepLinkUrl:i})},this.Zo=i.fontFamilies,this.th(t),this.we=i.isEditable||!1,this.Xs=i.contentWindow||window,this.S=this.Xs.document,this.eh=this.S.createElement("style"),this.S.head.appendChild(this.eh),this.nh=this.eh.sheet,this.sh=this.S.createDocumentFragment(),y.Jv.setBrowserDocument(this.S),y.Jv.setEnvs(this.C),this.rh(),this.oh=this.Jo?new Map:void 0,this.Jo&&this.feedStore&&this.feedStore.on("dataChanged",this.updateViewElementValues)}hh(t){this.ah=t}At(t){this.Ro=t}getViewElementById(t){return this.jo.nodes.find((i=>i.id===t))}ch(t){if(!et.m0)return;let i=Number.MAX_VALUE;if((0,d.To)(t,(t=>{(0,d.ir)(t)&&t.fontSize<i&&(i=t.fontSize)})),i<8){const t=Math.ceil(8/i)+1,e=2**Math.ceil(Math.log2(t));this.Qo=e}}xo(t){this.ah=`b${gi.lh}`,this.rootElement=this.S.createElement("div"),this.rootElement.setAttribute("data-banner",""),this.rootElement.setAttribute("data-creative",""),this.Uo.set(this.ah,this.rootElement),this.uh(t),this.jo.fill=t.fill,this.jo.__rootElement=this.rootElement,this.dh(this.ah,{width:"100%",height:"100%",boxSizing:"border-box",position:"relative",overflow:this.Jo?"visible":"clip",fontFamily:'Helvetica, Arial, Tahoma, "Microsoft Yahei", 微软雅黑, STXihei, 华文细黑, sans-serif',"-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale"}),this.fh(this.jo),this.sh.appendChild(this.rootElement),gi.lh++,this.rootElement.addEventListener("mousemove",this.qo),this.emit("creativeVisited",!0)}Eo(t){const i=this.vh(t);return this.ph(i),i}Co(t){const i=this.vh(t);return this.ph(i),i}Ao(t){return this.mh(t)}$o(t){return this.mh(t)}mh(t){var i;const e=this.vh(t);if(null===(i=e.__rootElement)||void 0===i||i.classList.add("text"),this.dh(e.elementCid,this.gh(e)),3===this.C.environment&&!this.Jo)return e;if(this.Jo&&t.font){for(const[i,e]of t.characterStyles.entries())e.font&&this.wh(e.font);this.wh(t.font)}return this.yh(e),e}So(t){const i=this.vh(t);return this.bh(t,i),i}Oo(t){var i,e;const n=this.vh(t),s=null===(i=n.__rootElement)||void 0===i?void 0:i.parentNode;return s&&(s.querySelector(`#widget-${t.id}`)||null===(e=this.WidgetRenderer)||void 0===e||e.createWidget(n,t)),n}Do(t,i){const e=this.vh(t);return i||(this.bh(t,e),e.__videoRenderer=(0,m.xV)(7,{args:[e],asNew:!0})),e}fh(t,i){var e;t.__svgBackground||(t.__svgBackground=new ui(this.Xs,t,this,this.C));const n=t.__svgBackground,s=(0,d.E2)(t),r=n.Ot(t,i);if(r&&s){const i=t.id;this.preloadingElements.has(i)||(null===(e=this.Vo)||void 0===e||e.verbose("[SvgBackground] adding image to preload:",i),this.preloadingElements.set(i,r))}}_h(t,i){Object.assign(this.creativeDocument,{[t]:i}),Object.assign(this.jo,{[t]:i}),this.fh(this.jo)}xh(t,i,e){const n=this.Go(t);let s=this.Fh(t,i);return s?s.rate=e:(s={state:i,rate:e},n.push(s)),this.Xo.set(t.id,n),s}Go(t){return this.Xo.get(t.id)||[]}Eh(){this.Xo.forEach(((t,i)=>{const e=this.Ch(i);e&&this.Sh(e)}))}Ah(t,i,e=!0){if((0,Et.dK)(t))return void this.$h(t);this.Oh(t);const n=this.storedViewElements.get(t.id);if(!n)throw new Error("Could not find view node");this.Dh(t),n.duration=t.duration,n.time=t.time;const s=0===i,r=this.Xo.get(t.id),o=(0,z.tl)(t,this.Po)&&!this.Mh(n);if(!e||o||s){const s=function(t,i,e=0,n=[]){return n=Zt(t,n),t.animations.filter((t=>!t.hidden)).forEach((s=>{const r=Gt(t,s,i,e).filter((t=>!n.some((i=>t.state===i.state))));n.unshift(...r)})),zt(n,t)}(t,this.zo,i,r);this.kh(n,t,s,e)}else n.opacity=0,this.Bh(n)}Mt(t,i){this.Yo||(this.Po=t,i&&(this.Ih=i),(0,d.To)(this.creativeDocument,(i=>{(0,Et.dK)(i)||this.Ah(i,t)})),this.Ih=!1)}jh(t){var i,e,n;const s=this.jo.nodes.find((i=>i.id===t.id));if((0,d.ay)(s))return;let r={callback:(i,e,n)=>{if(this.isEditorMode)return;if(e===Z.TouchStart&&(this.Th=!0),e===Z.MouseLeave&&!n&&i.target!==s.__rootElement)return;if(this.Th&&e.startsWith("mouse"))return;const r=i instanceof MouseEvent?i.relatedTarget:i.target;e!==Z.MouseLeave&&r&&!this.S.body.contains(r)||t.actions.filter((t=>t.triggers.find((t=>t===e)))).forEach((t=>{t.disabled||t.operations.forEach((n=>{switch(n.method){case Q.OpenUrl:this.ge(i,n.value);break;case Q.SetState:case Q.RemoveState:case Q.ClearStates:t.preventClickThrough&&(this.Wo=!0),this.zh(n,t,e)}}))}))}};r=Object.assign(Object.assign({},r),function(t){const i={};for(const e in Z)i[Z[e]]=(i,n)=>t.callback(i,Z[e],n);return i}(r)),s.__actionListeners=s.__actionListeners||[];for(const o of s.__actionListeners)null===(i=s.__rootElement)||void 0===i||i.removeEventListener(o.trigger,o.event,!0);s.__actionListeners=[];for(const o of t.actions)if(!o.disabled)for(const t of o.triggers)t!==Z.Click&&(t===Z.TouchStart?null===(e=s.__rootElement)||void 0===e||e.addEventListener(t,r[t],{passive:!0}):null===(n=s.__rootElement)||void 0===n||n.addEventListener(t,r[t],!0)),s.__actionListeners.push({trigger:t,event:r[t],action:o})}Rh(t){var i;null===(i=this.Vo)||void 0===i||i.debug("rerender_m"),this.Lh=!1,this.th(t),this.Nh(),this.rh(),this.sh=this.S.createDocumentFragment(),(0,d.wl)(),this.Ph.innerHTML="",this.Yh(),this.Uo.clear(),vi(this.creativeDocument,this),this.Hh(),this.rootElement.addEventListener("click",this.ge),this.Uh(this.Lh),this.Xh(),this.Ph.appendChild(this.sh)}initialize(t,i=0,e=!1){var n;if(null===(n=this.Vo)||void 0===n||n.verbose("initialize"),this.Yo)return;this.Ph=t,this.Wh(i,e,!1);const s=this.Vh(t.getBoundingClientRect());this.Qh(s),et.m0&&this.ch(this.creativeDocument);for(const r of this.creativeDocument.elements)this.Dh(r);vi(this.creativeDocument,this,e),this.Uh(e),this.Hh(),this.Ph.appendChild(this.sh),this.rootElement.addEventListener("click",this.ge),this.Zh(t)}Jh(t){const i=this.creativeDocument.Pt(t.id,!0);if(!i)throw new Error(`Could not find ${t.kind}`);(i.__parentNode||this.creativeDocument).Yt(i.id),(0,d.ay)(i)||this.qh(i)}destroy(){var t,i;this.emit("destroy"),(null===(t=this.eh)||void 0===t?void 0:t.parentNode)&&this.eh.parentNode.removeChild(this.eh),this.Nh(),this.Eh(),this.feedStore&&(this.feedStore.destroy(),this.feedStore.off("dataChanged",this.updateViewElementValues));for(const e of this.creativeDocument.elements)this.Jh(e);this.nh=void 0,this.No.clear(),this.WidgetRenderer&&this.WidgetRenderer.destroy(),this.storedViewElements.clear(),this.Uo.clear(),null===(i=this.Gh)||void 0===i||i.disconnect(),this.Yo=!0,(0,m.LB)(this.creativeDocument.id),this.clearEvents()}Xh(){const t=this.creativeDocument.elements;(0,d.$Q)(this.jo,((i,e,n)=>{const s=t.findIndex((({id:t})=>t===i.id));(0,d.um)(i)||this.Kh(i,s),this.ta(i,n)}))}ia(t){this.Kh(t,9999)}gh(t){const i=(0,z.tl)(t.__data,this.Po),e=(0,d.Ub)(t.__data),n=(0,E.Et)(t.opacity)?{opacity:`${i?t.opacity:0}`}:void 0,s=e||!i?"none":"auto",r=(0,E.Et)(t.radius)?{borderRadius:`${t.radius}px`}:void 0,o=(h=t.filters,Object.entries(h).filter((([t,i])=>void 0!==(null==i?void 0:i.value))).map((([t,i])=>{var e;const n=null===(e=u[t])||void 0===e?void 0:e.unit;return`${t}(${i.value.toFixed(0)}${n})`})).join(" "));var h;let a=!1;!et.jl&&et.zP.simple<=0&&(a=!0);return Object.assign(Object.assign(Object.assign(Object.assign({pointerEvents:s},this.ea(t)),r),n),{visibility:a||i?"visible":"hidden",filter:o||"unset"})}na(){var t;for(const i of this.jo.nodes)(0,d.ir)(i)&&(null===(t=i.__richTextRenderer)||void 0===t||t.rerender())}ea(t){return{width:`${t.width}px`,height:`${t.height}px`,transform:this.sa(t)}}ra(t,i=!1){const e=this.oa(t);let n=i?"":`translate(${t.x}px, ${t.y}px)`;return t.rotationZ&&(n+=` rotateZ(${t.rotationZ}rad)`),t.rotationY&&(n+=` rotateY(${t.rotationY}rad)`),t.rotationX&&(n+=` rotateX(${t.rotationX}rad)`),n+=` scaleX(${e.x})`,n+=` scaleY(${e.y})`,n}sa(t){const i=t.__data,e=(0,d.Ub)(i),n=this.oa(t),s=new lt;return s.ni(t.x,t.y),s.gi(t.perspective||800),e||(t.rotationZ&&s.ti(t.rotationZ),t.rotationY&&s.Kt(t.rotationY),t.rotationX&&s.qt(t.rotationX),s.si(n.x,n.y),t.rotationY||t.rotationX||!(0,d.A8)(t)||s.Kt(2*Math.PI)),s.Vt()}dh(t,i){let e;e=t!==this.ah?`#${this.ah} #${t}`:`#${t}`;let n="";for(const h in i)if(i[h]){n+=`${h.replace(/([A-Z])/g,(t=>`-${t.toLowerCase()}`))}:${i[h]};`}this.nh.insertRule(`${e}{${n}}`,this.nh.cssRules.length);const s=this.nh.cssRules[this.nh.cssRules.length-1],r=this.ha(s);this.No.set(t,{previous:{styleRule:s,rawStyleValue:r},current:{styleRule:s,rawStyleValue:r}});const o=this.Uo.get(t);o&&o.setAttribute("id",t)}aa(){return this.Gi}$h(t){(0,d._1)(t)&&this.ca(t),this.qh(t),(0,d.JL)(t)&&((0,d.VE)(t)&&ui.qr.Jr(t,!0),this.Ih=!0,this.la(t),this.Ih=!1)}ca(t,i=!1,e=!1){var n,s;const r=this.getViewElementById(t.id);if(r){null===(s=null===(n=r.__richTextRenderer)||void 0===n?void 0:n.pe)||void 0===s||s.resolveCharacterStyles(e);for(const i of tt.HD)if(i in t.content.style){if("font"===i){t.font=t.content.style[i];continue}t[i]=t.content.style[i]}i||(t.__dirtyContent=void 0)}}Oh(t){this.storedViewElements.get(t.id)||fi(t,this)}mute(t){this.Ho=null!=t?t:!this.Ho,this.emit("mute",this.Ho)}Sh(t,i=!0){const e=this.Go(t);this.Xo.delete(t.id),e.length&&(e.forEach((t=>{var i;return null===(i=t.animation)||void 0===i?void 0:i.pause()})),i&&this.Ah(t,this.Po))}ua(t,i){const e=this.Xo.get(t.id),n=(null==e?void 0:e.filter((t=>t.state.id!==i.id)))||[];this.Xo.delete(t.id),this.Xo.set(t.id,n)}th(t){this.Lo=t}bh(t,i){var e;const n=e=>{let n="";t.feed&&this.feedStore&&(n=this.feedStore.getFeedValue(t.feed,t.id).targetUrl),this.ge(e,n,i)};this.on("destroy",(()=>{var t;null===(t=i.__rootElement)||void 0===t||t.removeEventListener("click",n)})),null===(e=i.__rootElement)||void 0===e||e.addEventListener("click",n)}ph(t){var i;const e=i=>{this.isEditorMode||this.ge(i,void 0,t)};null===(i=t.__rootElement)||void 0===i||i.addEventListener("click",e),this.on("destroy",(()=>{var i;return null===(i=t.__rootElement)||void 0===i?void 0:i.removeEventListener("click",e)}))}Ko(t,i){var e;const n=(null===(e=i.__actionListeners)||void 0===e?void 0:e.filter((t=>t.trigger===Z.Click&&!t.action.disabled)))||[];if(n.length){for(const i of n){if(i.action.operations.some((t=>t.method===Q.OpenUrl))){i.event(t);break}i.event(t)}return!0}return!1}da(t){var i;const e=t.feed,n=this.storedViewElements.get(t.id),s=null===(i=this.feedStore)||void 0===i?void 0:i.getFeedValueUrl(e,t.id,t),r=t.imageAsset,o="dv"===this.C.appView&&this.isEditorMode,h="mv"===this.C.appView,a=t.id,c=s||(null==r?void 0:r.url);if((0,M.XI)(c))return c;if(!(0,M.gU)(c))return"";if(e&&!s)return"";if((o||h)&&a&&this.oh){const i=this.oh.get(a);if(i&&window.clearTimeout(i),(0,p.Bg)(n.imageUrl)===c)return this.oh.set(a,window.setTimeout((()=>{this.fa(t)}),1e3)),n.imageUrl}else if((0,p.Bg)(n.imageUrl)===c)return n.imageUrl;const l={width:this.creativeDocument.width*this.Gi*2,height:this.creativeDocument.height*this.Gi*2};let u;const d=this.dynamicImageElementIds.has(t.id);return o||d||(u=p.vR.getCroppingOptions(t)),p.vR.v(t,{feedUrl:s,force:o,sizeLimit:l,cropping:u,env:this.C.environment})}fa(t){if(!this.Yo){const i=this.storedViewElements.get(t.id);if(!i)return;i.imageUrl=void 0,i.imageUrl=this.da(t),this.fh(i)}}Fh(t,i){return this.Go(t).find((t=>i===t.state))}yh(t){var i,e;let n=t.__richTextRenderer;const s=t.__data;if(n)return void n.rerender();const r={feedStore:this.feedStore,element:s,viewElement:t,skipFontLoad:this.Lh,document:this.creativeDocument,isEditable:this.we,fontBoostingScale:this.Qo},o={spans:(null===(i=s.__dirtyContent)||void 0===i?void 0:i.spans)||s.content.spans,style:(0,E.Up)(Object.assign(t,(null===(e=s.__dirtyContent)||void 0===e?void 0:e.style)||{}),...tt.J9)};n=new Ft(o,t.__rootElement,r,this.Zo),t.__richTextRenderer=n,n.n();const h=()=>{this.emit("textElementInteractionsStarted",n)},a=()=>{this.emit("textElementInteractionsEnded",n)},c=()=>{null==n||n.off("interactionsStarted",h),null==n||n.off("interactionsEnded",a),null==n||n.off("destroyed",c)},l=({event:t,deepLinkUrl:i})=>{this.ge(t,i)},u=i=>{var n;let s="";try{if(this.feedStore){const i=(null===(n=t.__richTextRenderer)||void 0===n?void 0:n.ji.spans)||[];for(const t of i)if((0,H.ed)(t)&&"variable"===t.type&&t.style.variable){s=this.feedStore.getFeedValue(t.style.variable,t.style.variable.spanId).targetUrl;break}}}catch(e){}this.ge(i,s,t)};t.__rootElement&&(t.__rootElement.removeEventListener("click",u),t.__rootElement.addEventListener("click",u)),this.on("destroy",(()=>{var i;null===(i=t.__rootElement)||void 0===i||i.removeEventListener("click",u)})),n.off("interactionsStarted",h),n.off("interactionsEnded",a),n.off("destroyed",c),n.off("spanClicked",l),n.on("interactionsStarted",h),n.on("interactionsEnded",a),n.on("spanClicked",l),n.on("destroyed",c)}kh(t,i,e,n=!0){var s,r,o,h,a,c,l,u;null===(s=this.Vo)||void 0===s||s.debug(`_setViewElementValuesWithState[${i.name}]`);const f=(0,d.Hb)(i);if(t.x=Ut("x",i,e,this.Gi),t.y=Ut("y",i,e,this.Gi),t.width=Ut("width",i,e,f?void 0:this.Gi),t.height=Ut("height",i,e,f?void 0:this.Gi),t.originX=Ut("originX",i,e),t.originY=Ut("originY",i,e),t.scaleX=Ut("scaleX",i,e,f?this.Gi:void 0),t.scaleY=Ut("scaleY",i,e,f?this.Gi:void 0),t.rotationX=Ut("rotationX",i,e),t.rotationY=Ut("rotationY",i,e),t.rotationZ=Ut("rotationZ",i,e),t.mirrorX=Ut("mirrorX",i,e),t.mirrorY=Ut("mirrorY",i,e),t.border=Ut("border",i,e,this.Gi),t.fill=Ut("fill",i,e),t.shadows=Ut("shadows",i,e,this.Gi),t.radius=Ut("radius",i,e,this.Gi),t.filters=Ut("filters",i,e,this.Gi),t.perspective=this.va(i),(0,d.Ub)(i)?this.pa(t,i):t.opacity=Ut("opacity",i,e),f&&1!==this.Gi&&(t.x-=t.width*(1-this.Gi)/2,t.y-=t.height*(1-this.Gi)/2),(0,d.A8)(t)){const n=i;n.feed?(t.feed=Ut("feed",n,e),n.imageAsset=void 0):n.imageAsset&&(t.feed=n.feed=void 0),t.imageUrl=this.da(t.__data)}const v={};if((0,d.ir)(t)&&(0,d.ir)(i)){const n={},s=["textColor"];for(const i of s)n[i]=t[i];t.content.spans.forEach((t=>{"word"!==t.type&&"composition"!==t.type&&"space"!==t.type&&"variable"!==t.type&&"newline"!==t.type||t.style.textShadows&&(t.style.textShadows=t.style.textShadows.map((t=>Vt(t,this.Gi))))})),t.textColor=Ut("textColor",i,e),t.textShadows=Ut("textShadows",i,e,this.Gi),t.underline=Ut("underline",i,e),t.strikethrough=Ut("strikethrough",i,e),t.uppercase=Ut("uppercase",i,e),t.textOverflow=Ut("textOverflow",i,e),t.lineHeight=Ut("lineHeight",i,e),t.fontSize=Ut("fontSize",i,e,this.Gi),t.maxRows=Ut("maxRows",i,e),t.padding=Ut("padding",i,e,this.Gi),t.characterSpacing=Ut("characterSpacing",i,e),t.horizontalAlignment=Ut("horizontalAlignment",i,e),t.verticalAlignment=Ut("verticalAlignment",i,e);const u=i.__dirtyContent,d=null!==(r=null==u?void 0:u.style.fontSize)&&void 0!==r?r:t.fontSize,f=null!==(o=null==u?void 0:u.style.textShadows)&&void 0!==o?o:t.textShadows,p=null!==(h=null==u?void 0:u.style.padding)&&void 0!==h?h:t.padding;null===(a=t.__richTextRenderer)||void 0===a||a.kn("textShadows",f,t.__richTextRenderer.style),null===(c=t.__richTextRenderer)||void 0===c||c.kn("fontSize",d,t.__richTextRenderer.style),null===(l=t.__richTextRenderer)||void 0===l||l.kn("padding",p,t.__richTextRenderer.style);for(const i of s)v[i]=!(0,E.bD)(t[i],n[i])}(0,d.yG)(t)&&t.__videoRenderer&&t.__videoRenderer.updateVideo(),f&&(0,d.Hb)(t)&&(null===(u=i.__widget)||void 0===u||u.emit(it.Y.ViewNodeChanged,t)),n&&(this.fh(t),this.Bh(t,v)),(0,d.JL)(i)&&this.la(i)}Mh(t){const i=t.time+t.duration;return!!(0,z.pE)(i,this.Po,.001)&&this.creativeDocument.elements.some((({time:t})=>(0,z.pE)(i,t,.001)))}Bh(t,i){var e,n,s,r,o;const h=this.No.get(t.elementCid);if(!h)throw new Error("Could not get stylerule for element. "+(this.Jo?"This is most likely caused by the element no longer existing from an undo/redo.":""));const{current:a,previous:c}=h;a.rawStyleValue=this.gh(t);const l=(0,E.LC)(c.rawStyleValue,a.rawStyleValue),u=["pointerEvents","transform","width","height","opacity","filter","visibility"];for(const d of u)d in l&&t.__rootElement&&(t.__rootElement.style[d]=l[d]);if(l.backfaceVisibility&&(c.styleRule.style.backfaceVisibility=l.backfaceVisibility),(0,d.ir)(t)){const h=void 0!==l.width||void 0!==l.height;let a=!1;const c=null===(e=t.__richTextRenderer)||void 0===e?void 0:e.ye;if(h||this.Ih&&c){const i=this.Ch(t.id);a=!!(null==c?void 0:c.elements.get(t.id))||!!(null===(n=t.__richTextRenderer)||void 0===n?void 0:n.ji.spans.find((t=>"variable"===t.type)))||!!(null===(s=i.__dirtyContent)||void 0===s?void 0:s.spans.find((t=>"variable"===t.type)))}if(null==i?void 0:i.textColor){const i=t.textColor;null===(r=t.__richTextRenderer)||void 0===r||r.Is({textColor:i})}(a||h)&&(null===(o=t.__richTextRenderer)||void 0===o||o.rerender(!1,t))}c.rawStyleValue=a.rawStyleValue,c.styleRule=a.styleRule}ma(){this.fh(this.jo)}zh(t,i,e){var n,s,r,o;const h=this.jo.nodes.find((i=>i.id===t.target));if(!h)return;const a=h.__data,c=t.value;if(!c&&(t.method===Q.SetState||t.method===Q.RemoveState))return;if("reserved-pressed"===i.templateId&&function(t){return t===Z.MouseLeave||t===Z.TouchEnd||t===Z.TouchCancel}(e)){const t=a.actions.find((t=>"reserved-pressed"===t.templateId&&t.operations.find((t=>t.value)))),i=this.Go(a).find((i=>i.state.id===t.operations[0].value));if(!i||0===i.rate)return}const l=a.states.find((t=>t.id===c)),u={duration:null!==(s=null===(n=t.animation)||void 0===n?void 0:n.duration)&&void 0!==s?s:.2,timingFunction:null===(r=t.animation)||void 0===r?void 0:r.timingFunction,customFPSInterval:(0,z.gm)(this.i.fps),callback:()=>{this.Ro||this.Ah(a,this.Po)}};if(l){const i=this.Go(a).find((t=>t.animation&&t.state.id===l.id));if(i)t.method===Q.RemoveState?this.Go(a).filter((t=>l===t.state&&t.animation)).forEach((t=>{(null==t?void 0:t.animation)&&t.animation.to({rate:0},u)})):null===(o=i.animation)||void 0===o||o.to({rate:1},u);else if(t.method===Q.SetState){const t=this.xh(a,l,0);t.animation=pt.to(t,{rate:1},u),t.animation.onCompleted((()=>{0===t.rate&&this.ua(a,l)}))}}else l&&t.method!==Q.ClearStates||this.Go(a).filter((t=>t.animation)).forEach((t=>{(null==t?void 0:t.animation)&&t.animation.to({rate:0},u)}))}Hh(){this.creativeDocument.elements.forEach((t=>{(0,d.z)(t)&&this.la(t)}))}la(t){const i=this.creativeDocument.elements.filter((i=>{var e;return(0,d.JL)(i)&&t.id===(null===(e=i.masking)||void 0===e?void 0:e.elementId)}));for(const e of i)this.Ah(e,this.Po);i.length&&!this.Ih&&ui.qr.Jr(t,!1)}pa(t,i){const e=ui.qr.oo(i);if(e)for(const n of[...e.elements.values()]){const e=this.creativeDocument.elements.find((({id:t})=>t===n));if(!e||!(0,d.VE)(e))continue;const s=this.Xo.get(i.id),r=Qt(e,i,this.Io,this.Po,s),o=Ut("opacity",i,r),h=Ut("opacity",e,r);t.opacity=h*o}}Wh(t,i,e=!0){this.Ph.innerHTML="",this.Po=t,this.Lh=i,e&&(0,d.wl)(),this.rh(),this.Yh()}Uh(t){this.ga();for(const i of this.creativeDocument.elements){if((0,Et.dK)(i))continue;if(t&&!(0,d.ir)(i))continue;const e=this.storedViewElements.get(i.id),n=this.No.get(e.elementCid).current.styleRule,s=[];for(let t=0;t<n.style.length;t++)n.style[t].match(/(opacity|perspectiveOrigin)/)&&s.push(n.style[t]);n.style.willChange=s.join(", ")}this.Xh()}Nh(){var t,i;(0,d.$Q)(this.jo,(t=>{var i;(0,d.ir)(t)&&(null===(i=t.__richTextRenderer)||void 0===i||i.He()),(0,d.yG)(t)&&t.__videoRenderer.destroy();const e=this.No.get(t.elementCid);e.current.styleRule.style.willChange="",e.previous.styleRule.style.willChange="",t.__rootElement&&t.__rootElement.removeEventListener("click",this.ge)})),null===(t=this.rootElement)||void 0===t||t.removeEventListener("click",this.ge),null===(i=this.rootElement)||void 0===i||i.removeEventListener("mousemove",this.qo)}qh(t){var i,e,n;this.Sh(t,!1);const s=this.storedViewElements.get(t.id);if(!s)return;null===(i=s.__svgBackground)||void 0===i||i.Vr(),this.jo.nodes=this.jo.nodes.filter((t=>t.id!==s.id)),this.storedViewElements.delete(s.id);const r=s.elementCid,o=this.No.get(r);this.wa(o.current.styleRule);const h=null===(e=this.oh)||void 0===e?void 0:e.get(r);h&&window.clearTimeout(h),(0,d.ir)(s)&&s.__richTextRenderer&&(s.__richTextRenderer.He(),s.__richTextRenderer=void 0),(0,d.Hb)(s)&&(null===(n=s.__data.__widget)||void 0===n||n.destroy()),(0,d.yG)(s)&&s.__videoRenderer.destroy();const a=s.__safari3dElement||s.__rootElement;if(!a)throw new Error("HTML element does not exist on canvas.");this.rootElement.removeChild(a)}vh(t){const i=(0,d._E)(t);this.storedViewElements.set(t.id,i),this.Ah(t,this.Po,!1),i.__rootElement=this.ya(i),this.dh(i.elementCid,Object.assign({},this.gh(i)));const e=this.jo.nodes.findIndex((({time:t,x:e,y:n})=>{if(t>i.time)return!0;if(t===i.time){if(n>i.y)return!0;if(n===i.y&&e>i.x)return!0}return!1}));return-1===e?this.jo.nodes.push(i):this.jo.nodes.splice(e,0,i),this.fh(i),this.Xh(),this.jh(t),i}Kh(t,i){const e=t.__safari3dElement||t.__rootElement;e&&(e.style.zIndex=`${i}`)}ta(t,i){const e=t.__safari3dElement||t.__rootElement,n=null==e?void 0:e.parentNode;if(e&&n){const t=Array.from(n.children).filter((t=>"DIV"===t.tagName)),s=(null==t?void 0:t.length)?t.indexOf(e):-1;s>-1&&s!==i&&n.insertBefore(e,t[i]||null)}}va(t){return 2*Math.max(t.width,t.height)}oa(t){return{x:((0,E.Et)(t.scaleX)?t.scaleX:1)*(t.mirrorX?-1:1),y:((0,E.Et)(t.scaleY)?t.scaleY:1)*(t.mirrorY?-1:1)}}wa(t){for(let i=this.nh.cssRules.length-1;i>=0;i--)if(this.nh.cssRules[i].selectorText===t.selectorText){this.nh.deleteRule(i);break}}Yh(){this.No.clear();for(let t=this.nh.cssRules.length-1;t>2;t--)this.nh.deleteRule(t)}ga(){const t=this.nh;et.nr&&t.insertRule(`#${this.ah} .safari-3d {position:absolute;left:0;top:0;bottom:0;right:0,pointer-events:none; transform: translateZ(0); }`,t.cssRules.length),t.insertRule(`#${this.ah} .element{position:absolute;left:0;top:0;}`,t.cssRules.length),t.insertRule(`#${this.ah} .text>div{position:relative;}`,t.cssRules.length),t.insertRule(`#${this.ah} .text .text-line>div::before{display:inline;content: " ‌";}`,t.cssRules.length)}ha(t){const i={};for(let e=0;e<t.style.length;e++){i[t.style[e]]=t.style[t.style[e]]}return i}ya(t){const i=this.S.createElement("div");if(this.Uo.set(t.elementCid,i),3===this.C.environment&&(t.name&&i.setAttribute("data-test-name",t.name),i.setAttribute("data-test-id",`element-kind-${t.kind}`)),i.classList.add("element",`kind-${t.kind}`),et.nr){const e=this.S.createElement("div");e.classList.add("safari-3d"),e.appendChild(i),t.__safari3dElement=e,this.rootElement.appendChild(e)}else this.rootElement.appendChild(i),t.__rootElement=i;return this.ba(t),i}ba(t){if(!this.isInPreviewOrLiveMode)return;const i=t.__safari3dElement||t.__rootElement;if(!i)return;const e=t.__data,n=(0,d.A8)(e),s=(0,d.ir)(e),r=(null==e?void 0:e.name)||"",o=s?(0,H.rf)(e.content):"",h=r.startsWith("#"),a=n&&r&&!h;if(!(0,d.A8)(e)&&!(0,d.ir)(e)&&!(0,d.um)(e)||h||s&&!o||n&&!a)return i.setAttribute("role","presentation"),void i.setAttribute("aria-hidden","true");i.setAttribute("role",n?"img":(0,d.DD)(t)?"button":vt(e)?"link":"region"),i.setAttribute("aria-label",n?r:o),i.setAttribute("tabindex","0")}async wh(t){await y.Jv.loadFontFace(t)}Ch(t){const i=this.creativeDocument.elements.find((i=>i.id===t));if(!i)throw new Error("Tried to get non-existing data element.");return i}Qh(t){var i,e;t!==this.Gi&&(0!==t?(null===(e=this.Vo)||void 0===e||e.debug(`setting scale: ${t}`),this.Gi=t,this.uh(this.creativeDocument),this.dh(this.ah,{width:`${this.jo.width}px`,height:`${this.jo.height}px`})):null===(i=this.Vo)||void 0===i||i.verbose("Trying to set scale to 0. Aborting."))}_a(t){this.Qh(t),this.creativeDocument.elements.every((t=>this.storedViewElements.has(t.id)||(0,Et.dK)(t)))&&(this.ma(),this.updateViewElementValues())}uh(t){this.jo.width=t.width*this.Gi,this.jo.height=t.height*this.Gi}xa(t,i){return t/i}Zh(t){var i,e;(null===(i=this.i.responsive)||void 0===i?void 0:i.enabled)&&"undefined"!=typeof ResizeObserver&&(null===(e=this.Vo)||void 0===e||e.verbose("initializing ResizeObserver"),this.Gh=new ResizeObserver((t=>{var i,e;null===(i=this.Vo)||void 0===i||i.debug("ResizeObserver: resize observed");const n=t[0],s=null===(e=n.borderBoxSize)||void 0===e?void 0:e[0];let r=null==s?void 0:s.inlineSize,o=null==s?void 0:s.blockSize;if(!(0,E.Et)(r)||!(0,E.Et)(o)){const t=n.target.getBoundingClientRect();r=t.width,o=t.height}const h=this.Vh({width:r,height:o});this._a(h)})),this.Gh.observe(t))}rh(){this.jo={kind:"creative",nodes:[],width:this.creativeDocument.width,height:this.creativeDocument.height}}Vh(t){var i;const e="contain"===(null===(i=this.i.responsive)||void 0===i?void 0:i.mode),n=t.width/t.height,s=this.creativeDocument.width/this.creativeDocument.height;return e&&n>s?this.xa(t.height,this.creativeDocument.height):this.xa(t.width,this.creativeDocument.width)}Dh(t){(0,d.Hb)(t)&&!this.WidgetRenderer&&(this.WidgetRenderer=(0,m.xV)(4))}}gi.lh=0;const wi={optimization:{enabled:!1,quality:95},streaming:{enabled:!1},autoplay:!0,loop:!1,restartWithCreative:!0,startTime:0,endTime:0,playbackRate:1,stopWithCreative:!0,sizeMode:s(945).y.Fit,volume:.5,playbackButton:{enabled:!1,size:50,color:(0,J.H0)("rgba(255, 255, 255, 0.25)")}};function yi(t){const i=t.fill?(0,J.H0)(t.fill):void 0,e=Object.assign(Object.assign({},t),{fill:i});var n;return t.border&&(e.border={thickness:(n=t.border).thickness,style:n.style||"solid",color:(0,J.H0)(n.color)}),t.shadows&&(e.shadows=t.shadows.map(Ei)),e.states=t.states.map(_i),(0,d.ir)(e)&&(0,d.ir)(t)&&(e.textColor=(0,J.H0)(t.textColor),e.content=function(t){return{spans:t.content.spans.map(Fi),style:xi(t.content.style)}}(t)),(0,d.yG)(e)&&(0,d.yG)(t)&&(e.videoSettings=function(t){const i=t.videoSettings.playbackButton,e=t.videoSettings.streaming||wi.streaming,n=t.videoSettings.optimization||wi.optimization;return Object.assign(Object.assign({},t.videoSettings),{streaming:e,optimization:n,sizeMode:t.videoSettings.sizeMode,playbackRate:t.videoSettings.playbackRate,playbackButton:Object.assign(Object.assign({},i),{color:(0,J.H0)(i.color)})})}(t)),(0,d.A8)(e)&&(0,d.A8)(t)&&t.imageAsset&&(e.imageAsset=(0,w.mg)(t.imageAsset)),e}function bi(t,i){for(const e of i)if(e.id===t)return e.value;throw new Error("Could not find font style in preload assets.")}function _i(t){return function t(i){for(const e in i){const n=i[e];let s;s="object"==typeof n?t(n):"string"==typeof n&&(0,J.NI)(e)&&(0,J.t)(n)?(0,J.H0)(n):n,i[e]=s}return i}(t)}function xi(t){const i=t;for(const e in i){const t=i[e];(0,J.NI)(e)&&(0,J.t)(t)&&(i[e]=(0,J.H0)(t)),"textShadow"===e&&(0,J.NI)(e)&&(0,J.t)(t)&&(i[e]=(0,J.H0)(t))}return i}function Fi(t){return(0,H.ed)(t)&&t.style.textColor&&(t.style.textColor=(0,J.H0)(t.style.textColor)),t.content=(0,H.Ec)(t.content),t}function Ei(t){return Object.assign(Object.assign({},t),{color:(0,J.H0)(t.color)})}class Ci{get Xs(){var t;return(this.Fa?window:null===(t=this.Ea)||void 0===t?void 0:t.contentWindow)||void 0}get Ks(){var t;const i=null===(t=this.Xs)||void 0===t?void 0:t.document;if(!i)throw new Error("No document found");return i}constructor(t,i,e,n,s){this.Ca=t,this.I=i,this.Sa=e,this.C=n,this.Aa=s,this.$a=new Set,this.Fa=!1,this.dt=!1,this.Oa=new Map,this.Da=async()=>{b("ac:init:start");const t=this.Xs;if(!t)throw new Error("Ad container is not visible");if(!this.dt){y.Jv.setBrowserDocument(this.Ks),y.Jv.setEnvs(this.C),this.Ma(),this.ka=this.Ba(),(0,m.hA)(0,this.Ca),(0,m.tB)(3,gi).withArgs(this.B,{contentWindow:t,fps:this.Ca.parameters.fps,responsive:(0,M.Tf)(this.Ca.parameters.responsive)?{enabled:!0,mode:this.Ca.parameters["responsive-mode"]}:void 0,fontFamilies:[]}),(0,m.tB)(5,N),b("ac:init:load:features:start"),await Promise.all([B(this.Ca.selectedCreative.animated.files,this.Ca.getOrigin(),this.Ca.data.brand.id),p.vR.n({imageOptimizerOrigin:this.C.origins.IMAGE_OPTIMIZER||"",svgImageOptimizerOrigin:this.C.origins.SVG_IMAGE_OPTIMIZER||"",defaultOrigin:this.Ca.selectedCreative.animated.defaultOrigin}),D.init({isSandboxedIframe:this.Fa})]),b("ac:init:load:features:end"),this.B.startTime=this.St(),this.renderer=(0,m.xV)(3),this.feedStore=(0,m.xV)(6,{optional:!0}),this.renderer.on("click",this.ge),this.initDynamicPropertyElements(),this.feedStore&&(b("ac:init:load:feeds:start"),await this.Ia(),b("ac:init:load:feeds:end")),this.animator=(0,m.xV)(5),this.ja(),this.Ta(),b("ac:init:render:start"),this.renderer.initialize(this.ka,this.B.startTime,!0),b("ac:init:render:end"),b("ac:init:rerender:start"),this.renderer.Rh(this.B),b("ac:init:rerender:end");try{b("ac:preload:fonts:start"),b("ac:preload:elements:start");const t=this.za(),i=[...this.renderer.preloadingElements.values()],e=[Promise.all(t).then((()=>{b("ac:preload:fonts:end")})),Promise.all(i).then((()=>{b("ac:preload:elements:end")}))];if(Promise.allSettled){(await Promise.allSettled(e)).forEach((t=>{if("rejected"===t.status)throw t.reason}))}else await Promise.all(e);b("ac:init:load:elements:end")}catch(i){if(!i)return void console.error("`undefined` error occurred while preloading elements");const t=i;t.message?this.Ra(t.message,{image:t.url?{url:t.url}:void 0,originalError:i}):console.error(i)}if(this.La(),this.renderer.WidgetRenderer)try{b("ac:init:load:widgets:start"),await Promise.all(this.renderer.WidgetRenderer.widgetInitializingPromises),await Promise.all(this.renderer.WidgetRenderer.widgetLoadingPromises)}catch(i){let t,e="Unknown error.";i instanceof Error&&(e=i.message,t=i.contexts),"string"==typeof i&&(e=i),this.Ra(e,t)}finally{b("ac:init:load:widgets:end")}this.renderer.na(),b("ac:init:visibility:check"),this.Na()?(this.Pa(),N&&this.Ya()):this.Ha=t.setInterval((()=>{var i;this.Na()&&(null===(i=this.renderer)||void 0===i||i.Rh(this.B),this.Pa(),N&&this.Ya(),t.clearInterval(this.Ha))}),10),"function"==typeof this.Aa&&this.Aa(this),b("ac:init:end")}},this.ge=t=>{let i,e="";t instanceof MouseEvent?i=t:(i=t.event,e=t.deepLinkUrl);this.Ua()&&(e?this.Ca.click({x:i.x,y:i.y,deepLinkUrl:e}):this.Ca.click(i))},this.Xa();try{const t=this.Wa(i);this.B=new K(t)}catch(r){throw new Error(`Could not prepare creative data: ${null==r?void 0:r.message}`)}try{const t=this.Va(),i=t.contentWindow;if(this.Fa=!t.contentDocument||!!(0,M.Tf)(this.Ca.parameters.iframeless),this.Fa)t.remove(),this.Da();else{if(!i)return void console.warn("Did not initialize the creative, due to container element is not visible:\n",this.Ca.container);(0,g.$M)(t),this.Ea=t,this.Qa(i,this.Da)}}catch(r){throw new Error(`Could not initialize creative: ${null==r?void 0:r.message}`)}}getTrackerPlaythroughData(){if(!this.animator)throw new Error("Animator is not initialized");const t=this.B.elements.filter((t=>(0,d.yG)(t)||(0,d.Hb)(t))),i=this.C.origins.VIDEOS_STORAGE,e=this.animator.time+this.animator.duration*(this.animator.loop-1);return{loop:this.animator.loop,playTime:e,progress:Math.min(e/this.animator.duration,1),isBannerflowHosted:Number(t.some((t=>function(t,i){if((0,d.yG)(t)&&t.videoAsset&&f(t.videoAsset.url,i))return!0;if((0,d.Hb)(t)&&t.customProperties.filter((t=>"url"===t.name)).some((t=>(0,l.df)(t)&&f(t.value.text,i))))return!0;return!1}(t,i)))),elements:[...t.reduce(((t,i)=>{let e;return(0,d.Hb)(i)?e="w":(0,d.yG)(i)?e="v":(0,d.A8)(i)?e="i":(0,d.ir)(i)&&(e="t"),e&&((0,Y.TW)(i)?t.add(`${e}f`):t.add(e)),t}),new Set)]}}Za(){return this.Sa.filter((t=>"font"===t.type))}async T(t){await Promise.all([...this.Oa.values()].map((({creativeElement:i,dataNode:e})=>{if((0,d.Hb)(i)){const n=i.customProperties.filter((t=>t.dynamicPropertyId));for(const s of n){const n=t.find((({id:t})=>t===s.dynamicPropertyId));this.Ja(i,e,n)}}else{const n=t.find((({id:t})=>t===i.dynamicPropertyId));this.Ja(i,e,n)}})))}Ja(t,i,e){var n,s,r;if(!this.renderer)throw new Error("Renderer not yet initialized.");const o=e&&"value"in e?e.value:void 0;if((0,d.ir)(i)&&(0,d.ir)(t))if("string"==typeof o){const t=(0,H.xc)(o);i.content.spans=t.spans}else i.content=(0,w.mg)(t.content);else if((0,d.A8)(i)&&(0,d.A8)(t)){if(!i.imageAsset)throw new Error(`Image node with ID '${i.id}' has no image asset.`);i.imageAsset.url="string"==typeof o?o:null!==(s=null===(n=t.imageAsset)||void 0===n?void 0:n.url)&&void 0!==s?s:""}else if((0,d.Hb)(i)&&(0,d.Hb)(t))if("string"==typeof o){const n=t.customProperties.find((t=>t.dynamicPropertyId===(null==e?void 0:e.id))),s=i.customProperties.find((({name:t})=>t===(null==n?void 0:n.name)));s&&(0,H.z3)(s)&&(s.value.text=o,s.versionPropertyId=void 0)}else i.customProperties=(0,w.mg)(t.customProperties);return this.renderer.preloadingElements.delete(t.id),this.renderer.Rh(this.B),null!==(r=this.renderer.preloadingElements.get(t.id))&&void 0!==r?r:Promise.resolve()}Ba(){return this.Fa?this.Ca.container:this.Ks.body}Na(){const t=this.Ks.createElement("div"),i=t.style;i.height="1px",i.width="1px",i.position="absolute",i.top="-100000px",this.Ca.container.appendChild(t);const e=t.getBoundingClientRect().height>0;return this.Ca.container.removeChild(t),e}La(){if(this.renderer)for(const t of this.renderer.creativeDocument.elements)if((0,d.Hb)(t)){this.hasWidgetElements=!0;break}}Ya(){if(b("ac:animator:start"),!this.animator)return;const t=this.Ca.shouldAutoplay(),i=(0,z.gm)(this.Ca.parameters.fps);i&&this.animator.updateCustomFPSInterval(i),5===this.C.environment&&(this.B.loops=1),this.Ca.viewability.pauseOutsideView()?this.qa(t):t&&this.animator.play(),this.Ca.on(v.Stop,(()=>{var t;null===(t=this.animator)||void 0===t||t.pause()})),b("ac:animator:end")}qa(t){var i;this.Ca.on(v.ViewEnter,(()=>{var t;null===(t=this.animator)||void 0===t||t.play()})),this.Ca.on(v.ViewLeave,(()=>{var t;null===(t=this.animator)||void 0===t||t.pause()})),this.Ca.viewability.visible&&t&&(null===(i=this.animator)||void 0===i||i.play())}St(){var t;const i=parseFloat((null===(t=this.Ca.parameters)||void 0===t?void 0:t.seek)||"");if(!isNaN(i))return Math.max(0,i);if(this.Ga()){const t=this.B.preloadImage.frames[0];return"number"==typeof t?t:1}return this.B.startTime||0}Ga(){var t;return"preload-frame"===(null===(t=this.Ca.parameters)||void 0===t?void 0:t.seek)}Xa(){if((0,m.hA)(2,this.C),t=this.C.environment,[2,4,5,6].includes(t))return;var t;const i=this.Ca.getOrigin();if(i){const t=this.C.origins;for(const e in t){const n=e,s=t[n];(0,M.gU)(s)&&((0,M.cW)(s)?t[n]=(0,M.i$)(i,s):i.includes("bannerflow.com/preview")||(t[n]=(0,M.rH)(s,i)))}}}Va(){const t=document.createElement("iframe"),i=t.style;return i.width=i.height="1px",i.minWidth=i.maxWidth=i.minHeight="100%",i.outline=i.border=i.transform=i.filter="none",i.display="block",i.position="absolute",i.left=i.top=i.opacity="0",i.transformOrigin="0 0",t.src="7705683"===this.Ca.selectedCreative.id?"about:blank":(0,g.C0)(),t.scrolling="no",this.Ca.shouldFadeIn()&&(i.transition="opacity 0.2s ease"),this.Ca.container.appendChild(t),t}Pa(){b("ac:iframe:show"),this.Ea&&(this.Ea.style.opacity="1")}Ma(){const t=this.Ua()?"pointer;":"default;",i=this.Ks,e=i.createElement("style");e.innerHTML=`*{box-sizing: border-box;}:root{color-scheme: light only;}html,body{margin:0;padding:0;overflow:hidden;width:100%;height:100%;-ms-user-select:none;-moz-user-select:none;-webkit-user-select:none;user-select:none;cursor:${t};}`,this.Ka=e,i.head.appendChild(e)}Ua(){const t=this.Ca.redirect.getRedirectUrl();if(!1!==t)return t||this.Ca.redirect.getTargetUrl()}Qa(t,i){if("complete"===t.document.readyState)setTimeout((()=>{i()}),100);else{const e=()=>{i&&i(),t&&t.removeEventListener("load",e)};t.addEventListener("load",e)}}ja(){const{animator:t,Ca:i,renderer:e}=this;if(!(t&&i&&e))throw new Error("Failed to init event bubbling. Animator, Ad or Renderer is missing");t.on("loop",(()=>i.emit(v.Loop,this.tc()))),t.on("pause",(()=>i.emit(v.Pause,this.tc()))),t.on("play",(()=>i.emit(v.Play,this.tc()))),t.on("stop",(()=>i.emit(v.Stop,this.tc()))),t.on("seek",(()=>i.emit(v.Seek,this.tc()))),e.on("mute",(t=>i.emit(v.Mute,t))),b("ac:animated-events:added")}tc(){const t=this.animator;return{ad:this.Ca,time:(null==t?void 0:t.time)||0,loop:(null==t?void 0:t.loop)||0}}Ta(){this.animator&&this.renderer&&(this.Ca.adTag.adApi=new k({animatedCreative:this,creativeData:this.I,creativeDataNode:this.B}))}destroy(){var t,i,e;clearInterval(this.Ha),null===(t=this.ka)||void 0===t||t.removeEventListener("click",this.ge),this.dt=!0;try{this.Ka&&(this.Ks.head.removeChild(this.Ka),this.Ka=void 0)}catch(n){}null===(i=this.renderer)||void 0===i||i.destroy(),null===(e=this.animator)||void 0===e||e.destroy(),(0,m.Jk)()}async Ia(){b("ac:preload:feeds:start"),this.feedStore&&(this.B.elements.forEach((t=>{const i=(0,d.A8)(t)||(0,d.yG)(t);if((0,d.ir)(t))for(const e of t.content.spans)(0,H.NY)(e)&&this.$a.add(e.style.variable.id);else t.feed&&i?this.$a.add(t.feed.id):this.Ca.overriddenFeedData&&(0,d.Hb)(t)&&t.customProperties.filter((t=>"feed"===t.unit)).forEach((t=>{try{const i=t.value;if(!(0,Y.SB)(i)||0===i.id.length)return;this.$a.add(i.id)}catch(i){}}))})),this.Ca.overriddenFeedData&&this.$a.size>0&&this.feedStore.feeds.set([...this.$a][0],{feed:{data:this.Ca.overriddenFeedData,intervalInSeconds:0},interval:void 0,overridden:!0}),await this.feedStore.preloadFeeds([...this.$a]),b("ac:preload:feeds:end"))}za(){const t=this.Za();if(6===this.C.environment)return t.map((t=>y.Jv.loadFontFace(Object.assign(Object.assign({},t.value),{src:(0,y.Ay)(t.value.src)}))));if(this.feedStore){for(const t of this.renderer.creativeDocument.elements)if((0,d.ir)(t))for(const i of t.content.spans)(0,H.NY)(i)&&this.feedStore.addFeedElement(t.id,i.style.variable,t);for(const t of this.$a)this.feedStore.loadFontsBasedOnFeedData(t,!0)}return t.map((({value:t})=>t&&this.ic(t))).filter(Boolean)}async ic(t,i=""){var e;if(!t.src.startsWith("data")){const[n,s]=t.src.split(U.e),r=(null===(e=this.feedStore)||void 0===e?void 0:e.fontCharacterCache.get(t.id))||"",o=decodeURIComponent(s),{textParams:h,distinctText:a}=(0,U.u)(r+o+i);if(r&&this.feedStore&&this.feedStore.fontCharacterCache.set(t.id,a),(i||r)&&(t.src=n+h),!a)return}try{2===this.C.environment&&this.Ca.parameters["font-loading"]?((0,y.US)(this.Ks,t,this.C.origins.FONTSERVICE),await this.Ks.fonts.load(`1em f-${t.id}`)):await y.Jv.loadFontFace(t,this.C.origins.FONTSERVICE)}catch(n){this.Ra("Could not load font",{font:t,originalError:n})}}Ra(t,i){this.Ca.emit(v.Error,{event:t,data:i})}Wa(t){return function(t,i){for(const e of t)(0,d.ir)(e)&&e.content.spans.length>1&&void 0!==e.assetId&&(e.font=bi(e.assetId,i))}(t.elements,this.Sa),function(t){return Object.assign(Object.assign({},t),{fill:(0,J.H0)(t.fill),elements:t.elements.map(yi)})}(t)}initDynamicPropertyElements(){var t;for(const i of this.I.elements)if((0,d.h6)(i)){const e=this.B.Pt(i.id);if(!e)return;this.Oa.set(i.id,{creativeElement:i,dataNode:e}),(0,d.A8)(i)&&(null===(t=this.renderer)||void 0===t||t.dynamicImageElementIds.add(i.id))}}}AC=r})();
//# sourceMappingURL=animated-creative.57c9f742c31085c040b9.js.map
return AC;})