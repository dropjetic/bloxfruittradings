<html lang="en"><head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Trade Board</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
.gradient-text {@apply bg-gradient-to-r from-purple-300 to-indigo-400 bg-clip-text text-transparent;}
.bg-grid-pattern {background-image:url("data:image/svg+xml,%3Csvg width='20' height='20' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 10h20M10 0v20' stroke='%23ffffff' stroke-width='0.5' opacity='0.1'/%3E%3C/svg%3E");}
.scrollbar-hide {-ms-overflow-style:none;scrollbar-width:none;}
.scrollbar-hide::-webkit-scrollbar{display:none;}
.tick {position:absolute;inset:0;background:rgba(0,0,0,0.4);display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s;}
.tick.show {opacity:1;}
.chat-bubble {max-width:75%;}
.notification-badge {position:absolute;top:-6px;right:-6px;background:#ef4444;color:white;font-size:10px;font-weight:bold;min-width:16px;height:16px;border-radius:50%;display:flex;align-items:center;justify-content:center;}
.mobile-menu {transition:transform .3s ease;}
.mobile-menu.open {transform:translateX(0);}
.gender-btn {transition:all .2s;}
.gender-btn.selected {border-color:#a855f7;transform:scale(1.05);}
.gender-btn img {filter:drop-shadow(0 0 8px rgba(168,85,247,0.4));}
</style>
<style>*, ::before, ::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;--tw-contain-size: ;--tw-contain-layout: ;--tw-contain-paint: ;--tw-contain-style: }/* ! tailwindcss v3.4.17 | MIT License | https://tailwindcss.com */*,::after,::before{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}::after,::before{--tw-content:''}:host,html{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;letter-spacing:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,input:where([type=button]),input:where([type=reset]),input:where([type=submit]){-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dd,dl,figure,h1,h2,h3,h4,h5,h6,hr,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}menu,ol,ul{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}[role=button],button{cursor:pointer}:disabled{cursor:default}audio,canvas,embed,iframe,img,object,svg,video{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]:where(:not([hidden=until-found])){display:none}.fixed{position:fixed}.absolute{position:absolute}.relative{position:relative}.inset-0{inset:0px}.inset-x-0{left:0px;right:0px}.-right-2{right:-0.5rem}.-top-1{top:-0.25rem}.bottom-2{bottom:0.5rem}.bottom-6{bottom:1.5rem}.left-0{left:0px}.left-1\/2{left:50%}.right-0{right:0px}.right-4{right:1rem}.right-6{right:1.5rem}.top-0{top:0px}.top-4{top:1rem}.top-full{top:100%}.bottom-0\.5{bottom:0.125rem}.left-1{left:0.25rem}.top-1{top:0.25rem}.z-10{z-index:10}.z-40{z-index:40}.z-50{z-index:50}.mx-auto{margin-left:auto;margin-right:auto}.my-8{margin-top:2rem;margin-bottom:2rem}.mb-2{margin-bottom:0.5rem}.mb-4{margin-bottom:1rem}.mb-6{margin-bottom:1.5rem}.ml-1{margin-left:0.25rem}.mt-1{margin-top:0.25rem}.mt-2{margin-top:0.5rem}.mt-4{margin-top:1rem}.mt-8{margin-top:2rem}.mb-1{margin-bottom:0.25rem}.block{display:block}.flex{display:flex}.inline-flex{display:inline-flex}.grid{display:grid}.hidden{display:none}.h-10{height:2.5rem}.h-3{height:0.75rem}.h-4{height:1rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.h-7{height:1.75rem}.h-8{height:2rem}.h-auto{height:auto}.h-full{height:100%}.h-12{height:3rem}.h-16{height:4rem}.h-1\.5{height:0.375rem}.h-2\.5{height:0.625rem}.h-\[100px\]{height:100px}.max-h-96{max-height:24rem}.max-h-full{max-height:100%}.min-h-10{min-height:2.5rem}.min-h-8{min-height:2rem}.min-h-screen{min-height:100vh}.w-10{width:2.5rem}.w-3{width:0.75rem}.w-4{width:1rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-7{width:1.75rem}.w-8{width:2rem}.w-\[90px\]{width:90px}.w-full{width:100%}.w-max{width:max-content}.w-12{width:3rem}.w-16{width:4rem}.w-1\.5{width:0.375rem}.w-2\.5{width:0.625rem}.w-\[75px\]{width:75px}.w-auto{width:auto}.min-w-10{min-width:2.5rem}.min-w-8{min-width:2rem}.max-w-4xl{max-width:56rem}.max-w-5xl{max-width:64rem}.max-w-7xl{max-width:80rem}.max-w-\[150px\]{max-width:150px}.max-w-max{max-width:max-content}.max-w-md{max-width:28rem}.max-w-full{max-width:100%}.flex-1{flex:1 1 0%}.shrink-0{flex-shrink:0}.-translate-x-1\/2{--tw-translate-x:-50%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.-translate-x-full{--tw-translate-x:-100%;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.cursor-pointer{cursor:pointer}.list-none{list-style-type:none}.grid-cols-2{grid-template-columns:repeat(2, minmax(0, 1fr))}.grid-cols-3{grid-template-columns:repeat(3, minmax(0, 1fr))}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-start{align-items:flex-start}.items-center{align-items:center}.justify-end{justify-content:flex-end}.justify-center{justify-content:center}.justify-between{justify-content:space-between}.gap-1{gap:0.25rem}.gap-2{gap:0.5rem}.gap-3{gap:0.75rem}.gap-4{gap:1rem}.gap-0\.5{gap:0.125rem}.space-x-2 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.5rem * var(--tw-space-x-reverse));margin-left:calc(0.5rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-4 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1rem * var(--tw-space-x-reverse));margin-left:calc(1rem * calc(1 - var(--tw-space-x-reverse)))}.space-x-5 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(1.25rem * var(--tw-space-x-reverse));margin-left:calc(1.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-2 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.5rem * var(--tw-space-y-reverse))}.space-y-3 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.75rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.75rem * var(--tw-space-y-reverse))}.space-y-4 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1rem * var(--tw-space-y-reverse))}.space-x-1 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.25rem * var(--tw-space-x-reverse));margin-left:calc(0.25rem * calc(1 - var(--tw-space-x-reverse)))}.space-y-0 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0px * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0px * var(--tw-space-y-reverse))}.overflow-hidden{overflow:hidden}.overflow-x-auto{overflow-x:auto}.overflow-y-auto{overflow-y:auto}.truncate{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.rounded-full{border-radius:9999px}.rounded-lg{border-radius:0.5rem}.rounded-md{border-radius:0.375rem}.rounded-xl{border-radius:0.75rem}.border{border-width:1px}.border-2{border-width:2px}.border-b{border-bottom-width:1px}.border-l{border-left-width:1px}.border-t{border-top-width:1px}.border-neutral-100{--tw-border-opacity:1;border-color:rgb(245 245 245 / var(--tw-border-opacity, 1))}.border-purple-500\/20{border-color:rgb(168 85 247 / 0.2)}.border-purple-500\/30{border-color:rgb(168 85 247 / 0.3)}.border-transparent{border-color:transparent}.border-white\/10{border-color:rgb(255 255 255 / 0.1)}.border-white\/20{border-color:rgb(255 255 255 / 0.2)}.border-purple-500\/10{border-color:rgb(168 85 247 / 0.1)}.bg-black\/40{background-color:rgb(0 0 0 / 0.4)}.bg-black\/70{background-color:rgb(0 0 0 / 0.7)}.bg-black\/80{background-color:rgb(0 0 0 / 0.8)}.bg-gray-700{--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.bg-gray-700\/50{background-color:rgb(55 65 81 / 0.5)}.bg-gray-800{--tw-bg-opacity:1;background-color:rgb(31 41 55 / var(--tw-bg-opacity, 1))}.bg-gray-800\/95{background-color:rgb(31 41 55 / 0.95)}.bg-gray-900{--tw-bg-opacity:1;background-color:rgb(17 24 39 / var(--tw-bg-opacity, 1))}.bg-purple-600{--tw-bg-opacity:1;background-color:rgb(147 51 234 / var(--tw-bg-opacity, 1))}.bg-transparent{background-color:transparent}.bg-gray-800\/50{background-color:rgb(31 41 55 / 0.5)}.bg-pink-400{--tw-bg-opacity:1;background-color:rgb(244 114 182 / var(--tw-bg-opacity, 1))}.bg-purple-500\/20{background-color:rgb(168 85 247 / 0.2)}.bg-purple-600\/80{background-color:rgb(147 51 234 / 0.8)}.bg-gradient-to-r{background-image:linear-gradient(to right, var(--tw-gradient-stops))}.bg-gradient-to-br{background-image:linear-gradient(to bottom right, var(--tw-gradient-stops))}.from-purple-400{--tw-gradient-from:#c084fc var(--tw-gradient-from-position);--tw-gradient-to:rgb(192 132 252 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-pink-400\/50{--tw-gradient-from:rgb(244 114 182 / 0.5) var(--tw-gradient-from-position);--tw-gradient-to:rgb(244 114 182 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.from-rose-400\/50{--tw-gradient-from:rgb(251 113 133 / 0.5) var(--tw-gradient-from-position);--tw-gradient-to:rgb(251 113 133 / 0) var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-from), var(--tw-gradient-to)}.to-pink-400{--tw-gradient-to:#f472b6 var(--tw-gradient-to-position)}.to-pink-600\/40{--tw-gradient-to:rgb(219 39 119 / 0.4) var(--tw-gradient-to-position)}.to-rose-600\/40{--tw-gradient-to:rgb(225 29 72 / 0.4) var(--tw-gradient-to-position)}.bg-clip-text{-webkit-background-clip:text;background-clip:text}.object-contain{object-fit:contain}.p-1\.5{padding:0.375rem}.p-2{padding:0.5rem}.p-3{padding:0.75rem}.p-4{padding:1rem}.p-6{padding:1.5rem}.p-0\.5{padding:0.125rem}.p-1{padding:0.25rem}.px-3{padding-left:0.75rem;padding-right:0.75rem}.px-4{padding-left:1rem;padding-right:1rem}.px-5{padding-left:1.25rem;padding-right:1.25rem}.py-1{padding-top:0.25rem;padding-bottom:0.25rem}.py-10{padding-top:2.5rem;padding-bottom:2.5rem}.py-2{padding-top:0.5rem;padding-bottom:0.5rem}.py-2\.5{padding-top:0.625rem;padding-bottom:0.625rem}.py-3{padding-top:0.75rem;padding-bottom:0.75rem}.px-1\.5{padding-left:0.375rem;padding-right:0.375rem}.py-0\.5{padding-top:0.125rem;padding-bottom:0.125rem}.pb-4{padding-bottom:1rem}.pt-16{padding-top:4rem}.pb-1{padding-bottom:0.25rem}.pt-1{padding-top:0.25rem}.text-left{text-align:left}.text-center{text-align:center}.text-2xl{font-size:1.5rem;line-height:2rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:0.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.text-xs{font-size:0.75rem;line-height:1rem}.text-\[9px\]{font-size:9px}.text-\[10px\]{font-size:10px}.font-bold{font-weight:700}.font-extrabold{font-weight:800}.font-medium{font-weight:500}.font-semibold{font-weight:600}.uppercase{text-transform:uppercase}.text-gray-400{--tw-text-opacity:1;color:rgb(156 163 175 / var(--tw-text-opacity, 1))}.text-neutral-400{--tw-text-opacity:1;color:rgb(163 163 163 / var(--tw-text-opacity, 1))}.text-neutral-500{--tw-text-opacity:1;color:rgb(115 115 115 / var(--tw-text-opacity, 1))}.text-purple-400{--tw-text-opacity:1;color:rgb(192 132 252 / var(--tw-text-opacity, 1))}.text-white{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.text-white\/70{color:rgb(255 255 255 / 0.7)}.text-green-400{--tw-text-opacity:1;color:rgb(74 222 128 / var(--tw-text-opacity, 1))}.text-amber-300{--tw-text-opacity:1;color:rgb(252 211 77 / var(--tw-text-opacity, 1))}.text-amber-400{--tw-text-opacity:1;color:rgb(251 191 36 / var(--tw-text-opacity, 1))}.text-purple-300{--tw-text-opacity:1;color:rgb(216 180 254 / var(--tw-text-opacity, 1))}.opacity-50{opacity:0.5}.opacity-10{opacity:0.1}.shadow-2xl{--tw-shadow:0 25px 50px -12px rgb(0 0 0 / 0.25);--tw-shadow-colored:0 25px 50px -12px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.drop-shadow-md{--tw-drop-shadow:drop-shadow(0 4px 3px rgb(0 0 0 / 0.07)) drop-shadow(0 2px 2px rgb(0 0 0 / 0.06));filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur{--tw-backdrop-blur:blur(8px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.backdrop-blur-md{--tw-backdrop-blur:blur(12px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition{transition-property:color, background-color, border-color, fill, stroke, opacity, box-shadow, transform, filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, opacity, box-shadow, transform, filter, backdrop-filter, -webkit-text-decoration-color, -webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-colors{transition-property:color, background-color, border-color, fill, stroke, -webkit-text-decoration-color;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-property:color, background-color, border-color, text-decoration-color, fill, stroke, -webkit-text-decoration-color;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.transition-transform{transition-property:transform;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.duration-200{transition-duration:200ms}.hover\:z-10:hover{z-index:10}.hover\:-translate-y-1:hover{--tw-translate-y:-0.25rem;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}.hover\:border-purple-500\/50:hover{border-color:rgb(168 85 247 / 0.5)}.hover\:bg-black\/60:hover{background-color:rgb(0 0 0 / 0.6)}.hover\:bg-purple-700:hover{--tw-bg-opacity:1;background-color:rgb(126 34 206 / var(--tw-bg-opacity, 1))}.hover\:bg-gray-700:hover{--tw-bg-opacity:1;background-color:rgb(55 65 81 / var(--tw-bg-opacity, 1))}.hover\:text-white:hover{--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.hover\:underline:hover{-webkit-text-decoration-line:underline;text-decoration-line:underline}.hover\:shadow-\[0_0_15px_rgba\(124\2c 58\2c 237\2c 0\.3\)\]:hover{--tw-shadow:0 0 15px rgba(124,58,237,0.3);--tw-shadow-colored:0 0 15px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.focus\:border-purple-500:focus{--tw-border-opacity:1;border-color:rgb(168 85 247 / var(--tw-border-opacity, 1))}.focus\:outline-none:focus{outline:2px solid transparent;outline-offset:2px}.disabled\:pointer-events-none:disabled{pointer-events:none}.disabled\:opacity-50:disabled{opacity:0.5}.group[data-state="open"] .group-data-\[state\=open\]\:rotate-180{--tw-rotate:180deg;transform:translate(var(--tw-translate-x), var(--tw-translate-y)) rotate(var(--tw-rotate)) skewX(var(--tw-skew-x)) skewY(var(--tw-skew-y)) scaleX(var(--tw-scale-x)) scaleY(var(--tw-scale-y))}@media (min-width: 640px){.sm\:h-\[120px\]{height:120px}.sm\:w-\[90px\]{width:90px}.sm\:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.sm\:space-y-1\.5 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(0.375rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(0.375rem * var(--tw-space-y-reverse))}}@media (min-width: 1024px){.lg\:bottom-8{bottom:2rem}.lg\:left-auto{left:auto}.lg\:right-0{right:0px}.lg\:right-8{right:2rem}.lg\:top-0{top:0px}.lg\:mx-0{margin-left:0px;margin-right:0px}.lg\:mt-0{margin-top:0px}.lg\:mt-2{margin-top:0.5rem}.lg\:mb-1\.5{margin-bottom:0.375rem}.lg\:mb-3{margin-bottom:0.75rem}.lg\:block{display:block}.lg\:hidden{display:none}.lg\:h-full{height:100%}.lg\:h-16{height:4rem}.lg\:h-20{height:5rem}.lg\:h-10{height:2.5rem}.lg\:h-3{height:0.75rem}.lg\:h-4{height:1rem}.lg\:h-8{height:2rem}.lg\:h-\[150px\]{height:150px}.lg\:w-96{width:24rem}.lg\:w-auto{width:auto}.lg\:w-16{width:4rem}.lg\:w-20{width:5rem}.lg\:w-10{width:2.5rem}.lg\:w-3{width:0.75rem}.lg\:w-4{width:1rem}.lg\:w-8{width:2rem}.lg\:w-\[120px\]{width:120px}.lg\:grid-cols-4{grid-template-columns:repeat(4, minmax(0, 1fr))}.lg\:flex-row{flex-direction:row}.lg\:items-start{align-items:flex-start}.lg\:justify-start{justify-content:flex-start}.lg\:gap-10{gap:2.5rem}.lg\:gap-3{gap:0.75rem}.lg\:gap-4{gap:1rem}.lg\:gap-2{gap:0.5rem}.lg\:space-y-6 > :not([hidden]) ~ :not([hidden]){--tw-space-y-reverse:0;margin-top:calc(1.5rem * calc(1 - var(--tw-space-y-reverse)));margin-bottom:calc(1.5rem * var(--tw-space-y-reverse))}.lg\:space-x-1\.5 > :not([hidden]) ~ :not([hidden]){--tw-space-x-reverse:0;margin-right:calc(0.375rem * var(--tw-space-x-reverse));margin-left:calc(0.375rem * calc(1 - var(--tw-space-x-reverse)))}.lg\:border-purple-500\/30{border-color:rgb(168 85 247 / 0.3)}.lg\:p-6{padding:1.5rem}.lg\:p-8{padding:2rem}.lg\:p-3{padding:0.75rem}.lg\:p-1\.5{padding:0.375rem}.lg\:p-4{padding:1rem}.lg\:px-6{padding-left:1.5rem;padding-right:1.5rem}.lg\:px-8{padding-left:2rem;padding-right:2rem}.lg\:py-20{padding-top:5rem;padding-bottom:5rem}.lg\:py-3{padding-top:0.75rem;padding-bottom:0.75rem}.lg\:py-4{padding-top:1rem;padding-bottom:1rem}.lg\:px-4{padding-left:1rem;padding-right:1rem}.lg\:py-1\.5{padding-top:0.375rem;padding-bottom:0.375rem}.lg\:pt-0{padding-top:0px}.lg\:text-left{text-align:left}.lg\:text-2xl{font-size:1.5rem;line-height:2rem}.lg\:text-lg{font-size:1.125rem;line-height:1.75rem}.lg\:text-sm{font-size:0.875rem;line-height:1.25rem}.lg\:text-\[10px\]{font-size:10px}.lg\:text-base{font-size:1rem;line-height:1.5rem}.lg\:text-xs{font-size:0.75rem;line-height:1rem}}@media (prefers-color-scheme: dark){.dark\:border-white\/\[0\.1\]{border-color:rgb(255 255 255 / 0.1)}}</style></head>
<body class="bg-gray-900 text-white min-h-screen flex flex-col" style="">

<div class="lg:hidden fixed top-0 left-0 right-0 bg-gray-800/95 backdrop-blur z-50 border-b border-purple-500/20">
  <div class="flex items-center justify-between p-3">
    <button id="mobileMenuBtn" class="p-2">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
    </button>
    <div class="flex items-center gap-3">
      <button id="mobileMsgBtn" class="relative p-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle h-6 w-6"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path></svg>
        <span id="mobileMsgBadge" class="notification-badge">5</span>
      </button>
      <img id="mobileAvatar" class="w-8 h-8 rounded-full" src="https://iili.io/KmAEH6g.webp">
    </div>
  </div>
</div>
<div id="mobileMenu" class="mobile-menu fixed inset-0 bg-gray-800/95 backdrop-blur z-40 -translate-x-full lg:hidden">
  <div class="p-4 border-b border-white/10 flex justify-between items-center">
    <h3 class="font-bold">Menu</h3>
    <button id="closeMobileMenu" class="text-white/70 hover:text-white">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
    </button>
  </div>
  <div class="p-4 space-y-4">
    <a href="https://bloxfruittrading.com/values" class="block p-3 rounded-lg bg-gray-700/50">Values</a>
    <a href="https://bloxfruittrading.com/calculator" class="block p-3 rounded-lg bg-gray-700/50">Calculator</a>
    <a href="https://bloxfruittrading.com/rate" class="block p-3 rounded-lg bg-gray-700/50">Reviews</a>
    <a href="https://bloxfruittrading.com/giveaways" class="block p-3 rounded-lg bg-gray-700/50">Stocks</a>
    <button id="mobileNewAccount" class="w-full p-3 rounded-lg bg-gray-700/50 text-left">New Account</button>
  </div>
</div>
<div class="hidden w-full lg:block"><div class="relative mx-auto flex w-full justify-between px-4 py-3 transition duration-200 rounded-full bg-transparent" style="width:100%;background:transparent;"><div class="flex w-full flex-row items-center justify-between"><div class="flex w-[90px] flex-row items-center gap-2"><div class="flex items-center justify-center" style="opacity:1;"><a href="https://bloxfruittrading.com/"><div style="width:40px;height:40px;"><img alt="logo" loading="lazy" width="48" height="48" decoding="async" class="min-w-10 min-h-10 w-full h-full object-contain" src="https://iili.io/KL1P0ib.gif" style="color:transparent;"></div></a></div><div class="flex items-center justify-center" style="opacity:1;transform:none;"><div class="relative z-50"><button class="group flex items-center gap-3 rounded-xl border border-border/60 bg-black/40 px-4 py-2.5 backdrop-blur-md transition-all hover:border-primary/50 hover:bg-black/60 hover:shadow-[0_0_15px_rgba(124,58,237,0.3)]" aria-expanded="false" aria-haspopup="true" tabindex="0" style="pointer-events:auto;"><div class="relative flex items-center gap-3"><div class="flex flex-col items-start"><span class="max-w-[150px] truncate text-base font-bold text-white">Blox Fruits</span><span class="text-xs text-neutral-400">Switch Game</span></div></div><div style="transform:none;"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-chevron-down ml-1 h-4 w-4 text-neutral-400"><path d="M6 9l6 6l6 -6"></path></svg></div></button></div></div></div><div class="flex flex-1 justify-center"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="relative z-10 flex max-w-max flex-1 items-center justify-center"><div style="position:relative;"><ul data-orientation="horizontal" class="group flex-1 list-none space-x-5 flex items-center justify-center" dir="ltr"><li><button id="radix-_r_5a_-trigger-radix-_r_5b_" data-state="closed" aria-expanded="false" aria-controls="radix-_r_5a_-content-radix-_r_5b_" class="group inline-flex w-max items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors hover:bg-foreground/5 hover:text-accent-foreground focus:bg-foreground/5 focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-foreground/5 data-[state=open]:bg-foreground/5 group" data-radix-collection-item=""><div class="flex flex-col items-center gap-2 py-1"><span class="flex h-10 w-8 items-center justify-center"><img src="./final ones_files/KL12OJt.png" alt="Icon" class="h-full w-full object-contain"></span><div class="flex items-center gap-1"><span class="text-xs font-medium">Trading</span><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-3 w-3 opacity-50 transition-transform duration-200 group-data-[state=open]:rotate-180" aria-hidden="true"><path d="m6 9 6 6 6-6"></path></svg></div></div></button></li><li><a target="_self" class="flex flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" data-radix-collection-item="" href="https://bloxfruittrading.com/values"><div class="relative"><span class="flex h-7 w-7 items-center justify-center"><svg width="31" height="30" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.6875 5.625H25.375V27.1875H4.75V5.625H9.4375V7.5H20.6875V5.625ZM8.5 15H21.625V13.125H8.5V15ZM8.5 22.5H21.625V20.625H8.5V22.5ZM11.3125 5.625V2.8125H18.8125V5.625H11.3125Z" fill="currentColor"></path></svg></span><div class="absolute -right-2 -top-1"></div></div><span class="text-xs font-medium">Values</span></a></li><li><a target="_self" class="flex flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" data-radix-collection-item="" href="https://bloxfruittrading.com/calculator"><div class="relative"><span class="flex h-7 w-7 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calculator" aria-hidden="true"><rect width="16" height="20" x="4" y="2" rx="2"></rect><line x1="8" x2="16" y1="6" y2="6"></line><line x1="16" x2="16" y1="14" y2="18"></line><path d="M16 10h.01"></path><path d="M12 10h.01"></path><path d="M8 10h.01"></path><path d="M12 14h.01"></path><path d="M8 14h.01"></path><path d="M12 18h.01"></path><path d="M8 18h.01"></path></svg></span><div class="absolute -right-2 -top-1"></div></div><span class="text-xs font-medium">Calculator</span></a></li><li><a target="_self" class="flex flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" data-radix-collection-item="" href="https://bloxfruittrading.com/rate"><div class="relative"><span class="flex h-7 w-7 items-center justify-center text-gray-400 text-lg">Stars</span><div class="absolute -right-2 -top-1"></div></div><span class="text-xs font-medium">Reviews</span></a></li><li><div class="flex cursor-pointer flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" data-radix-collection-item=""><div class="relative"><span class="flex h-7 w-7 items-center justify-center"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search h-5 w-5" aria-hidden="true"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg></span><div class="absolute -right-2 -top-1"></div></div><span class="text-xs font-medium">Search</span></div></li><li><a target="_self" class="flex flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" data-radix-collection-item="" href="https://bloxfruittrading.com/giveaways"><div class="relative"><span class="flex h-7 w-7 items-center justify-center text-gray-400 text-lg">Chart</span><div class="absolute -right-2 -top-1"></div></div><span class="text-xs font-medium">Stocks</span></a></li></ul></div><div class="absolute left-0 top-full flex justify-center"></div></nav></div><div class="flex items-center space-x-4"><a target="_blank" class="flex items-center justify-center rounded-full p-1.5 transition-colors hover:bg-accent/50" data-state="closed" href="https://bloxfruittrading.com/discord"><svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" preserveAspectRatio="xMidYMid" viewBox="0 -28.5 256 256" class="h-6 w-6"><path fill="#5865F2" d="M216.856 16.597A208.5 208.5 0 0 0 164.042 0c-2.275 4.113-4.933 9.645-6.766 14.046q-29.538-4.442-58.533 0c-1.832-4.4-4.55-9.933-6.846-14.046a207.8 207.8 0 0 0-52.855 16.638C5.618 67.147-3.443 116.4 1.087 164.956c22.169 16.555 43.653 26.612 64.775 33.193A161 161 0 0 0 79.735 175.3a136.4 136.4 0 0 1-21.846-10.632 109 109 0 0 0 5.356-4.237c42.122 19.702 87.89 19.702 129.51 0a132 132 0 0 0 5.355 4.237 136 136 0 0 1-21.886 10.653c4.006 8.02 8.638 15.67 13.873 22.848 21.142-6.58 42.646-16.637 64.815-33.213 5.316-56.288-9.08-105.09-38.056-148.36M85.474 135.095c-12.645 0-23.015-11.805-23.015-26.18s10.149-26.2 23.015-26.2 23.236 11.804 23.015 26.2c.02 14.375-10.148 26.18-23.015 26.18m85.051 0c-12.645 0-23.014-11.805-23.014-26.18s10.148-26.2 23.014-26.2c12.867 0 23.236 11.804 23.015 26.2 0 14.375-10.148 26.18-23.015 26.18"></path></svg></a><div class="relative"><button id="openMessagesBtn" class="flex items-center justify-center rounded-full p-1.5 transition-colors hover:bg-accent/50"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-message-circle h-6 w-6"><path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z"></path></svg><span id="msgBadge" class="notification-badge">5</span></button></div><div id="userInfo" class="items-center gap-3"><img id="userAvatar" class="w-10 h-10 rounded-full" src="https://iili.io/KmAEH6g.webp"><div class="flex flex-col"><span id="userName" class="font-semibold">User_x1drj</span><button id="newAccount" class="text-xs text-purple-400 hover:underline">New Account</button></div></div></div></div></div></div>
<main class="flex-1 flex pt-16 lg:pt-0">
<div class="flex-1 p-4 lg:p-8 overflow-y-auto">
<button id="postBtn" class="fixed bottom-6 right-6 z-40 lg:bottom-8 lg:right-8 px-5 py-3 lg:px-6 lg:py-4 bg-purple-600 rounded-full font-bold text-base lg:text-lg shadow-2xl hover:bg-purple-700">+ Post Trade</button>
<div id="trades" class="space-y-4 lg:space-y-6 max-w-5xl mx-auto"><div class="bg-gray-800/50 rounded-xl p-3 lg:p-4 border border-purple-500/20"><div class="flex items-center gap-2 lg:gap-3 mb-2 lg:mb-3"><img src="https://api.dicebear.com/7.x/avataaars/svg?seed=mht34kh0ui0vl88haxt" class="w-8 h-8 lg:w-10 lg:h-10 rounded-full"><div class="flex-1"><div class="font-semibold text-sm lg:text-base">User_0p4df</div><div class="text-xs text-gray-400">Posted just now</div></div><div class="flex items-center"><button class="bg-purple-600 hover:bg-purple-700 px-3 py-1 lg:px-4 lg:py-1.5 rounded-full text-xs lg:text-sm font-medium" onclick="openChat('mht34kh0ui0vl88haxt')">Message</button></div></div><div class="flex flex-row items-center space-x-1 space-y-0 sm:space-y-1.5 "><div class="flex-1 rounded-lg border border-purple-500/10 bg-background/30 p-1 lg:p-1.5"><h3 class="mb-1 text-xs lg:mb-1.5 lg:text-sm font-medium text-purple-300 flex items-center gap-1"><span class="gradient-text">Offering</span></h3><div class="scrollbar-hide flex space-x-1 lg:space-x-1.5 overflow-x-auto pt-1"><div class="group relative rounded-md border bg-gradient-to-br transition-transform hover:-translate-y-1 hover:z-10 from-pink-400/50 to-pink-600/40 p-0.5 border-purple-500/20 h-[100px] w-[75px] sm:h-[120px] sm:w-[90px] lg:h-[150px] lg:w-[120px] shrink-0"><div class="bg-grid-pattern absolute inset-0 opacity-10"></div><div class="relative z-10 flex h-full w-full flex-col"><div class="relative flex flex-1 items-center justify-center p-0.5"><img src="https://i.postimg.cc/gkzHzzjS/East-Dragon.png" alt="East Dragon" class="h-auto max-h-full w-auto max-w-full object-contain drop-shadow-md"><div class="absolute left-1 top-1"><span class="rounded-md px-1.5 py-0.5 text-[9px] lg:text-[10px] font-bold uppercase bg-purple-600/80 text-white">R</span></div></div><div class="flex flex-col items-center gap-0.5 pb-1"><div class="bg-black/80 backdrop-blur-md rounded-md border border-white/20 p-1"><div class="flex items-center gap-1 lg:gap-2"><div class="flex items-center gap-1"><svg class="h-2.5 w-2.5 lg:h-3 lg:w-3 text-amber-400" viewBox="0 0 512 512" fill="currentColor"><path d="M416 64H257.6L76.5 251.6c-8 8-12.3 18.5-12.5 29-.3 11.3 3.9 22.6 12.5 31.2l123.7 123.6c8 8 20.8 12.5 28.8 12.5s22.8-3.9 31.4-12.5L448 256V96l-32-32zm-30.7 102.7c-21.7 6.1-41.3-10-41.3-30.7 0-17.7 14.3-32 32-32 20.7 0 36.8 19.6 30.7 41.3-2.9 10.3-11.1 18.5-21.4 21.4z"></path></svg><span class="text-[10px] lg:text-xs font-bold text-amber-300">15M</span></div><div class="flex items-center gap-1"><svg class="lucide lucide-trending-up h-2.5 w-2.5 lg:h-3 lg:w-3 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg><span class="text-[10px] lg:text-xs font-bold text-white">10/10</span></div></div></div></div><div class="absolute inset-x-0 bottom-0.5 flex justify-center"><span class="rounded-full bg-pink-400 h-1.5 w-1.5"></span></div></div></div></div></div><div class="flex items-center justify-center"><div class="flex h-6 w-6 lg:h-8 lg:w-8 items-center justify-center rounded-full bg-purple-500/20 border border-purple-500/30"><svg class="lucide lucide-arrow-right h-3 w-3 lg:h-4 lg:w-4 text-purple-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></div></div><div class="flex-1 rounded-lg border border-purple-500/10 bg-background/30 p-1 lg:p-1.5"><h3 class="mb-1 text-xs lg:mb-1.5 lg:text-sm font-medium text-purple-300 flex items-center gap-1"><span class="gradient-text">Requesting</span></h3><div class="scrollbar-hide flex space-x-1 lg:space-x-1.5 overflow-x-auto pt-1"><div class="group relative rounded-md border bg-gradient-to-br transition-transform hover:-translate-y-1 hover:z-10 from-rose-400/50 to-rose-600/40 p-0.5 border-purple-500/20 h-[100px] w-[75px] sm:h-[120px] sm:w-[90px] lg:h-[150px] lg:w-[120px] shrink-0"><div class="bg-grid-pattern absolute inset-0 opacity-10"></div><div class="relative z-10 flex h-full w-full flex-col"><div class="relative flex flex-1 items-center justify-center p-0.5"><img src="https://i.postimg.cc/CLxbycr9/Kitsune.png" alt="Kitsune" class="h-auto max-h-full w-auto max-w-full object-contain drop-shadow-md"><div class="absolute left-1 top-1"><span class="rounded-md px-1.5 py-0.5 text-[9px] lg:text-[10px] font-bold uppercase bg-purple-600/80 text-white">R</span></div></div><div class="flex flex-col items-center gap-0.5 pb-1"><div class="bg-black/80 backdrop-blur-md rounded-md border border-white/20 p-1"><div class="flex items-center gap-1 lg:gap-2"><div class="flex items-center gap-1"><svg class="h-2.5 w-2.5 lg:h-3 lg:w-3 text-amber-400" viewBox="0 0 512 512" fill="currentColor"><path d="M416 64H257.6L76.5 251.6c-8 8-12.3 18.5-12.5 29-.3 11.3 3.9 22.6 12.5 31.2l123.7 123.6c8 8 20.8 12.5 28.8 12.5s22.8-3.9 31.4-12.5L448 256V96l-32-32zm-30.7 102.7c-21.7 6.1-41.3-10-41.3-30.7 0-17.7 14.3-32 32-32 20.7 0 36.8 19.6 30.7 41.3-2.9 10.3-11.1 18.5-21.4 21.4z"></path></svg><span class="text-[10px] lg:text-xs font-bold text-amber-300">8M</span></div><div class="flex items-center gap-1"><svg class="lucide lucide-trending-up h-2.5 w-2.5 lg:h-3 lg:w-3 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg><span class="text-[10px] lg:text-xs font-bold text-white">10/10</span></div></div></div></div><div class="absolute inset-x-0 bottom-0.5 flex justify-center"><span class="rounded-full bg-pink-400 h-1.5 w-1.5"></span></div></div></div></div></div></div></div><div class="bg-gray-800/50 rounded-xl p-3 lg:p-4 border border-purple-500/20"><div class="flex items-center gap-2 lg:gap-3 mb-2 lg:mb-3"><img src="https://api.dicebear.com/7.x/avataaars/svg?seed=mht32xg1dw60cw2mh9u" class="w-8 h-8 lg:w-10 lg:h-10 rounded-full"><div class="flex-1"><div class="font-semibold text-sm lg:text-base">User_pxea2</div><div class="text-xs text-gray-400">Posted just now</div></div><div class="flex items-center"><button class="bg-purple-600 hover:bg-purple-700 px-3 py-1 lg:px-4 lg:py-1.5 rounded-full text-xs lg:text-sm font-medium" onclick="openChat('mht32xg1dw60cw2mh9u')">Message</button></div></div><div class="flex flex-row items-center space-x-1 space-y-0 sm:space-y-1.5 "><div class="flex-1 rounded-lg border border-purple-500/10 bg-background/30 p-1 lg:p-1.5"><h3 class="mb-1 text-xs lg:mb-1.5 lg:text-sm font-medium text-purple-300 flex items-center gap-1"><span class="gradient-text">Offering</span></h3><div class="scrollbar-hide flex space-x-1 lg:space-x-1.5 overflow-x-auto pt-1"><div class="group relative rounded-md border bg-gradient-to-br transition-transform hover:-translate-y-1 hover:z-10 from-pink-400/50 to-pink-600/40 p-0.5 border-purple-500/20 h-[100px] w-[75px] sm:h-[120px] sm:w-[90px] lg:h-[150px] lg:w-[120px] shrink-0"><div class="bg-grid-pattern absolute inset-0 opacity-10"></div><div class="relative z-10 flex h-full w-full flex-col"><div class="relative flex flex-1 items-center justify-center p-0.5"><img src="https://i.postimg.cc/gkzHzzjS/East-Dragon.png" alt="East Dragon" class="h-auto max-h-full w-auto max-w-full object-contain drop-shadow-md"><div class="absolute left-1 top-1"><span class="rounded-md px-1.5 py-0.5 text-[9px] lg:text-[10px] font-bold uppercase bg-purple-600/80 text-white">R</span></div></div><div class="flex flex-col items-center gap-0.5 pb-1"><div class="bg-black/80 backdrop-blur-md rounded-md border border-white/20 p-1"><div class="flex items-center gap-1 lg:gap-2"><div class="flex items-center gap-1"><svg class="h-2.5 w-2.5 lg:h-3 lg:w-3 text-amber-400" viewBox="0 0 512 512" fill="currentColor"><path d="M416 64H257.6L76.5 251.6c-8 8-12.3 18.5-12.5 29-.3 11.3 3.9 22.6 12.5 31.2l123.7 123.6c8 8 20.8 12.5 28.8 12.5s22.8-3.9 31.4-12.5L448 256V96l-32-32zm-30.7 102.7c-21.7 6.1-41.3-10-41.3-30.7 0-17.7 14.3-32 32-32 20.7 0 36.8 19.6 30.7 41.3-2.9 10.3-11.1 18.5-21.4 21.4z"></path></svg><span class="text-[10px] lg:text-xs font-bold text-amber-300">15M</span></div><div class="flex items-center gap-1"><svg class="lucide lucide-trending-up h-2.5 w-2.5 lg:h-3 lg:w-3 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg><span class="text-[10px] lg:text-xs font-bold text-white">10/10</span></div></div></div></div><div class="absolute inset-x-0 bottom-0.5 flex justify-center"><span class="rounded-full bg-pink-400 h-1.5 w-1.5"></span></div></div></div></div></div><div class="flex items-center justify-center"><div class="flex h-6 w-6 lg:h-8 lg:w-8 items-center justify-center rounded-full bg-purple-500/20 border border-purple-500/30"><svg class="lucide lucide-arrow-right h-3 w-3 lg:h-4 lg:w-4 text-purple-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></div></div><div class="flex-1 rounded-lg border border-purple-500/10 bg-background/30 p-1 lg:p-1.5"><h3 class="mb-1 text-xs lg:mb-1.5 lg:text-sm font-medium text-purple-300 flex items-center gap-1"><span class="gradient-text">Requesting</span></h3><div class="scrollbar-hide flex space-x-1 lg:space-x-1.5 overflow-x-auto pt-1"><div class="group relative rounded-md border bg-gradient-to-br transition-transform hover:-translate-y-1 hover:z-10 from-rose-400/50 to-rose-600/40 p-0.5 border-purple-500/20 h-[100px] w-[75px] sm:h-[120px] sm:w-[90px] lg:h-[150px] lg:w-[120px] shrink-0"><div class="bg-grid-pattern absolute inset-0 opacity-10"></div><div class="relative z-10 flex h-full w-full flex-col"><div class="relative flex flex-1 items-center justify-center p-0.5"><img src="https://i.postimg.cc/CLxbycr9/Kitsune.png" alt="Kitsune" class="h-auto max-h-full w-auto max-w-full object-contain drop-shadow-md"><div class="absolute left-1 top-1"><span class="rounded-md px-1.5 py-0.5 text-[9px] lg:text-[10px] font-bold uppercase bg-purple-600/80 text-white">R</span></div></div><div class="flex flex-col items-center gap-0.5 pb-1"><div class="bg-black/80 backdrop-blur-md rounded-md border border-white/20 p-1"><div class="flex items-center gap-1 lg:gap-2"><div class="flex items-center gap-1"><svg class="h-2.5 w-2.5 lg:h-3 lg:w-3 text-amber-400" viewBox="0 0 512 512" fill="currentColor"><path d="M416 64H257.6L76.5 251.6c-8 8-12.3 18.5-12.5 29-.3 11.3 3.9 22.6 12.5 31.2l123.7 123.6c8 8 20.8 12.5 28.8 12.5s22.8-3.9 31.4-12.5L448 256V96l-32-32zm-30.7 102.7c-21.7 6.1-41.3-10-41.3-30.7 0-17.7 14.3-32 32-32 20.7 0 36.8 19.6 30.7 41.3-2.9 10.3-11.1 18.5-21.4 21.4z"></path></svg><span class="text-[10px] lg:text-xs font-bold text-amber-300">8M</span></div><div class="flex items-center gap-1"><svg class="lucide lucide-trending-up h-2.5 w-2.5 lg:h-3 lg:w-3 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg><span class="text-[10px] lg:text-xs font-bold text-white">10/10</span></div></div></div></div><div class="absolute inset-x-0 bottom-0.5 flex justify-center"><span class="rounded-full bg-pink-400 h-1.5 w-1.5"></span></div></div></div></div></div></div></div></div>
<div id="tradeModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/70 px-4 overflow-y-auto hidden">
  <div class="relative w-full max-w-4xl my-8 rounded-xl bg-gray-900 border border-purple-500/20 shadow-2xl">
    <button id="closeModal" class="absolute top-4 right-4 text-white/70 hover:text-white z-10">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
    </button>
    <div class="p-6 pb-4 border-b border-white/10">
      <h2 class="text-xl lg:text-2xl font-bold flex items-center gap-2"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.3-4.3"></path></svg> Create Trade</h2>
      <p class="text-sm text-gray-400 mt-1">Select items you're offering and requesting</p>
    </div>
    <div class="flex gap-2 lg:gap-3 p-4 border-b border-white/10">
      <button id="offeringTab" class="px-5 py-2.5 lg:px-6 lg:py-3 rounded-full bg-purple-600 font-semibold text-sm transition">Offering</button>
      <button id="requestingTab" class="px-5 py-2.5 lg:px-6 lg:py-3 rounded-full bg-gray-700 font-semibold text-sm transition">Requesting</button>
    </div>
    <div class="p-4">
      <input id="searchInput" type="text" placeholder="Search fruits..." class="w-full px-4 py-3 bg-gray-800 rounded-lg border border-white/20 focus:border-purple-500 outline-none">
    </div>
    <div id="itemGrid" class="grid grid-cols-3 sm:grid-cols-4 gap-3 lg:gap-4 p-4 lg:p-6 max-h-96 overflow-y-auto"><button data-name="West Dragon" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/7LfBxxs8/West-Dragon.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">West Dragon</span><span class="text-[9px] lg:text-[10px] text-gray-400">15M • 10/10</span></button><button data-name="East Dragon" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/gkzHzzjS/East-Dragon.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">East Dragon</span><span class="text-[9px] lg:text-[10px] text-gray-400">15M • 10/10</span></button><button data-name="Kitsune" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/CLxbycr9/Kitsune.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Kitsune</span><span class="text-[9px] lg:text-[10px] text-gray-400">8M • 10/10</span></button><button data-name="Yeti" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/mrJmk0Jc/Yeti.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Yeti</span><span class="text-[9px] lg:text-[10px] text-gray-400">5M • 10/10</span></button><button data-name="Gas" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/nzKqxgJf/Gas.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Gas</span><span class="text-[9px] lg:text-[10px] text-gray-400">3.2M • 8/10</span></button><button data-name="Leopard" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/rwdWsKkJ/Leopard.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Leopard</span><span class="text-[9px] lg:text-[10px] text-gray-400">5M • 10/10</span></button><button data-name="Lightning" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/MHTHLFZD/Rumble.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Lightning</span><span class="text-[9px] lg:text-[10px] text-gray-400">2.1M • 6/10</span></button><button data-name="Dough" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/wxckYyqR/Dough.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Dough</span><span class="text-[9px] lg:text-[10px] text-gray-400">2.8M • 10/10</span></button><button data-name="Pain" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/mk21srj7/Pain.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Pain</span><span class="text-[9px] lg:text-[10px] text-gray-400">2.3M • 6/10</span></button><button data-name="T-Rex" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/zGDtcwTf/T-Rex.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">T-Rex</span><span class="text-[9px] lg:text-[10px] text-gray-400">2.7M • 8/10</span></button><button data-name="Gravity" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/D02Lw6vJ/Gravity.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Gravity</span><span class="text-[9px] lg:text-[10px] text-gray-400">2.5M • 4/10</span></button><button data-name="Mammoth" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/sXJGqWYV/Mammoth.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Mammoth</span><span class="text-[9px] lg:text-[10px] text-gray-400">2.7M • 5/10</span></button><button data-name="Spirit" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/wTpbhYvL/Spirit.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Spirit</span><span class="text-[9px] lg:text-[10px] text-gray-400">3.4M • 6/10</span></button><button data-name="Control" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/9QNpg6Wx/Control.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Control</span><span class="text-[9px] lg:text-[10px] text-gray-400">3.2M • 5/10</span></button><button data-name="Venom" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/zGdtZLkF/Venom.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Venom</span><span class="text-[9px] lg:text-[10px] text-gray-400">3M • 6/10</span></button><button data-name="Shadow" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/kGpGPvBd/Shadow.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Shadow</span><span class="text-[9px] lg:text-[10px] text-gray-400">2.9M • 5/10</span></button><button data-name="Portal" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/DzkWz65v/Portal.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Portal</span><span class="text-[9px] lg:text-[10px] text-gray-400">1.9M • 10/10</span></button><button data-name="Buddha" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/02nZD6h1/Buddha.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Buddha</span><span class="text-[9px] lg:text-[10px] text-gray-400">1.2M • 10/10</span></button><button data-name="Blizzard" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/fTDBV72v/Blizzard.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Blizzard</span><span class="text-[9px] lg:text-[10px] text-gray-400">2.4M • 5/10</span></button><button data-name="Creation" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="https://i.postimg.cc/HLctq6nT/Creation.png" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick "><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">Creation</span><span class="text-[9px] lg:text-[10px] text-gray-400">1.4M • 3/10</span></button></div>
    <div class="flex justify-end gap-3 p-4 lg:p-6 border-t border-white/10">
      <button id="cancelPost" class="px-5 py-2.5 lg:px-6 lg:py-3 bg-gray-700 rounded-lg font-medium">Cancel</button>
      <button id="confirmPost" class="px-5 py-2.5 lg:px-6 lg:py-3 bg-purple-600 rounded-lg font-medium hover:bg-purple-700">Post Trade</button>
    </div>
  </div>
</div>
</div>
<div id="messagingPanel" class="hidden fixed inset-0 lg:right-0 lg:left-auto lg:top-0 lg:h-full lg:w-96 bg-gray-800 border-l lg:border-purple-500/30 shadow-2xl flex flex-col z-40">
  <div class="p-4 border-b border-white/10 flex items-center justify-between">
    <h3 class="font-bold text-lg">Messages</h3>
    <button id="closeChat" class="text-white/70 hover:text-white">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
    </button>
  </div>
  <div id="conversations" class="flex-1 overflow-y-auto p-2"><button onclick="openChat('mht32xg1dw60cw2mh9u')" class="w-full p-3 flex items-center gap-3 hover:bg-gray-700 rounded-lg transition"><img src="https://api.dicebear.com/7.x/avataaars/svg?seed=mht32xg1dw60cw2mh9u" class="w-10 h-10 rounded-full"><div class="flex-1 text-left"><div class="font-medium text-sm">User_pxea2</div><div class="text-xs text-gray-400 truncate">yes</div></div><span class="notification-badge text-xs">3</span></button><button onclick="openChat('mht34kh0ui0vl88haxt')" class="w-full p-3 flex items-center gap-3 hover:bg-gray-700 rounded-lg transition"><img src="https://api.dicebear.com/7.x/avataaars/svg?seed=mht34kh0ui0vl88haxt" class="w-10 h-10 rounded-full"><div class="flex-1 text-left"><div class="font-medium text-sm">User_0p4df</div><div class="text-xs text-gray-400 truncate">wanna trade</div></div><span class="notification-badge text-xs">2</span></button></div>
  <div id="chatArea" class="hidden flex-1 flex flex-col">
    <div class="p-3 border-b border-white/10 flex items-center gap-3">
      <img id="chatAvatar" class="w-10 h-10 rounded-full" src="">
      <div>
        <div id="chatUser" class="font-semibold"></div>
        <div class="text-xs text-gray-400">Trading with you</div>
      </div>
    </div>
    <div id="messages" class="flex-1 overflow-y-auto p-4 space-y-3"></div>
    <div class="p-3 border-t border-white/10 flex gap-2">
      <input id="msgInput" type="text" placeholder="Type a message..." class="flex-1 bg-gray-700 rounded-lg px-4 py-2 outline-none focus:border-purple-500 border border-transparent">
      <button id="sendMsg" class="bg-purple-600 hover:bg-purple-700 px-4 py-2 rounded-lg font-medium">Send</button>
    </div>
  </div>
</div>
</main>
<footer class="border-t border-neutral-100 dark:border-white/[0.1] px-4 lg:px-8 py-10 lg:py-20 bg-foreground/[3%] w-full relative overflow-hidden text-xs lg:text-sm"><div class="max-w-7xl mx-auto text-neutral-500 flex flex-col lg:flex-row justify-between items-center lg:items-start"><div class="text-center lg:text-left w-full lg:w-auto"><div class="flex mb-4 justify-center lg:justify-start"><a class="flex items-center space-x-2" href="https://bloxfruittrading.com/"><span class="bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text font-extrabold">Blox Fruit Trading</span></a></div><div class="mt-2 text-foreground/70">© 2025 Blox Fruit Trading All rights reserved.<br>All trademarks are property of their respective owners.</div><div class="mt-4 text-foreground/70 max-w-md mx-auto lg:mx-0">https://bloxfruittrading.com is a 3rd party website that is not affiliated or partnered with Blox Fruits. We are not endorsed by their respective owners.</div></div><div class="grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-10 mt-8 lg:mt-0 w-full lg:w-auto justify-center lg:justify-start"><div class="flex justify-center lg:justify-start space-y-3 flex-col text-center lg:text-left"><p class="text-foreground font-bold">Pages</p><ul class="text-foreground/70 list-none space-y-2"><li><a class="transition-colors hover:text-foreground" href="https://bloxfruittrading.com/">Home</a></li><li><a class="transition-colors hover:text-foreground" href="https://bloxfruittrading.com/trading">Trade</a></li><li><a class="transition-colors hover:text-foreground" href="https://bloxfruittrading.com/values">Values</a></li><li><a class="transition-colors hover:text-foreground" href="https://bloxfruittrading.com/donators">Top Donators</a></li></ul></div><div class="flex justify-center lg:justify-start space-y-3 flex-col text-center lg:text-left"><p class="text-foreground font-bold">Socials</p><ul class="text-foreground/70 list-none space-y-2"><li><a class="transition-colors hover:text-foreground" target="_blank" rel="noreferrer" href="https://discord.gg/bfhs">Discord</a></li><li><a class="transition-colors hover:text-foreground" target="_blank" rel="noreferrer" href="https://x.com/FlareTradings">X</a></li><li><a class="transition-colors hover:text-foreground" target="_blank" rel="noreferrer" href="https://youtube.com/@FlareFruitTrading">YouTube</a></li></ul></div><div class="flex justify-center lg:justify-start space-y-3 flex-col text-center lg:text-left"><p class="text-foreground font-bold">Legal</p><ul class="text-foreground/70 list-none space-y-2"><li><a class="transition-colors hover:text-foreground" href="https://bloxfruittrading.com/privacy-policy">Privacy Policy</a></li><li><a class="transition-colors hover:text-foreground" href="https://bloxfruittrading.com/terms-of-service">Terms of Service</a></li></ul></div><div class="flex justify-center lg:justify-start space-y-3 flex-col text-center lg:text-left"><p class="text-foreground font-bold">Support</p><ul class="text-foreground/70 list-none space-y-2"><li><a class="transition-colors hover:text-foreground" target="_blank" rel="noreferrer" href="https://discord.com/discovery/applications/878633004640124998">Discord Bot</a></li><li><a class="transition-colors hover:text-foreground" target="_blank" rel="noreferrer" href="https://bloxfruittrading/">FAQ</a></li><li><a class="transition-colors hover:text-foreground" target="_blank" rel="noreferrer" href="https://bloxfruittrading.com">Our games</a></li></ul></div></div></div></footer>
<script>
const API="https://dropjetic.pythonanywhere.com/trades";
const MSG_API="https://dropjetic.pythonanywhere.com/messages";
const fruits={"West Dragon":{beli:"15M",demand:"10/10",image:"https://i.postimg.cc/7LfBxxs8/West-Dragon.png"},"East Dragon":{beli:"15M",demand:"10/10",image:"https://i.postimg.cc/gkzHzzjS/East-Dragon.png"},"Kitsune":{beli:"8M",demand:"10/10",image:"https://i.postimg.cc/CLxbycr9/Kitsune.png"},"Yeti":{beli:"5M",demand:"10/10",image:"https://i.postimg.cc/mrJmk0Jc/Yeti.png"},"Gas":{beli:"3.2M",demand:"8/10",image:"https://i.postimg.cc/nzKqxgJf/Gas.png"},"Leopard":{beli:"5M",demand:"10/10",image:"https://i.postimg.cc/rwdWsKkJ/Leopard.png"},"Lightning":{beli:"2.1M",demand:"6/10",image:"https://i.postimg.cc/MHTHLFZD/Rumble.png"},"Dough":{beli:"2.8M",demand:"10/10",image:"https://i.postimg.cc/wxckYyqR/Dough.png"},"Pain":{beli:"2.3M",demand:"6/10",image:"https://i.postimg.cc/mk21srj7/Pain.png"},"T-Rex":{beli:"2.7M",demand:"8/10",image:"https://i.postimg.cc/zGDtcwTf/T-Rex.png"},"Gravity":{beli:"2.5M",demand:"4/10",image:"https://i.postimg.cc/D02Lw6vJ/Gravity.png"},"Mammoth":{beli:"2.7M",demand:"5/10",image:"https://i.postimg.cc/sXJGqWYV/Mammoth.png"},"Spirit":{beli:"3.4M",demand:"6/10",image:"https://i.postimg.cc/wTpbhYvL/Spirit.png"},"Control":{beli:"3.2M",demand:"5/10",image:"https://i.postimg.cc/9QNpg6Wx/Control.png"},"Venom":{beli:"3M",demand:"6/10",image:"https://i.postimg.cc/zGdtZLkF/Venom.png"},"Shadow":{beli:"2.9M",demand:"5/10",image:"https://i.postimg.cc/kGpGPvBd/Shadow.png"},"Portal":{beli:"1.9M",demand:"10/10",image:"https://i.postimg.cc/DzkWz65v/Portal.png"},"Buddha":{beli:"1.2M",demand:"10/10",image:"https://i.postimg.cc/02nZD6h1/Buddha.png"},"Blizzard":{beli:"2.4M",demand:"5/10",image:"https://i.postimg.cc/fTDBV72v/Blizzard.png"},"Creation":{beli:"1.4M",demand:"3/10",image:"https://i.postimg.cc/HLctq6nT/Creation.png"}};
let currentSide='offering';
let currentUser=null;
let currentChatWith=null;
let trades=[];
let conversationsMap=new Map();
let unreadCount=0;
const selectedOffering=new Set();
const selectedWanting=new Set();
const modal=document.getElementById('tradeModal');
const itemGrid=document.getElementById('itemGrid');
const searchInput=document.getElementById('searchInput');
const offeringTab=document.getElementById('offeringTab');
const requestingTab=document.getElementById('requestingTab');
const confirmPost=document.getElementById('confirmPost');
const messagingPanel=document.getElementById('messagingPanel');
const conversations=document.getElementById('conversations');
const chatArea=document.getElementById('chatArea');
const messages=document.getElementById('messages');
const msgInput=document.getElementById('msgInput');
const sendMsg=document.getElementById('sendMsg');
const chatAvatar=document.getElementById('chatAvatar');
const chatUser=document.getElementById('chatUser');
const closeChat=document.getElementById('closeChat');
const newAccountBtn=document.getElementById('newAccount');
const openMessagesBtn=document.getElementById('openMessagesBtn');
const msgBadge=document.getElementById('msgBadge');
const postBtn=document.getElementById('postBtn');
const mobileMenuBtn=document.getElementById('mobileMenuBtn');
const mobileMenu=document.getElementById('mobileMenu');
const closeMobileMenu=document.getElementById('closeMobileMenu');
const mobileMsgBtn=document.getElementById('mobileMsgBtn');
const mobileMsgBadge=document.getElementById('mobileMsgBadge');
const mobileAvatar=document.getElementById('mobileAvatar');
const mobileNewAccount=document.getElementById('mobileNewAccount');
const genderModal=document.getElementById('genderModal');
const maleBtn=document.getElementById('maleBtn');
const femaleBtn=document.getElementById('femaleBtn');
function generateUser(gender){const id=Date.now().toString(36)+Math.random().toString(36).substr(2);const username="User_"+Math.random().toString(36).substr(2,5);const avatar=gender==="male"?"https://iili.io/KmAE9MF.webp":"https://iili.io/KmAEH6g.webp";return{id,username,avatar,gender};}
function loadUser(){const saved=localStorage.getItem('bf_user');if(saved){currentUser=JSON.parse(saved);if(currentUser.gender)genderModal.remove();updateUserUI();}else{showGenderModal();}}
function showGenderModal(){genderModal.style.display='flex';}
function selectGender(gender){currentUser=generateUser(gender);localStorage.setItem('bf_user',JSON.stringify(currentUser));genderModal.remove();updateUserUI();loadTrades();loadAllConversations();}
maleBtn.onclick=()=>selectGender('male');
femaleBtn.onclick=()=>selectGender('female');
function updateUserUI(){document.getElementById('userAvatar').src=currentUser.avatar;document.getElementById('userName').textContent=currentUser.username;mobileAvatar.src=currentUser.avatar;}
function newAccount(){if(confirm("Create new account? This will clear your current session.")){localStorage.removeItem('bf_user');location.reload();}}
newAccountBtn.onclick=newAccount;mobileNewAccount.onclick=newAccount;
function itemHTML(name,data){const selected=currentSide==='offering'?selectedOffering.has(name):selectedWanting.has(name);return`<button data-name="${name}" class="relative group flex flex-col items-center p-2 lg:p-3 rounded-xl bg-gray-800/50 border border-white/10 hover:border-purple-500/50 transition"><div class="relative"><img src="${data.image}" class="w-16 h-16 lg:w-20 lg:h-20 object-contain"><div class="tick ${selected?'show':''}"><svg class="w-12 h-12 lg:w-16 lg:h-16 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"/></svg></div></div><span class="mt-1 lg:mt-2 text-xs font-medium truncate w-full text-center">${name}</span><span class="text-[9px] lg:text-[10px] text-gray-400">${data.beli} • ${data.demand}</span></button>`;}
function renderItems(){const term=searchInput.value.toLowerCase();const filtered=Object.entries(fruits).filter(([name])=>name.toLowerCase().includes(term));itemGrid.innerHTML=filtered.map(([name,data])=>itemHTML(name,data)).join('');}
function toggleItem(name){const set=currentSide==='offering'?selectedOffering:selectedWanting;set.has(name)?set.delete(name):set.add(name);renderItems();}
itemGrid.addEventListener('click',e=>{const btn=e.target.closest('button[data-name]');if(btn)toggleItem(btn.dataset.name);});
offeringTab.onclick=()=>{currentSide='offering';offeringTab.classList.replace('bg-gray-700','bg-purple-600');requestingTab.classList.replace('bg-purple-600','bg-gray-700');renderItems();};
requestingTab.onclick=()=>{currentSide='requesting';requestingTab.classList.replace('bg-gray-700','bg-purple-600');offeringTab.classList.replace('bg-purple-600','bg-gray-700');renderItems();};
searchInput.oninput=renderItems;
document.getElementById('postBtn').onclick=()=>{selectedOffering.clear();selectedWanting.clear();currentSide='offering';offeringTab.classList.replace('bg-gray-700','bg-purple-600');requestingTab.classList.replace('bg-purple-600','bg-gray-700');searchInput.value='';renderItems();modal.classList.remove('hidden');document.body.style.overflow='hidden';};
function closeModal(){modal.classList.add('hidden');document.body.style.overflow='';}
document.getElementById('closeModal').onclick=closeModal;
document.getElementById('cancelPost').onclick=closeModal;
confirmPost.onclick=async()=>{if(selectedOffering.size===0||selectedWanting.size===0){alert("Both Offering and Requesting must have at least one item!");return;}
const offering=Array.from(selectedOffering).map(name=>({name,img:fruits[name].image,value:fruits[name].beli,rate:fruits[name].demand}));
const wanting=Array.from(selectedWanting).map(name=>({name,img:fruits[name].image,value:fruits[name].beli,rate:fruits[name].demand}));
const trade={id:Date.now(),user:currentUser,offering,wanting,offerValue:offering.reduce((a,i)=>a+(parseFloat(i.value)||0),0)+"M",wantValue:wanting.reduce((a,i)=>a+(parseFloat(i.value)||0),0)+"M"};
try{const res=await fetch(API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(trade)});if(!res.ok)throw new Error();alert("Trade posted!");closeModal();loadTrades();}catch{alert("Failed to post trade.");}};
function itemHTMLCard(i,color="pink"){const grad=color==="rose"?"from-rose-400/50 to-rose-600/40":"from-pink-400/50 to-pink-600/40";return`<div class="group relative rounded-md border bg-gradient-to-br transition-transform hover:-translate-y-1 hover:z-10 ${grad} p-0.5 border-purple-500/20 h-[100px] w-[75px] sm:h-[120px] sm:w-[90px] lg:h-[150px] lg:w-[120px] shrink-0"><div class="bg-grid-pattern absolute inset-0 opacity-10"></div><div class="relative z-10 flex h-full w-full flex-col"><div class="relative flex flex-1 items-center justify-center p-0.5"><img src="${i.img}" alt="${i.name}" class="h-auto max-h-full w-auto max-w-full object-contain drop-shadow-md"><div class="absolute left-1 top-1"><span class="rounded-md px-1.5 py-0.5 text-[9px] lg:text-[10px] font-bold uppercase bg-purple-600/80 text-white">R</span></div></div><div class="flex flex-col items-center gap-0.5 pb-1"><div class="bg-black/80 backdrop-blur-md rounded-md border border-white/20 p-1"><div class="flex items-center gap-1 lg:gap-2"><div class="flex items-center gap-1"><svg class="h-2.5 w-2.5 lg:h-3 lg:w-3 text-amber-400" viewBox="0 0 512 512" fill="currentColor"><path d="M416 64H257.6L76.5 251.6c-8 8-12.3 18.5-12.5 29-.3 11.3 3.9 22.6 12.5 31.2l123.7 123.6c8 8 20.8 12.5 28.8 12.5s22.8-3.9 31.4-12.5L448 256V96l-32-32zm-30.7 102.7c-21.7 6.1-41.3-10-41.3-30.7 0-17.7 14.3-32 32-32 20.7 0 36.8 19.6 30.7 41.3-2.9 10.3-11.1 18.5-21.4 21.4z"></path></svg><span class="text-[10px] lg:text-xs font-bold text-amber-300">${i.value}</span></div><div class="flex items-center gap-1"><svg class="lucide lucide-trending-up h-2.5 w-2.5 lg:h-3 lg:w-3 text-white" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"></polyline><polyline points="16 7 22 7 22 13"></polyline></svg><span class="text-[10px] lg:text-xs font-bold text-white">${i.rate}</span></div></div></div></div><div class="absolute inset-x-0 bottom-0.5 flex justify-center"><span class="rounded-full bg-pink-400 h-1.5 w-1.5"></span></div></div></div>`;}
function renderTrade(t){const totalItems=t.offering.length+t.wanting.length;const scrollClass=totalItems>8?'max-h-32 lg:max-h-40 overflow-y-auto':'';const offerHTML=t.offering.map(i=>itemHTMLCard(i,"pink")).join('');const wantHTML=t.wanting.map(i=>itemHTMLCard(i,"rose")).join('');const isOwner=t.user.id===currentUser.id;const deleteBtn=isOwner?`<button onclick="deleteTrade(${t.id})" class="ml-2 p-1.5 bg-red-600/80 hover:bg-red-700 rounded-full"><svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg></button>`:'';return`<div class="bg-gray-800/50 rounded-xl p-3 lg:p-4 border border-purple-500/20"><div class="flex items-center gap-2 lg:gap-3 mb-2 lg:mb-3"><img src="${t.user.avatar}" class="w-8 h-8 lg:w-10 lg:h-10 rounded-full"><div class="flex-1"><div class="font-semibold text-sm lg:text-base">${t.user.username}</div><div class="text-xs text-gray-400">Posted just now</div></div><div class="flex items-center">${isOwner?'<span class="text-xs text-purple-400 mr-2">Your trade</span>':''}<button class="bg-purple-600 hover:bg-purple-700 px-3 py-1 lg:px-4 lg:py-1.5 rounded-full text-xs lg:text-sm font-medium" onclick="openChat('${t.user.id}')">Message</button>${deleteBtn}</div></div><div class="flex flex-row items-center space-x-1 space-y-0 sm:space-y-1.5 ${scrollClass}"><div class="flex-1 rounded-lg border border-purple-500/10 bg-background/30 p-1 lg:p-1.5"><h3 class="mb-1 text-xs lg:mb-1.5 lg:text-sm font-medium text-purple-300 flex items-center gap-1"><span class="gradient-text">Offering</span></h3><div class="scrollbar-hide flex space-x-1 lg:space-x-1.5 overflow-x-auto pt-1">${offerHTML}</div></div><div class="flex items-center justify-center"><div class="flex h-6 w-6 lg:h-8 lg:w-8 items-center justify-center rounded-full bg-purple-500/20 border border-purple-500/30"><svg class="lucide lucide-arrow-right h-3 w-3 lg:h-4 lg:w-4 text-purple-300" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M5 12h14"></path><path d="m12 5 7 7-7 7"></path></svg></div></div><div class="flex-1 rounded-lg border border-purple-500/10 bg-background/30 p-1 lg:p-1.5"><h3 class="mb-1 text-xs lg:mb-1.5 lg:text-sm font-medium text-purple-300 flex items-center gap-1"><span class="gradient-text">Requesting</span></h3><div class="scrollbar-hide flex space-x-1 lg:space-x-1.5 overflow-x-auto pt-1">${wantHTML}</div></div></div></div>`;}
async function deleteTrade(id){if(!confirm("Delete your trade?"))return;try{await fetch(`${API}/${id}`,{method:"DELETE"});loadTrades();}catch{alert("Failed to delete");}}
async function loadTrades(){try{const res=await fetch(API);if(!res.ok)throw new Error(`Server ${res.status}`);const data=await res.json();trades=data;document.getElementById("trades").innerHTML=data.length?data.map(renderTrade).join(""):"<p class='text-center text-gray-500'>No trades yet.</p>";loadAllConversations();}catch{document.getElementById("trades").innerHTML=`<div class="text-center p-6"><p class="text-red-400 mb-2">Unable to load trades</p><button onclick="loadTrades()" class="px-4 py-2 bg-purple-600 hover:bg-purple-700 rounded-lg text-sm font-medium">Try again</button></div>`;}}
async function loadAllConversations(){if(!currentUser)return;try{const res=await fetch(MSG_API);const allMsgs=await res.json();conversationsMap.clear();unreadCount=0;allMsgs.forEach(m=>{const other=m.from===currentUser.id?m.to:m.from;const key=[currentUser.id,other].sort().join('-');if(!conversationsMap.has(key)){conversationsMap.set(key,{userId:other,lastMsg:m.text,timestamp:m.timestamp,unread:0});}const conv=conversationsMap.get(key);if(m.from!==currentUser.id&&m.timestamp>conv.timestamp){conv.lastMsg=m.text;conv.timestamp=m.timestamp;conv.unread++;}else if(m.from!==currentUser.id){conv.unread++;}});unreadCount=Array.from(conversationsMap.values()).reduce((a,c)=>a+c.unread,0);updateBadge();renderConversations();}catch{}}
function renderConversations(){conversations.innerHTML='';if(conversationsMap.size===0){conversations.innerHTML="<p class='text-center text-gray-500 p-4'>No messages yet.</p>";return;}const sorted=[...conversationsMap.values()].sort((a,b)=>b.timestamp-a.timestamp);sorted.forEach(c=>{const tradeUser=trades.find(t=>t.user.id===c.userId)?.user||{username:"Unknown",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed="+c.userId};const unreadBadge=c.unread>0?`<span class="notification-badge text-xs">${c.unread}</span>`:'';conversations.innerHTML+=`<button onclick="openChat('${c.userId}')" class="w-full p-3 flex items-center gap-3 hover:bg-gray-700 rounded-lg transition"><img src="${tradeUser.avatar}" class="w-10 h-10 rounded-full"><div class="flex-1 text-left"><div class="font-medium text-sm">${tradeUser.username}</div><div class="text-xs text-gray-400 truncate">${c.lastMsg}</div></div>${unreadBadge}</button>`;});}
function updateBadge(){const count=unreadCount>99?'99+':unreadCount;if(unreadCount>0){msgBadge.textContent=count;msgBadge.classList.remove('hidden');mobileMsgBadge.textContent=count;mobileMsgBadge.classList.remove('hidden');}else{msgBadge.classList.add('hidden');mobileMsgBadge.classList.add('hidden');}}
function openChat(userId){currentChatWith=userId;messagingPanel.classList.remove('hidden');chatArea.classList.remove('hidden');conversations.classList.add('hidden');postBtn.classList.add('hidden');const tradeUser=trades.find(t=>t.user.id===userId)?.user||{username:"Unknown",avatar:"https://api.dicebear.com/7.x/avataaars/svg?seed="+userId};chatAvatar.src=tradeUser.avatar;chatUser.textContent=tradeUser.username;markAsRead(userId);loadMessages();}
function markAsRead(userId){const key=[currentUser.id,userId].sort().join('-');if(conversationsMap.has(key)){const conv=conversationsMap.get(key);unreadCount-=conv.unread;conv.unread=0;updateBadge();renderConversations();}}
function closeChatPanel(){messagingPanel.classList.add('hidden');currentChatWith=null;chatArea.classList.add('hidden');conversations.classList.remove('hidden');postBtn.classList.remove('hidden');}
closeChat.onclick=closeChatPanel;
openMessagesBtn.onclick=()=>{messagingPanel.classList.remove('hidden');conversations.classList.remove('hidden');chatArea.classList.add('hidden');postBtn.classList.add('hidden');loadAllConversations();}
mobileMsgBtn.onclick=openMessagesBtn.onclick;
mobileMenuBtn.onclick=()=>{mobileMenu.classList.add('open');};
closeMobileMenu.onclick=()=>{mobileMenu.classList.remove('open');};
async function loadMessages(){if(!currentChatWith)return;try{const res=await fetch(`${MSG_API}?user1=${currentUser.id}&user2=${currentChatWith}`);const msgs=await res.json();messages.innerHTML='';msgs.forEach(m=>{const isMe=m.from===currentUser.id;const bubble=`<div class="flex ${isMe?'justify-end':'justify-start'}"><div class="${isMe?'bg-purple-600 text-white':'bg-gray-700 text-white'} rounded-lg px-3 lg:px-4 py-2 chat-bubble text-sm">${m.text}</div></div>`;messages.innerHTML+=bubble;});messages.scrollTop=messages.scrollHeight;}catch{}}
sendMsg.onclick=async()=>{if(!msgInput.value.trim()|| !currentChatWith)return;const msg={from:currentUser.id,to:currentChatWith,text:msgInput.value.trim(),timestamp:Date.now()};try{await fetch(MSG_API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(msg)});msgInput.value='';loadMessages();loadAllConversations();}catch{alert("Failed to send");}};
msgInput.onkeydown=e=>{if(e.key==="Enter"){sendMsg.click();}};
window.openChat=openChat;
window.deleteTrade=deleteTrade;
loadUser();renderItems();
setInterval(()=>{if(currentChatWith)loadMessages();loadAllConversations();},3000);
</script>


</body></html>
