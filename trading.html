<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Blox Fruits Trading</title>
<script src="https://cdn.tailwindcss.com"></script>
<script src="/fruits.js"></script>
</head>
<body class="relative bg-black text-white">
<div class="absolute inset-0">
<div class="absolute inset-0 bg-gradient-to-b from-black via-neutral-950 to-black"></div>
<div class="absolute inset-0 bg-[radial-gradient(ellipse_at_center,rgba(120,119,198,0.06),transparent_70%)]"></div>
<div class="absolute inset-0 bg-[linear-gradient(to_right,rgba(255,255,255,0.04)_1px,transparent_1px),linear-gradient(to_bottom,rgba(255,255,255,0.04)_1px,transparent_1px)] bg-[size:32px_32px]"></div>
<div class="absolute bottom-0 left-0 right-0 h-16 bg-gradient-to-t from-black via-black/95 to-transparent"></div>
</div>
<div class="relative mx-auto flex w-full justify-between px-4 py-3 transition duration-200 rounded-full bg-transparent">
<div class="flex w-full flex-row items-center justify-between">
<div class="flex w-[90px] flex-row items-center gap-2">
<a href="/">
<img alt="logo" loading="lazy" width="48" height="48" class="min-w-10 min-h-10 w-full h-full object-contain" src="https://cdn.discordapp.com/attachments/1409125833108357130/1426495042909900871/ezgif-7c0ed28951c6ba.gif?ex=68fb4089&is=68f9ef09&hm=faff9e0a99f88d00d6ddb271d14ab12add14911c932c00e5f5d24be29ecdbea6">
</a>
<div class="relative z-50">
<button class="group flex items-center gap-3 rounded-xl border border-border/60 bg-black/40 px-4 py-2.5 backdrop-blur-md transition-all hover:border-primary/50 hover:bg-black/60 hover:shadow-[0_0_15px_rgba(124,58,237,0.3)]">
<div class="flex flex-col items-start">
<span class="max-w-[150px] truncate text-base font-bold text-white">Blox Fruits</span>
<span class="text-xs text-neutral-400">Switch Game</span>
</div>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="tabler-icon tabler-icon-chevron-down ml-1 h-4 w-4 text-neutral-400">
<path d="M6 9l6 6l6 -6"></path>
</svg>
</button>
</div>
</div>
<div class="flex flex-1 justify-center">
<nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="relative z-10 flex max-w-max flex-1 items-center justify-center">
<ul data-orientation="horizontal" class="group flex-1 list-none space-x-2 flex items-center justify-center" dir="ltr">
<li><button class="group inline-flex w-max items-center justify-center rounded-md px-4 py-2 text-sm font-medium transition-colors hover:bg-foreground/5 hover:text-accent-foreground focus:bg-foreground/5 focus:text-accent-foreground focus:outline-none" data-radix-collection-item="">
<div class="flex flex-col items-center gap-2 py-1">
<div class="relative">
<span class="flex h-7 w-7 items-center justify-center">
<svg width="31" height="24" viewBox="0 0 31 24" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M30.0625 7.00016L23.3958 0.333496V5.3335H11.7292V8.66683H23.3958V13.6668M6.72917 10.3335L0.0625 17.0002L6.72917 23.6668V18.6668H18.3958V15.3335H6.72917V10.3335Z" fill="currentColor"></path>
</svg>
</span>
<span class="absolute -right-2 -top-1 flex h-4 w-4 items-center justify-center rounded-full bg-primary text-[10px] font-medium text-primary-foreground">99+</span>
</div>
<div class="flex items-center gap-1">
<span class="text-xs font-medium">Trade Ads</span>
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-chevron-down h-3 w-3 opacity-50 transition-transform duration-200 group-data-[state=open]:rotate-180">
<path d="m6 9 6 6 6-6"></path>
</svg>
</div>
</div>
</button></li>
<li><a target="_self" class="flex flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" href="/values">
<div class="relative">
<span class="flex h-7 w-7 items-center justify-center">
<svg width="31" height="30" viewBox="0 0 31 30" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M20.6875 5.625H25.375V27.1875H4.75V5.625H9.4375V7.5H20.6875V5.625ZM8.5 15H21.625V13.125H8.5V15ZM8.5 22.5H21.625V20.625H8.5V22.5ZM11.3125 5.625V2.8125H18.8125V5.625H11.3125Z" fill="currentColor"></path>
</svg>
</span>
</div>
<span class="text-xs font-medium">Value List</span>
</a></li>
<li><a target="_self" class="flex flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" href="/calculator.html">
<div class="relative">
<span class="flex h-7 w-7 items-center justify-center">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-calculator">
<rect width="16" height="20" x="4" y="2" rx="2"></rect>
<line x1="8" x2="16" y1="6" y2="6"></line>
<line x1="16" x2="16" y1="14" y2="18"></line>
<path d="M16 10h.01"></path>
<path d="M12 10h.01"></path>
<path d="M8 10h.01"></path>
<path d="M12 14h.01"></path>
<path d="M8 14h.01"></path>
<path d="M12 18h.01"></path>
<path d="M8 18h.01"></path>
</svg>
</span>
</div>
<span class="text-xs font-medium">Calculator</span>
</a></li>
<li><a target="_self" class="flex flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" href="/rate">
<div class="relative">
<span class="flex h-7 w-7 items-center justify-center">
<img src="https://cdn.discordapp.com/attachments/1429567260246282280/1430685161447620719/istockphoto-1032803298-612x612-removebg-preview.png?ex=68fb55a3&is=68fa0423&hm=ae241b64a4624ac6abef2887cb368257be397fc3c4dd6ed176743ed60fbc0e9c&" alt="Community Logo" class="h-6 w-6 object-contain">
</span>
</div>
<span class="text-xs font-medium">Community</span>
</a></li>
<li><div class="flex cursor-pointer flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent">
<div class="relative">
<span class="flex h-7 w-7 items-center justify-center">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-search h-5 w-5">
<circle cx="11" cy="11" r="8"></circle>
<path d="m21 21-4.3-4.3"></path>
</svg>
</span>
</div>
<span class="text-xs font-medium">Search</span>
</div></li>
<li><a target="_self" class="flex flex-col items-center gap-2 rounded-lg px-3 py-1 text-sm transition-colors hover:bg-accent" href="/giveaways">
<div class="relative">
<span class="flex h-7 w-7 items-center justify-center">
<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gift h-6 w-6">
<rect x="3" y="8" width="18" height="4" rx="1"></rect>
<path d="M12 8v13"></path>
<path d="M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7"></path>
<path d="M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5"></path>
</svg>
</span>
</div>
<span class="text-xs font-medium">Giveaways</span>
</a></li>
</ul>
</nav>
</div>
<div class="flex items-center space-x-4">
<a target="_blank" class="flex items-center justify-center rounded-full p-1.5 transition-colors hover:bg-accent/50" href="https://discord.com/invite/bfhs">
<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800" preserveAspectRatio="xMidYMid" viewBox="0 -28.5 256 256" class="h-6 w-6">
<path fill="#5865F2" d="M216.856 16.597A208.5 208.5 0 0 0 164.042 0c-2.275 4.113-4.933 9.645-6.766 14.046q-29.538-4.442-58.533 0c-1.832-4.4-4.55-9.933-6.846-14.046a207.8 207.8 0 0 0-52.855 16.638C5.618 67.147-3.443 116.4 1.087 164.956c22.169 16.555 43.653 26.612 64.775 33.193A161 161 0 0 0 79.735 175.3a136.4 136.4 0 0 1-21.846-10.632 109 109 0 0 0 5.356-4.237c42.122 19.702 87.89 19.702 129.51 0a132 132 0 0 0 5.355 4.237 136 136 0 0 1-21.886 10.653c4.006 8.02 8.638 15.67 13.873 22.848 21.142-6.58 42.646-16.637 64.815-33.213 5.316-56.288-9.08-105.09-38.056-148.36M85.474 135.095c-12.645 0-23.015-11.805-23.015-26.18s10.149-26.2 23.015-26.2 23.236 11.804 23.015 26.2c.02 14.375-10.148 26.18-23.015 26.18m85.051 0c-12.645 0-23.014-11.805-23.014-26.18s10.148-26.2 23.014-26.2c12.867 0 23.236 11.804 23.015 26.2 0 14.375-10.148 26.18-23.015 26.18"></path>
</svg>
</a>
<button class="group rounded-full hover:-translate-y-0.5 active:scale-[0.98] bg-primary relative z-10 hover:bg-primary/90 border border-primary text-primary-foreground md:text-sm transition font-medium duration-200 flex items-center justify-center shadow-[0px_-1px_0px_0px_rgba(255,255,255,0.4)_inset,_0px_1px_0px_0px_rgba(255,255,255,0.4)_inset] px-6 py-2.5 text-base" onclick="showPostTrade()">Post Trade</button>
<a href="/login.html">
<button class="group rounded-full hover:-translate-y-0.5 active:scale-[0.98] bg-primary relative z-10 hover:bg-primary/90 border border-primary text-primary-foreground md:text-sm transition font-medium duration-200 flex items-center justify-center shadow-[0px_-1px_0px_0px_rgba(255,255,255,0.4)_inset,_0px_1px_0px_0px_rgba(255,255,255,0.4)_inset] px-6 py-2.5 text-base">Login</button>
</a>
</div>
</div>
</div>
<main class="relative z-10 container mx-auto px-4 py-8 min-h-screen flex items-center justify-center">
<div class="absolute inset-0 flex items-center justify-center text-4xl font-bold text-white" id="no-trades" style="display: none;">No Ads Available</div>
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 relative z-20" id="trades-list"></div>
<div class="hidden fixed inset-0 bg-black/50 flex items-center justify-center z-30" id="post-trade-modal">
<div class="bg-black/80 p-6 rounded-xl border border-white/20 w-full max-w-md relative">
<button class="absolute top-2 right-2 text-white" onclick="closePostTrade()">âœ•</button>
<div class="flex justify-between mb-4">
<button class="px-4 py-2 bg-primary text-primary-foreground rounded" id="offer-btn" onclick="switchMode('offer')">Your Offer</button>
<button class="px-4 py-2 bg-purple-500 text-white rounded" id="request-btn" onclick="switchMode('request')">Requesting</button>
</div>
<input type="text" id="fruit-search" class="w-full p-2 mb-4 bg-black/80 border border-white/20 rounded-md text-white" placeholder="Search for a fruit...">
<div class="max-h-40 overflow-y-auto mb-4" id="fruit-list"></div>
<div class="grid grid-cols-3 gap-2 mb-4" id="selected-fruits"></div>
<button class="w-full bg-primary p-2 rounded" onclick="submitTrade()">Submit</button>
</div>
</div>
</main>
<footer class="relative z-10 mt-auto py-12 bg-black/90 backdrop-blur-md border-t border-white/10">
<div class="max-w-7xl mx-auto px-6">
<div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-8 lg:gap-12">
<div class="flex flex-col items-center sm:items-start space-y-4">
<p class="text-xl font-bold text-white">Pages</p>
<ul class="text-neutral-300 list-none space-y-3">
<li><a class="hover:text-primary transition-colors" href="/">Home</a></li>
<li><a class="hover:text-primary transition-colors" href="/trading.html">Trade</a></li>
<li><a class="hover:text-primary transition-colors" href="/values">Values</a></li>
<li><a class="hover:text-primary transition-colors" href="/donators">Top Donators</a></li>
</ul>
</div>
<div class="flex flex-col items-center sm:items-start space-y-4">
<p class="text-xl font-bold text-white">Socials</p>
<ul class="text-neutral-300 list-none space-y-3">
<li><a class="hover:text-primary transition-colors" target="_blank" href="https://discord.gg/bfhs">Discord</a></li>
<li><a class="hover:text-primary transition-colors" target="_blank" href="https://x.com/FlareTradings">X</a></li>
<li><a class="hover:text-primary transition-colors" target="_blank" href="https://youtube.com/@">YouTube</a></li>
</ul>
</div>
<div class="flex flex-col items-center sm:items-start space-y-4">
<p class="text-xl font-bold text-white">Legal</p>
<ul class="text-neutral-300 list-none space-y-3">
<li><a class="hover:text-primary transition-colors" href="/privacy-policy">Privacy Policy</a></li>
<li><a class="hover:text-primary transition-colors" href="/terms-of-service">Terms of Service</a></li>
</ul>
</div>
<div class="flex flex-col items-center sm:items-start space-y-4">
<p class="text-xl font-bold text-white">Support</p>
<ul class="text-neutral-300 list-none space-y-3">
<li><a class="hover:text-primary transition-colors" target="_blank" href="https://discord.com/oauth2/authorize?client_id=1409137207964598344&permissions=8935008880848&integration_type=0&scope=bot">Discord Bot</a></li>
<li><a class="hover:text-primary transition-colors" target="_blank" href="https://FlareTrading.gg/#faq">FAQ</a></li>
<li><a class="hover:text-primary transition-colors" target="_blank" href="https://FlareTrading.gg/#our-games">Our Games</a></li>
</ul>
</div>
</div>
<div class="mt-12 text-center text-neutral-400 text-sm">
<p>&copy; 2025 FlareTrading. All rights reserved.</p>
</div>
</div>
</footer>
<script>
const fruitImages = {
  'Blade': 'Blade.webp',
  'Blizzard': 'Blizzard.webp',
  'Bomb': 'Bomb.webp',
  'Buddha': 'Buddha.webp',
  'Control': 'Control.webp',
  'Creation': 'Creation.webp',
  'Dark': 'Dark.webp',
  'Diamond': 'Diamond.webp',
  'Dough': 'Dough.webp',
  'Eagle': 'Eagle.webp',
  'East Dragon': 'East-Dragon.webp',
  'Emerald': 'Emerald.webp',
  'Flame': 'Flame.webp',
  'Gas': 'Gas.webp',
  'Ghost': 'Ghost.webp',
  'Gravity': 'Gravity.webp',
  'Green Lightning': 'Green-Lightning.webp',
  'Ice': 'Ice.webp',
  'Kitsune': 'Kitsune.webp',
  'Leopard': 'Leopard.webp',
  'Love': 'Love.webp',
  'Magma': 'Magma.webp',
  'Mammoth': 'Mammoth.webp',
  'Pain': 'Pain.webp',
  'Parrot': 'Parrot.webp',
  'Permanent Dragon Token': 'Permanent-Dragon-Token.webp',
  'Phoenix': 'Phoenix.webp',
  'Portal': 'Portal.webp',
  'Purple Lightning': 'Purple-Lightning.webp',
  'Quake': 'Quake.webp',
  'Rocket': 'Rocket.webp',
  'Rose Quartz': 'Rose-Quartz.webp',
  'Rubber': 'Rubber.webp',
  'Ruby': 'Ruby.webp',
  'Rumble': 'Rumble.webp',
  'Sand': 'Sand.webp',
  'Shadow': 'Shadow.webp',
  'Smoke': 'Smoke.webp',
  'Sound': 'Sound.webp',
  'Spider': 'Spider.webp',
  'Spike': 'Spike.webp',
  'Spin': 'Spin.webp',
  'Spirit': 'Spirit.webp',
  'Spring': 'Spring.webp',
  'T-Rex': 'T-RexFruit.svg',
  'Topaz': 'Topaz.webp',
  'Venom': 'Venom.webp',
  'West Dragon': 'West-Dragon.webp',
  'Yellow Lightning': 'Yellow-Lightning.webp',
  'Yeti': 'Yeti.webp'
};
let selectedOffers = [];
let selectedRequests = [];
let mode = 'offer';
async function loadTrades() {
  const res = await fetch('/api/trades');
  const trades = await res.json();
  const list = document.getElementById('trades-list');
  const noTrades = document.getElementById('no-trades');
  list.innerHTML = '';
  if (trades.length === 0) {
    noTrades.style.display = 'block';
    return;
  }
  noTrades.style.display = 'none';
  trades.forEach(trade => {
    const card = document.createElement('div');
    card.classList.add('bg-black/60', 'rounded-xl', 'p-4', 'border', 'border-gray-700');
    card.innerHTML = `
      <div class="flex justify-between items-center mb-2">
        <span class="font-bold text-lg">${trade.username}</span>
        <span class="text-gray-400 text-sm">${new Date(trade.createdAt).toLocaleString()}</span>
      </div>
      <div class="text-sm font-semibold mb-1">Offers</div>
      <div class="flex flex-wrap gap-2 mb-2">${trade.offers.map(o => `<div class="flex flex-col items-center"><img src="${fruitImages[o.trim()] || 'placeholder.webp'}" class="w-12 h-12 object-contain" alt="${o}"><span class="text-xs text-white mt-1">${o}</span></div>`).join('')}</div>
      <div class="text-sm font-semibold mb-1">Requests</div>
      <div class="flex flex-wrap gap-2 mb-2">${trade.requests.map(r => `<div class="flex flex-col items-center"><img src="${fruitImages[r.trim()] || 'placeholder.webp'}" class="w-12 h-12 object-contain" alt="${r}"><span class="text-xs text-white mt-1">${r}</span></div>`).join('')}</div>
      <button class="bg-primary p-2 rounded mr-2" onclick="inspectTrade(${JSON.stringify(trade)})">Inspect</button>
      <button class="bg-purple-500 p-2 rounded" onclick="contactUser('${trade.userId}')">Contact</button>
    `;
    list.appendChild(card);
  });
}
function showPostTrade() {
  document.getElementById('post-trade-modal').classList.remove('hidden');
  populateFruitList('');
}
function closePostTrade() {
  document.getElementById('post-trade-modal').classList.add('hidden');
  selectedOffers = [];
  selectedRequests = [];
  mode = 'offer';
  document.getElementById('offer-btn').classList.add('bg-primary', 'text-primary-foreground');
  document.getElementById('offer-btn').classList.remove('bg-gray-600');
  document.getElementById('request-btn').classList.add('bg-purple-500', 'text-white');
  document.getElementById('request-btn').classList.remove('bg-gray-600');
  document.getElementById('fruit-search').value = '';
  populateFruitList('');
  updateSelectedFruits();
}
function switchMode(newMode) {
  mode = newMode;
  document.getElementById('offer-btn').classList.toggle('bg-primary', mode === 'offer');
  document.getElementById('offer-btn').classList.toggle('text-primary-foreground', mode === 'offer');
  document.getElementById('offer-btn').classList.toggle('bg-gray-600', mode !== 'offer');
  document.getElementById('request-btn').classList.toggle('bg-purple-500', mode === 'request');
  document.getElementById('request-btn').classList.toggle('text-white', mode === 'request');
  document.getElementById('request-btn').classList.toggle('bg-gray-600', mode !== 'request');
  updateSelectedFruits();
}
function populateFruitList(search) {
  const fruitList = document.getElementById('fruit-list');
  fruitList.innerHTML = '';
  Object.keys(fruitImages).filter(f => f.toLowerCase().includes(search.toLowerCase())).forEach(fruit => {
    const div = document.createElement('div');
    div.classList.add('flex', 'items-center', 'gap-2', 'p-2', 'hover:bg-gray-700', 'cursor-pointer');
    div.innerHTML = `<img src="${fruitImages[fruit]}" class="w-8 h-8 object-contain" alt="${fruit}"><span>${fruit}</span>`;
    div.onclick = () => addFruit(fruit);
    fruitList.appendChild(div);
  });
}
function addFruit(fruit) {
  if (mode === 'offer' && !selectedOffers.includes(fruit)) selectedOffers.push(fruit);
  if (mode === 'request' && !selectedRequests.includes(fruit)) selectedRequests.push(fruit);
  updateSelectedFruits();
}
function removeFruit(fruit, type) {
  if (type === 'offer') selectedOffers = selectedOffers.filter(f => f !== fruit);
  if (type === 'request') selectedRequests = selectedRequests.filter(f => f !== fruit);
  updateSelectedFruits();
}
function updateSelectedFruits() {
  const selectedFruits = document.getElementById('selected-fruits');
  selectedFruits.innerHTML = '';
  const fruits = mode === 'offer' ? selectedOffers : selectedRequests;
  fruits.forEach(fruit => {
    const div = document.createElement('div');
    div.classList.add('flex', 'flex-col', 'items-center', 'relative');
    div.innerHTML = `
      <img src="${fruitImages[fruit]}" class="w-12 h-12 object-contain" alt="${fruit}">
      <span class="text-xs text-white mt-1">${fruit}</span>
      <button class="absolute top-0 right-0 bg-red-500 text-white rounded-full w-4 h-4 flex items-center justify-center text-xs" onclick="removeFruit('${fruit}', '${mode}')">âœ•</button>
    `;
    selectedFruits.appendChild(div);
  });
}
async function submitTrade() {
  if (selectedOffers.length === 0 || selectedRequests.length === 0) {
    alert('Please add at least one offer and one request.');
    return;
  }
  const res = await fetch('/api/trades', { method: 'POST', headers: {'Content-Type': 'application/json'}, body: JSON.stringify({offers: selectedOffers, requests: selectedRequests}) });
  const data = await res.json();
  if (data.success) {
    loadTrades();
    closePostTrade();
  } else {
    alert(data.message);
  }
}
function inspectTrade(trade) {
  const offerValue = trade.offers.reduce((sum, f) => sum + (fruits[f.trim()]?.value || 0), 0);
  const requestValue = trade.requests.reduce((sum, f) => sum + (fruits[f.trim()]?.value || 0), 0);
  let result = 'Fair';
  if (offerValue < requestValue) result = 'W for you';
  if (offerValue > requestValue) result = 'L for you';
  alert(`Offer Value: ${offerValue}\nRequest Value: ${requestValue}\n${result}`);
}
function contactUser(userId) {
  window.location.href = `/messages/${userId}`;
}
document.getElementById('fruit-search').addEventListener('input', e => populateFruitList(e.target.value));
loadTrades();
</script>
</body>
</html>
