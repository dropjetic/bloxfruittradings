(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6397],{9834:(e,t,r)=>{"use strict";r.d(t,{GagWeatherProvider:()=>D});var n=r(84453),a=r(49921),s=r(39855),l=r(75412),i=r(64182),c=r(47312),u=r(69728),o=r(92137),d=r(86959),m=r(99133),h=r(19038),v=r(77783),x=r(85314),f=r(89192),w=r(16885),p=r(30450),g=r(46109),b=r(33122);let j={rain:u.A,snow:o.A,thunderstorm:d.A,meteorshower:m.A,frost:h.A,bloodnight:d.A,disco:m.A,jandelstorm:u.A,blackhole:v.A},N={rain:"Rain",snow:"Snow",thunderstorm:"Thunderstorm",meteorshower:"Meteor Shower",frost:"Frost",bloodnight:"Blood Night",disco:"Disco",jandelstorm:"Jandel Storm",blackhole:"Black Hole"};function D(){let e=(0,s.useRouter)(),t=(0,l.lZ)(),[r,u]=(0,a.useState)(null),[o,d]=(0,a.useState)(100),[m,h]=(0,a.useState)(!1),[D,k]=(0,a.useState)(null),[y,T]=(0,a.useState)(null),C=(0,a.useRef)(void 0),S=(0,a.useRef)(void 0),A=(0,a.useRef)(100),I=(0,a.useRef)(Date.now()),E=(0,a.useRef)(1e4),P=(0,a.useRef)(Date.now()+1e4),O=e=>{u(e),d(100),C.current&&clearInterval(C.current),S.current&&clearTimeout(S.current);C.current=setInterval(()=>{m||d(e=>{let t=e-.5;return t<=0?(C.current&&clearInterval(C.current),u(null),0):t})},50),S.current=setTimeout(()=>{m||u(null)},1e4)},{data:R}=g.n.weather.subscribe.useSubscription(void 0,{onData:e=>{if(console.log("Weather update received:",e),"gag"===e.game){let t=e.weather;if(k(t),Object.values(t).filter(e=>e.active).length>1)if(y){let e=Object.entries(t).filter(e=>{var t,r;let[n,a]=e;return a.active&&(!(null==(t=y[n])?void 0:t.active)||(null==(r=y[n])?void 0:r.active)!==a.active)}).map(e=>{let[t]=e;return t});if(e.length>0){let r=e.map(e=>{var r,n;return"".concat(N[e]," started at ").concat(new Date(null!=(n=null==(r=t[e])?void 0:r.timestamp)?n:Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}).join(", ");O("\uD83C\uDF24️ New Weather Alert: ".concat(r))}}else{let e=Object.entries(t).filter(e=>{let[t,r]=e;return r.active}).map(e=>{let[t]=e;return t});if(e.length>0){let r=e.map(e=>{var r,n;return"".concat(N[e]," started at ").concat(new Date(null!=(n=null==(r=t[e])?void 0:r.timestamp)?n:Date.now()).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))}).join(", ");O("\uD83C\uDF24️ Current Weather: ".concat(r))}}T(t)}},onError:e=>{console.error("Weather subscription error:",e)}});return(0,a.useEffect)(()=>{if("Gag"===t.gameType)return()=>{C.current&&clearInterval(C.current),S.current&&clearTimeout(S.current)}},[e,t.gameType,m]),(0,a.useEffect)(()=>{if(r)return d(100),A.current=100,I.current=Date.now(),E.current=1e4,P.current=Date.now()+1e4,C.current&&clearInterval(C.current),S.current&&clearTimeout(S.current),m||(C.current=setInterval(()=>{d(e=>{let t=Date.now()-I.current;return 100-(1e4-E.current+t)/1e4*100>=100?(C.current&&clearInterval(C.current),u(null),0):100-(P.current-Date.now())/1e4*100})},50),S.current=setTimeout(()=>{u(null)},1e4)),()=>{C.current&&clearInterval(C.current),S.current&&clearTimeout(S.current)}},[r,m]),(0,a.useEffect)(()=>{r&&(m?(E.current=P.current-Date.now(),A.current=o,C.current&&clearInterval(C.current),S.current&&clearTimeout(S.current)):(P.current=Date.now()+E.current,I.current=Date.now(),d(A.current),C.current&&clearInterval(C.current),S.current&&clearTimeout(S.current),C.current=setInterval(()=>{d(e=>{let t=Date.now()-I.current;return A.current+t/1e4*100>=100?(C.current&&clearInterval(C.current),u(null),0):100-(P.current-Date.now())/1e4*100})},50),S.current=setTimeout(()=>{u(null)},E.current>0?E.current:0)))},[m]),(0,n.jsx)(i.N,{children:r&&D&&Object.values(D).filter(e=>e.active).length>1&&(0,n.jsxs)(c.P.div,{initial:{opacity:0,y:-20,x:20},animate:{opacity:1,y:0,x:0},exit:{opacity:0,y:-20,x:20},transition:{type:"spring",stiffness:300,damping:30},onMouseEnter:()=>h(!0),onMouseLeave:()=>h(!1),className:"fixed z-[100] w-80 max-w-[95vw] sm:w-80 sm:max-w-xs right-2 sm:right-4 lg:right-[400px] overflow-hidden rounded-lg border border-white/10 bg-background/95 shadow-lg backdrop-blur-sm",style:{top:"".concat((0,b.h)().getNotificationOffset("weather"),"px")},children:[(0,n.jsxs)("div",{className:"relative p-3 sm:p-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between gap-2 sm:gap-4 mb-1",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)(v.A,{className:"h-4 w-4 text-primary"}),(0,n.jsx)("span",{className:"text-sm sm:text-base font-bold",children:"\uD83C\uDF24️ Current Weather"})]}),(0,n.jsx)(w.$,{variant:"ghost",size:"icon",className:"h-6 w-6 rounded-full hover:bg-white/10",onClick:()=>u(null),children:(0,n.jsx)(x.A,{className:"h-3 w-3"})})]}),D&&(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsx)("div",{className:"text-xs text-muted-foreground font-semibold mb-1",children:"Active Events:"}),(0,n.jsx)("div",{className:"flex flex-col gap-1",children:Object.entries(D).filter(e=>{let[t,r]=e;return r.active}).map(e=>{let[t,r]=e,a=j[t];return(0,n.jsxs)("div",{className:"flex items-center gap-2 rounded bg-card/80 px-2 py-1 border border-border",children:[(0,n.jsx)(a,{className:"h-4 w-4 text-primary"}),(0,n.jsxs)("span",{className:"font-medium text-sm",children:[{rain:"\uD83C\uDF27️",snow:"❄️",thunderstorm:"⛈️",meteorshower:"☄️",frost:"\uD83E\uDD76",bloodnight:"\uD83E\uDE78",disco:"\uD83E\uDEA9",jandelstorm:"\uD83C\uDF2A️",blackhole:"\uD83D\uDD73️"}[t]," ",N[t]]}),(0,n.jsxs)("span",{className:"ml-auto text-[11px] text-muted-foreground",children:["Started at ",new Date(r.timestamp).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]},t)})})]}),(0,n.jsx)("div",{className:"mt-2 sm:mt-3 flex items-center gap-2",children:(0,n.jsx)(w.$,{variant:"secondary",size:"sm",className:"h-7 text-[11px] sm:text-xs px-2 sm:px-3",onClick:()=>{e.push("/stocks?page=weather"),setTimeout(()=>u(null),300)},children:"\uD83D\uDD0D View Weather"})}),(0,n.jsxs)("div",{className:"mt-2 text-[10px] text-muted-foreground",children:["⏱️ Notification will dismiss in ",Math.ceil(o/100*10),"s"]})]}),(0,n.jsx)(f.k,{value:o,className:(0,p.cn)("h-1 w-full rounded-none transition-all duration-300",m?"opacity-0":"opacity-100")})]})})}},33122:(e,t,r)=>{"use strict";r.d(t,{NotificationProvider:()=>l,h:()=>i});var n=r(84453),a=r(49921);let s=(0,a.createContext)(null);function l(e){let{children:t}=e,[r,l]=(0,a.useState)({stock:0,weather:0}),i=(0,a.useCallback)(e=>(l(t=>{let r=t[e]+1;return{...t,[e]:r}}),r[e]),[r]),c=(0,a.useCallback)(e=>{l(t=>{let r=Math.max(0,t[e]-1);return{...t,[e]:r}})},[]),u=(0,a.useCallback)(e=>20+(r[e]+ +("weather"!==e))*16,[r]);return(0,n.jsx)(s.Provider,{value:{registerNotification:i,unregisterNotification:c,getNotificationOffset:u},children:t})}function i(){let e=(0,a.useContext)(s);if(!e)throw Error("useNotification must be used within a NotificationProvider");return e}},64106:(e,t,r)=>{Promise.resolve().then(r.bind(r,9834)),Promise.resolve().then(r.bind(r,33122)),Promise.resolve().then(r.bind(r,92585)),Promise.resolve().then(r.bind(r,46109)),Promise.resolve().then(r.bind(r,2124))}},e=>{e.O(0,[2669,2896,7312,6600,239,6712,5e3,471,1059,2802,235,8671,4834,6193,5404,9655,2719,9761,1445,7497,5753,1884,3218,9643,7737,2397,3956,7358],()=>e(e.s=64106)),_N_E=e.O()}]);